!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){},{}],2:[function(a,b){function c(a,b){return m.isUndefined(b)?""+b:!m.isNumber(b)||!isNaN(b)&&isFinite(b)?m.isFunction(b)||m.isRegExp(b)?b.toString():b:b.toString()}function d(a,b){return m.isString(a)?a.length<b?a:a.slice(0,b):a}function e(a){return d(JSON.stringify(a.actual,c),128)+" "+a.operator+" "+d(JSON.stringify(a.expected,c),128)}function f(a,b,c,d,e){throw new p.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function g(a,b){a||f(a,!0,b,"==",p.ok)}function h(a,b){if(a===b)return!0;if(m.isBuffer(a)&&m.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return m.isDate(a)&&m.isDate(b)?a.getTime()===b.getTime():m.isRegExp(a)&&m.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:m.isObject(a)||m.isObject(b)?j(a,b):a==b}function i(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function j(a,b){if(m.isNullOrUndefined(a)||m.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(i(a))return i(b)?(a=n.call(a),b=n.call(b),h(a,b)):!1;try{var c,d,e=q(a),f=q(b)}catch(g){return!1}if(e.length!=f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!h(a[c],b[c]))return!1;return!0}function k(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function l(a,b,c,d){var e;m.isString(c)&&(d=c,c=null);try{b()}catch(g){e=g}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&f(e,c,"Missing expected exception"+d),!a&&k(e,c)&&f(e,c,"Got unwanted exception"+d),a&&e&&c&&!k(e,c)||!a&&e)throw e}var m=a("util/"),n=Array.prototype.slice,o=Object.prototype.hasOwnProperty,p=b.exports=g;p.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=e(this),this.generatedMessage=!0);var b=a.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,g=b.name,h=d.indexOf("\n"+g);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},m.inherits(p.AssertionError,Error),p.fail=f,p.ok=g,p.equal=function(a,b,c){a!=b&&f(a,b,c,"==",p.equal)},p.notEqual=function(a,b,c){a==b&&f(a,b,c,"!=",p.notEqual)},p.deepEqual=function(a,b,c){h(a,b)||f(a,b,c,"deepEqual",p.deepEqual)},p.notDeepEqual=function(a,b,c){h(a,b)&&f(a,b,c,"notDeepEqual",p.notDeepEqual)},p.strictEqual=function(a,b,c){a!==b&&f(a,b,c,"===",p.strictEqual)},p.notStrictEqual=function(a,b,c){a===b&&f(a,b,c,"!==",p.notStrictEqual)},p.throws=function(){l.apply(this,[!0].concat(n.call(arguments)))},p.doesNotThrow=function(){l.apply(this,[!1].concat(n.call(arguments)))},p.ifError=function(a){if(a)throw a};var q=Object.keys||function(a){var b=[];for(var c in a)o.call(a,c)&&b.push(c);return b}},{"util/":146}],3:[function(a,b){b.exports=a(1)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/lib/_empty.js":1}],4:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e,f=typeof a;if("number"===f)e=a>0?a>>>0:0;else if("string"===f)"base64"===b&&(a=x(a)),e=d.byteLength(a,b);else{if("object"!==f||null===a)throw new TypeError("must start with number, buffer, array or string");"Buffer"===a.type&&J(a.data)&&(a=a.data),e=+a.length>0?Math.floor(+a.length):0}if(this.length>K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");var g;d.TYPED_ARRAY_SUPPORT?g=d._augment(new Uint8Array(e)):(g=this,g.length=e,g._isBuffer=!0);var h;if(d.TYPED_ARRAY_SUPPORT&&"number"==typeof a.byteLength)g._set(a);else if(z(a))if(d.isBuffer(a))for(h=0;e>h;h++)g[h]=a.readUInt8(h);else for(h=0;e>h;h++)g[h]=(a[h]%256+256)%256;else if("string"===f)g.write(a,0,b);else if("number"===f&&!d.TYPED_ARRAY_SUPPORT&&!c)for(h=0;e>h;h++)g[h]=0;return g}function e(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function f(a,b,c,d){var e=F(B(b),a,c,d);return e}function g(a,b,c,d){var e=F(C(b),a,c,d);return e}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,d){var e=F(E(b),a,c,d);return e}function j(a,b,c,d){var e=F(D(b),a,c,d);return e}function k(a,b,c){return H.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=G(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+G(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=A(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function r(a,b,c,e,f,g){if(!d.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>f||g>b)throw new TypeError("value is out of bounds");if(c+e>a.length)throw new TypeError("index out of range")}function s(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function t(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function u(a,b,c,d,e,f){if(b>e||f>b)throw new TypeError("value is out of bounds");if(c+d>a.length)throw new TypeError("index out of range")}function v(a,b,c,d,e){return e||u(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),I.write(a,b,c,d,23,4),c+4}function w(a,b,c,d,e){return e||u(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),I.write(a,b,c,d,52,8),c+8}function x(a){for(a=y(a).replace(M,"");a.length%4!==0;)a+="=";return a}function y(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function z(a){return J(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function A(a){return 16>a?"0"+a.toString(16):a.toString(16)}function B(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(d);else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function C(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function D(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function E(a){return H.toByteArray(a)}function F(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function G(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}var H=a("base64-js"),I=a("ieee754"),J=a("is-array");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192;var K=1073741823;d.TYPED_ARRAY_SUPPORT=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(c){return!1}}(),d.isBuffer=function(a){return!(null==a||!a._isBuffer)},d.compare=function(a,b){if(!d.isBuffer(a)||!d.isBuffer(b))throw new TypeError("Arguments must be Buffers");for(var c=a.length,e=b.length,f=0,g=Math.min(c,e);g>f&&a[f]===b[f];f++);return f!==g&&(c=a[f],e=b[f]),e>c?-1:c>e?1:0},d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(a,b){if(!J(a))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===a.length)return new d(0);if(1===a.length)return a[0];var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"ascii":case"binary":case"raw":c=a.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;case"hex":c=a.length>>>1;break;case"utf8":case"utf-8":c=B(a).length;break;case"base64":c=E(a).length;break;default:c=a.length}return c},d.prototype.length=void 0,d.prototype.parent=void 0,d.prototype.toString=function(a,b,c){var d=!1;if(b>>>=0,c=void 0===c||1/0===c?this.length:c>>>0,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return o(this,b,c);case"utf8":case"utf-8":return l(this,b,c);case"ascii":return m(this,b,c);case"binary":return n(this,b,c);case"base64":return k(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}},d.prototype.equals=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return 0===d.compare(this,a)},d.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},d.prototype.compare=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return d.compare(this,a)},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new TypeError("Unknown encoding: "+d)}return m},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(a,b){var c=this.length;if(a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a),d.TYPED_ARRAY_SUPPORT)return d._augment(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.readUInt8=function(a,b){return b||q(a,1,this.length),this[a]},d.prototype.readUInt16LE=function(a,b){return b||q(a,2,this.length),this[a]|this[a+1]<<8},d.prototype.readUInt16BE=function(a,b){return b||q(a,2,this.length),this[a]<<8|this[a+1]},d.prototype.readUInt32LE=function(a,b){return b||q(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},d.prototype.readUInt32BE=function(a,b){return b||q(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},d.prototype.readInt8=function(a,b){return b||q(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},d.prototype.readInt16LE=function(a,b){b||q(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},d.prototype.readInt16BE=function(a,b){b||q(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},d.prototype.readInt32LE=function(a,b){return b||q(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},d.prototype.readInt32BE=function(a,b){return b||q(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},d.prototype.readFloatLE=function(a,b){return b||q(a,4,this.length),I.read(this,a,!0,23,4)},d.prototype.readFloatBE=function(a,b){return b||q(a,4,this.length),I.read(this,a,!1,23,4)},d.prototype.readDoubleLE=function(a,b){return b||q(a,8,this.length),I.read(this,a,!0,52,8)},d.prototype.readDoubleBE=function(a,b){return b||q(a,8,this.length),I.read(this,a,!1,52,8)},d.prototype.writeUInt8=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,1,255,0),d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=a,b+1},d.prototype.writeUInt16LE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):s(this,a,b,!0),b+2},d.prototype.writeUInt16BE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,2,65535,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):s(this,a,b,!1),b+2},d.prototype.writeUInt32LE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a):t(this,a,b,!0),b+4},d.prototype.writeUInt32BE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,4,4294967295,0),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):t(this,a,b,!1),b+4},d.prototype.writeInt8=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,1,127,-128),d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=a,b+1},d.prototype.writeInt16LE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8):s(this,a,b,!0),b+2},d.prototype.writeInt16BE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,2,32767,-32768),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a):s(this,a,b,!1),b+2},d.prototype.writeInt32LE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,4,2147483647,-2147483648),d.TYPED_ARRAY_SUPPORT?(this[b]=a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):t(this,a,b,!0),b+4},d.prototype.writeInt32BE=function(a,b,c){return a=+a,b>>>=0,c||r(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a):t(this,a,b,!1),b+4},d.prototype.writeFloatLE=function(a,b,c){return v(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){return v(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){return w(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){return w(this,a,b,!1,c)},d.prototype.copy=function(a,b,c,e){var f=this;if(c||(c=0),e||0===e||(e=this.length),b||(b=0),e!==c&&0!==a.length&&0!==f.length){if(c>e)throw new TypeError("sourceEnd < sourceStart");if(0>b||b>=a.length)throw new TypeError("targetStart out of bounds");if(0>c||c>=f.length)throw new TypeError("sourceStart out of bounds");if(0>e||e>f.length)throw new TypeError("sourceEnd out of bounds");e>this.length&&(e=this.length),a.length-b<e-c&&(e=a.length-b+c);var g=e-c;if(1e3>g||!d.TYPED_ARRAY_SUPPORT)for(var h=0;g>h;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b)}},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new TypeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new TypeError("start out of bounds");if(0>c||c>this.length)throw new TypeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=B(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},d.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(d.TYPED_ARRAY_SUPPORT)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var L=d.prototype;d._augment=function(a){return a.constructor=d,a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=L.get,a.set=L.set,a.write=L.write,a.toString=L.toString,a.toLocaleString=L.toString,a.toJSON=L.toJSON,a.equals=L.equals,a.compare=L.compare,a.copy=L.copy,a.slice=L.slice,a.readUInt8=L.readUInt8,a.readUInt16LE=L.readUInt16LE,a.readUInt16BE=L.readUInt16BE,a.readUInt32LE=L.readUInt32LE,a.readUInt32BE=L.readUInt32BE,a.readInt8=L.readInt8,a.readInt16LE=L.readInt16LE,a.readInt16BE=L.readInt16BE,a.readInt32LE=L.readInt32LE,a.readInt32BE=L.readInt32BE,a.readFloatLE=L.readFloatLE,a.readFloatBE=L.readFloatBE,a.readDoubleLE=L.readDoubleLE,a.readDoubleBE=L.readDoubleBE,a.writeUInt8=L.writeUInt8,a.writeUInt16LE=L.writeUInt16LE,a.writeUInt16BE=L.writeUInt16BE,a.writeUInt32LE=L.writeUInt32LE,a.writeUInt32BE=L.writeUInt32BE,a.writeInt8=L.writeInt8,a.writeInt16LE=L.writeInt16LE,a.writeInt16BE=L.writeInt16BE,a.writeInt32LE=L.writeInt32LE,a.writeInt32BE=L.writeInt32BE,a.writeFloatLE=L.writeFloatLE,a.writeFloatBE=L.writeFloatBE,a.writeDoubleLE=L.writeDoubleLE,a.writeDoubleBE=L.writeDoubleBE,a.fill=L.fill,a.inspect=L.inspect,a.toArrayBuffer=L.toArrayBuffer,a};var M=/[^+\/0-9A-z]/g},{"base64-js":5,ieee754:6,"is-array":7}],5:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],6:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],7:[function(a,b){var c=Array.isArray,d=Object.prototype.toString;b.exports=c||function(a){return!!a&&"[object Array]"==d.call(a)}},{}],8:[function(a,b){(function(c){"use strict";function d(a){i.call(this),this._hash=a,this.buffers=[]}function e(a){i.call(this),this._hash=a}var f=a("sha.js"),g=a("./md5"),h=a("ripemd160"),i=a("stream").Transform,j=a("util").inherits;b.exports=function(a){return"md5"===a?new d(g):"rmd160"===a?new d(h):new e(f(a))},j(d,i),d.prototype._transform=function(a,b,c){this.buffers.push(a),c()},d.prototype._flush=function(a){var b=c.concat(this.buffers),d=this._hash(b);this.buffers=null,this.push(d),a()},d.prototype.update=function(a,b){return this.write(a,b),this},d.prototype.digest=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d},j(e,i),e.prototype._transform=function(a,b,c){this._hash.update(a),c()},e.prototype._flush=function(a){this.push(this._hash.digest()),this._hash=null,a()},e.prototype.update=function(a,b){return this.write(a,b),this},e.prototype.digest=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d}}).call(this,a("buffer").Buffer)},{"./md5":12,buffer:4,ripemd160:105,"sha.js":107,stream:141,util:146}],9:[function(a,b){(function(c){"use strict";function d(a,b){if(!(this instanceof d))return new d(a,b);f.call(this),this._opad=j,this._alg=a;var g="sha512"===a||"sha384"===a?128:64;b=this._key=c.isBuffer(b)?b:new c(b),b.length>g?b=e(a).update(b).digest():b.length<g&&(b=c.concat([b,h],g));for(var i=this._ipad=new c(g),j=this._opad=new c(g),k=0;g>k;k++)i[k]=54^b[k],j[k]=92^b[k];this._hash=e(a).update(i)}var e=a("./create-hash"),f=a("stream").Transform,g=a("util").inherits,h=new c(128);h.fill(0),b.exports=d,g(d,f),d.prototype.update=function(a,b){return this.write(a,b),this},d.prototype._transform=function(a,b,c){this._hash.update(a),c()},d.prototype._flush=function(a){var b=this._hash.digest();this.push(e(this._alg).update(this._opad).update(b).digest()),a()},d.prototype.digest=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d}}).call(this,a("buffer").Buffer)},{"./create-hash":8,buffer:4,stream:141,util:146}],10:[function(a,b){(function(a){"use strict";function c(b,c){if(b.length%f!==0){var d=b.length+(f-b.length%f);b=a.concat([b,g],d)}for(var e=[],h=c?b.readInt32BE:b.readInt32LE,i=0;i<b.length;i+=f)e.push(h.call(b,i));return e}function d(b,c,d){for(var e=new a(c),f=d?e.writeInt32BE:e.writeInt32LE,g=0;g<b.length;g++)f.call(e,b[g],4*g,!0);return e}function e(b,e,f,g){a.isBuffer(b)||(b=new a(b));var i=e(c(b,g),b.length*h);return d(i,f,g)}var f=4,g=new a(f);g.fill(0);var h=8;b.exports={hash:e}}).call(this,a("buffer").Buffer)},{buffer:4}],11:[function(a,b,c){(function(d){"use strict";function e(){var a=[].slice.call(arguments).join(" ");throw new Error([a,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function f(a,b){for(var c in a)b(a[c],c)}var g=a("./rng");c.createHash=a("./create-hash"),c.createHmac=a("./create-hmac"),c.randomBytes=function(a,b){if(!b||!b.call)return new d(g(a));try{b.call(this,void 0,new d(g(a)))}catch(c){b(c)}};var h=["sha1","sha256","sha512","md5","rmd160"].concat(Object.keys(a("browserify-sign/algos")));c.getHashes=function(){return h};var i=a("./pbkdf2")(c);c.pbkdf2=i.pbkdf2,c.pbkdf2Sync=i.pbkdf2Sync,a("browserify-aes/inject")(c,b.exports),a("browserify-sign/inject")(b.exports,c),a("diffie-hellman/inject")(c,b.exports),a("create-ecdh/inject")(b.exports,c),f(["createCredentials","publicEncrypt","privateDecrypt"],function(a){c[a]=function(){e("sorry,",a,"is not implemented yet")}})}).call(this,a("buffer").Buffer)},{"./create-hash":8,"./create-hmac":9,"./pbkdf2":113,"./rng":114,"browserify-aes/inject":20,"browserify-sign/algos":32,"browserify-sign/inject":35,buffer:4,"create-ecdh/inject":75,"diffie-hellman/inject":99}],12:[function(a,b){"use strict";function c(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,j=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,o=j,p=k;c=e(c,d,j,k,a[l+0],7,-680876936),k=e(k,c,d,j,a[l+1],12,-389564586),j=e(j,k,c,d,a[l+2],17,606105819),d=e(d,j,k,c,a[l+3],22,-1044525330),c=e(c,d,j,k,a[l+4],7,-176418897),k=e(k,c,d,j,a[l+5],12,1200080426),j=e(j,k,c,d,a[l+6],17,-1473231341),d=e(d,j,k,c,a[l+7],22,-45705983),c=e(c,d,j,k,a[l+8],7,1770035416),k=e(k,c,d,j,a[l+9],12,-1958414417),j=e(j,k,c,d,a[l+10],17,-42063),d=e(d,j,k,c,a[l+11],22,-1990404162),c=e(c,d,j,k,a[l+12],7,1804603682),k=e(k,c,d,j,a[l+13],12,-40341101),j=e(j,k,c,d,a[l+14],17,-1502002290),d=e(d,j,k,c,a[l+15],22,1236535329),c=f(c,d,j,k,a[l+1],5,-165796510),k=f(k,c,d,j,a[l+6],9,-1069501632),j=f(j,k,c,d,a[l+11],14,643717713),d=f(d,j,k,c,a[l+0],20,-373897302),c=f(c,d,j,k,a[l+5],5,-701558691),k=f(k,c,d,j,a[l+10],9,38016083),j=f(j,k,c,d,a[l+15],14,-660478335),d=f(d,j,k,c,a[l+4],20,-405537848),c=f(c,d,j,k,a[l+9],5,568446438),k=f(k,c,d,j,a[l+14],9,-1019803690),j=f(j,k,c,d,a[l+3],14,-187363961),d=f(d,j,k,c,a[l+8],20,1163531501),c=f(c,d,j,k,a[l+13],5,-1444681467),k=f(k,c,d,j,a[l+2],9,-51403784),j=f(j,k,c,d,a[l+7],14,1735328473),d=f(d,j,k,c,a[l+12],20,-1926607734),c=g(c,d,j,k,a[l+5],4,-378558),k=g(k,c,d,j,a[l+8],11,-2022574463),j=g(j,k,c,d,a[l+11],16,1839030562),d=g(d,j,k,c,a[l+14],23,-35309556),c=g(c,d,j,k,a[l+1],4,-1530992060),k=g(k,c,d,j,a[l+4],11,1272893353),j=g(j,k,c,d,a[l+7],16,-155497632),d=g(d,j,k,c,a[l+10],23,-1094730640),c=g(c,d,j,k,a[l+13],4,681279174),k=g(k,c,d,j,a[l+0],11,-358537222),j=g(j,k,c,d,a[l+3],16,-722521979),d=g(d,j,k,c,a[l+6],23,76029189),c=g(c,d,j,k,a[l+9],4,-640364487),k=g(k,c,d,j,a[l+12],11,-421815835),j=g(j,k,c,d,a[l+15],16,530742520),d=g(d,j,k,c,a[l+2],23,-995338651),c=h(c,d,j,k,a[l+0],6,-198630844),k=h(k,c,d,j,a[l+7],10,1126891415),j=h(j,k,c,d,a[l+14],15,-1416354905),d=h(d,j,k,c,a[l+5],21,-57434055),c=h(c,d,j,k,a[l+12],6,1700485571),k=h(k,c,d,j,a[l+3],10,-1894986606),j=h(j,k,c,d,a[l+10],15,-1051523),d=h(d,j,k,c,a[l+1],21,-2054922799),c=h(c,d,j,k,a[l+8],6,1873313359),k=h(k,c,d,j,a[l+15],10,-30611744),j=h(j,k,c,d,a[l+6],15,-1560198380),d=h(d,j,k,c,a[l+13],21,1309151649),c=h(c,d,j,k,a[l+4],6,-145523070),k=h(k,c,d,j,a[l+11],10,-1120210379),j=h(j,k,c,d,a[l+2],15,718787259),d=h(d,j,k,c,a[l+9],21,-343485551),c=i(c,m),d=i(d,n),j=i(j,o),k=i(k,p)}return Array(c,d,j,k)}function d(a,b,c,d,e,f){return i(j(i(i(b,a),i(d,f)),e),c)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function j(a,b){return a<<b|a>>>32-b}var k=a("./helpers");b.exports=function(a){return k.hash(a,c,16)}},{"./helpers":10}],13:[function(a,b){(function(a){b.exports=function(b,c,d,e){d/=8,e=e||0;for(var f,g,h,i=0,j=0,k=new a(d),l=new a(e),m=0;;){if(f=b.createHash("md5"),m++>0&&f.update(g),f.update(c),g=f.digest(),h=0,d>0)for(;;){if(0===d)break;if(h===g.length)break;k[i++]=g[h],d--,h++}if(e>0&&h!==g.length)for(;;){if(0===e)break;if(h===g.length)break;l[j++]=g[h],e--,h++}if(0===d&&0===e)break}for(h=0;h<g.length;h++)g[h]=0;return{key:k,iv:l}}}).call(this,a("buffer").Buffer)},{buffer:4}],14:[function(a,b,c){(function(a){function b(a){var b,c;return b=a>h||0>a?(c=Math.abs(a)%h,0>a?h-c:c):a}function d(a){var b,c,d;for(b=c=0,d=a.length;d>=0?d>c:c>d;b=d>=0?++c:--c)a[b]=0;return!1}function e(){var a;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var b,c;for(c=[],a=b=0;4>b;a=++b)c.push([]);return c}(),this.INV_SUB_MIX=function(){var b,c;for(c=[],a=b=0;4>b;a=++b)c.push([]);return c}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function f(a){for(var b=a.length/4,c=new Array(b),d=-1;++d<b;)c[d]=a.readUInt32BE(4*d);return c}function g(a){this._key=f(a),this._doReset()}var h=Math.pow(2,32);e.prototype.init=function(){var a,b,c,d,e,f,g,h,i,j;for(a=function(){var a,c;for(c=[],b=a=0;256>a;b=++a)c.push(128>b?b<<1:b<<1^283);return c}(),e=0,i=0,b=j=0;256>j;b=++j)c=i^i<<1^i<<2^i<<3^i<<4,c=c>>>8^255&c^99,this.SBOX[e]=c,this.INV_SBOX[c]=e,f=a[e],g=a[f],h=a[g],d=257*a[c]^16843008*c,this.SUB_MIX[0][e]=d<<24|d>>>8,this.SUB_MIX[1][e]=d<<16|d>>>16,this.SUB_MIX[2][e]=d<<8|d>>>24,this.SUB_MIX[3][e]=d,d=16843009*h^65537*g^257*f^16843008*e,this.INV_SUB_MIX[0][c]=d<<24|d>>>8,this.INV_SUB_MIX[1][c]=d<<16|d>>>16,this.INV_SUB_MIX[2][c]=d<<8|d>>>24,this.INV_SUB_MIX[3][c]=d,0===e?e=i=1:(e=f^a[a[a[h^f]]],i^=a[a[i]]);return!0};var i=new e;g.blockSize=16,g.prototype.blockSize=g.blockSize,g.keySize=32,g.prototype.keySize=g.keySize,g.ivSize=g.blockSize,g.prototype.ivSize=g.ivSize,g.prototype._doReset=function(){var a,b,c,d,e,f,g,h;for(c=this._key,b=c.length,this._nRounds=b+6,e=4*(this._nRounds+1),this._keySchedule=[],d=g=0;e>=0?e>g:g>e;d=e>=0?++g:--g)this._keySchedule[d]=b>d?c[d]:(f=this._keySchedule[d-1],d%b===0?(f=f<<8|f>>>24,f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f],f^=i.RCON[d/b|0]<<24):b>6&&d%b===4?f=i.SBOX[f>>>24]<<24|i.SBOX[f>>>16&255]<<16|i.SBOX[f>>>8&255]<<8|i.SBOX[255&f]:void 0,this._keySchedule[d-b]^f);for(this._invKeySchedule=[],a=h=0;e>=0?e>h:h>e;a=e>=0?++h:--h)d=e-a,f=this._keySchedule[d-(a%4?0:4)],this._invKeySchedule[a]=4>a||4>=d?f:i.INV_SUB_MIX[0][i.SBOX[f>>>24]]^i.INV_SUB_MIX[1][i.SBOX[f>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[f>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&f]];return!0},g.prototype.encryptBlock=function(b){b=f(new a(b));var c=this._doCryptBlock(b,this._keySchedule,i.SUB_MIX,i.SBOX),d=new a(16);return d.writeUInt32BE(c[0],0),d.writeUInt32BE(c[1],4),d.writeUInt32BE(c[2],8),d.writeUInt32BE(c[3],12),d},g.prototype.decryptBlock=function(b){b=f(new a(b));var c=[b[3],b[1]];b[1]=c[0],b[3]=c[1];var d=this._doCryptBlock(b,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX),e=new a(16);return e.writeUInt32BE(d[0],0),e.writeUInt32BE(d[3],4),e.writeUInt32BE(d[2],8),e.writeUInt32BE(d[1],12),e},g.prototype.scrub=function(){d(this._keySchedule),d(this._invKeySchedule),d(this._key)},g.prototype._doCryptBlock=function(a,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q;for(h=a[0]^c[0],i=a[1]^c[1],j=a[2]^c[2],k=a[3]^c[3],f=4,g=p=1,q=this._nRounds;q>=1?q>p:p>q;g=q>=1?++p:--p)l=d[0][h>>>24]^d[1][i>>>16&255]^d[2][j>>>8&255]^d[3][255&k]^c[f++],m=d[0][i>>>24]^d[1][j>>>16&255]^d[2][k>>>8&255]^d[3][255&h]^c[f++],n=d[0][j>>>24]^d[1][k>>>16&255]^d[2][h>>>8&255]^d[3][255&i]^c[f++],o=d[0][k>>>24]^d[1][h>>>16&255]^d[2][i>>>8&255]^d[3][255&j]^c[f++],h=l,i=m,j=n,k=o;return l=(e[h>>>24]<<24|e[i>>>16&255]<<16|e[j>>>8&255]<<8|e[255&k])^c[f++],m=(e[i>>>24]<<24|e[j>>>16&255]<<16|e[k>>>8&255]<<8|e[255&h])^c[f++],n=(e[j>>>24]<<24|e[k>>>16&255]<<16|e[h>>>8&255]<<8|e[255&i])^c[f++],o=(e[k>>>24]<<24|e[h>>>16&255]<<16|e[i>>>8&255]<<8|e[255&j])^c[f++],[b(l),b(m),b(n),b(o)]},c.AES=g}).call(this,a("buffer").Buffer)},{buffer:4}],15:[function(a,b){(function(c){function d(a,b,e,h){if(!(this instanceof d))return new d(a,b,e);g.call(this),this._finID=c.concat([e,new c([0,0,0,1])]),e=c.concat([e,new c([0,0,0,2])]),this._cipher=new f.AES(b),this._prev=new c(e.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,this._alen=0,this._len=0,e.copy(this._prev),this._mode=a;var j=new c(4);j.fill(0),this._ghash=new i(this._cipher.encryptBlock(j)),this._authTag=null,this._called=!1}function e(a,b){var c=0;a.length!==b.length&&c++;for(var d=Math.min(a.length,b.length),e=-1;++e<d;)c+=a[e]^b[e];return c}var f=a("./aes"),g=a("./cipherBase"),h=a("inherits"),i=a("./ghash"),j=a("./xor");h(d,g),b.exports=d,d.prototype._transform=function(a,b,d){if(!this._called&&this._alen){var e=16-this._alen%16;16>e&&(e=new c(e),e.fill(0),this._ghash.update(e))}this._called=!0;var f=this._mode.encrypt(this,a);this._ghash.update(this._decrypt?a:f),this._len+=a.length,d(null,f)},d.prototype._flush=function(a){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var b=j(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(e(b,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=b;this._cipher.scrub(),a()},d.prototype.getAuthTag=function(){if(!this._decrypt&&c.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},d.prototype.setAuthTag=function(a){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");
this._authTag=a},d.prototype.setAAD=function(a){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(a),this._alen+=a.length}}).call(this,a("buffer").Buffer)},{"./aes":14,"./cipherBase":16,"./ghash":19,"./xor":30,buffer:4,inherits:121}],16:[function(a,b){(function(c){function d(){e.call(this)}var e=a("stream").Transform,f=a("inherits");b.exports=d,f(d,e),d.prototype.update=function(a,b,d){this.write(a,b);for(var e,f=new c("");e=this.read();)f=c.concat([f,e]);return d&&(f=f.toString(d)),f},d.prototype.final=function(a){this.end();for(var b,d=new c("");b=this.read();)d=c.concat([d,b]);return a&&(d=d.toString(a)),d}}).call(this,a("buffer").Buffer)},{buffer:4,inherits:121,stream:141}],17:[function(a,b){(function(c){function d(a,b,f){return this instanceof d?(h.call(this),this._cache=new e,this._last=void 0,this._cipher=new g.AES(b),this._prev=new c(f.length),f.copy(this._prev),void(this._mode=a)):new d(a,b,f)}function e(){return this instanceof e?void(this.cache=new c("")):new e}function f(a){var b=a[15];if(16!==b)return a.slice(0,16-b)}var g=a("./aes"),h=a("./cipherBase"),i=a("inherits"),j=a("./modes"),k=a("./streamCipher"),l=a("./authCipher"),m=a("./EVP_BytesToKey");i(d,h),d.prototype._transform=function(a,b,c){this._cache.add(a);for(var d,e;d=this._cache.get();)e=this._mode.decrypt(this,d),this.push(e);c()},d.prototype._flush=function(a){var b=this._cache.flush();return b?(this.push(f(this._mode.decrypt(this,b))),void a()):a},e.prototype.add=function(a){this.cache=c.concat([this.cache,a])},e.prototype.get=function(){if(this.cache.length>16){var a=this.cache.slice(0,16);return this.cache=this.cache.slice(16),a}return null},e.prototype.flush=function(){return this.cache.length?this.cache:void 0};var n={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};b.exports=function(a){function b(a,b,e){var f=j[a];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new c(e)),"string"==typeof b&&(b=new c(b)),b.length!==f.key/8)throw new TypeError("invalid key length "+b.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new k(n[f.mode],b,e,!0):"auth"===f.type?new l(n[f.mode],b,e,!0):new d(n[f.mode],b,e)}function e(c,d){var e=j[c];if(!e)throw new TypeError("invalid suite type");var f=m(a,d,e.key,e.iv);return b(c,f.key,f.iv)}return{createDecipher:e,createDecipheriv:b}}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":13,"./aes":14,"./authCipher":15,"./cipherBase":16,"./modes":21,"./modes/cbc":22,"./modes/cfb":23,"./modes/cfb1":24,"./modes/cfb8":25,"./modes/ctr":26,"./modes/ecb":27,"./modes/ofb":28,"./streamCipher":29,buffer:4,inherits:121}],18:[function(a,b){(function(c){function d(a,b,h){return this instanceof d?(g.call(this),this._cache=new e,this._cipher=new f.AES(b),this._prev=new c(h.length),h.copy(this._prev),void(this._mode=a)):new d(a,b,h)}function e(){return this instanceof e?void(this.cache=new c("")):new e}var f=a("./aes"),g=a("./cipherBase"),h=a("inherits"),i=a("./modes"),j=a("./EVP_BytesToKey"),k=a("./streamCipher"),l=a("./authCipher");h(d,g),d.prototype._transform=function(a,b,c){this._cache.add(a);for(var d,e;d=this._cache.get();)e=this._mode.encrypt(this,d),this.push(e);c()},d.prototype._flush=function(a){var b=this._cache.flush();this.push(this._mode.encrypt(this,b)),this._cipher.scrub(),a()},e.prototype.add=function(a){this.cache=c.concat([this.cache,a])},e.prototype.get=function(){if(this.cache.length>15){var a=this.cache.slice(0,16);return this.cache=this.cache.slice(16),a}return null},e.prototype.flush=function(){for(var a=16-this.cache.length,b=new c(a),d=-1;++d<a;)b.writeUInt8(a,d);var e=c.concat([this.cache,b]);return e};var m={ECB:a("./modes/ecb"),CBC:a("./modes/cbc"),CFB:a("./modes/cfb"),CFB8:a("./modes/cfb8"),CFB1:a("./modes/cfb1"),OFB:a("./modes/ofb"),CTR:a("./modes/ctr"),GCM:a("./modes/ctr")};b.exports=function(a){function b(a,b,e){var f=i[a];if(!f)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=new c(e)),"string"==typeof b&&(b=new c(b)),b.length!==f.key/8)throw new TypeError("invalid key length "+b.length);if(e.length!==f.iv)throw new TypeError("invalid iv length "+e.length);return"stream"===f.type?new k(m[f.mode],b,e):"auth"===f.type?new l(m[f.mode],b,e):new d(m[f.mode],b,e)}function e(c,d){var e=i[c];if(!e)throw new TypeError("invalid suite type");var f=j(a,d,e.key,e.iv);return b(c,f.key,f.iv)}return{createCipher:e,createCipheriv:b}}}).call(this,a("buffer").Buffer)},{"./EVP_BytesToKey":13,"./aes":14,"./authCipher":15,"./cipherBase":16,"./modes":21,"./modes/cbc":22,"./modes/cfb":23,"./modes/cfb1":24,"./modes/cfb8":25,"./modes/ctr":26,"./modes/ecb":27,"./modes/ofb":28,"./streamCipher":29,buffer:4,inherits:121}],19:[function(a,b){(function(a){function c(b){this.h=b,this.state=new a(16),this.state.fill(0),this.cache=new a("")}function d(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function e(b){b=b.map(f);var c=new a(16);return c.writeUInt32BE(b[0],0),c.writeUInt32BE(b[1],4),c.writeUInt32BE(b[2],8),c.writeUInt32BE(b[3],12),c}function f(a){var b,c;return b=a>i||0>a?(c=Math.abs(a)%i,0>a?i-c:c):a}function g(a,b){return[a[0]^b[0],a[1]^b[1],a[2]^b[2],a[3]^b[3]]}var h=new a(16);h.fill(0),b.exports=c,c.prototype.ghash=function(a){for(var b=-1;++b<a.length;)this.state[b]^=255&a[b];this._multiply()},c.prototype._multiply=function(){for(var a,b,c,f=d(this.h),h=[0,0,0,0],i=-1;++i<128;){for(b=0!==(this.state[~~(i/8)]&1<<7-i%8),b&&(h=g(h,f)),c=0!==(1&f[3]),a=3;a>0;a--)f[a]=f[a]>>>1|(1&f[a-1])<<31;f[0]=f[0]>>>1,c&&(f[0]=f[0]^225<<24)}this.state=e(h)},c.prototype.update=function(b){this.cache=a.concat([this.cache,b]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},c.prototype.final=function(b,c){return this.cache.length&&this.ghash(a.concat([this.cache,h],16)),this.ghash(e([0,b,0,c])),this.state};var i=Math.pow(2,32)}).call(this,a("buffer").Buffer)},{buffer:4}],20:[function(a,b){b.exports=function(b,c){function d(){return Object.keys(g)}c=c||{};var e=a("./encrypter")(b);c.createCipher=e.createCipher,c.createCipheriv=e.createCipheriv;var f=a("./decrypter")(b);c.createDecipher=f.createDecipher,c.createDecipheriv=f.createDecipheriv;var g=a("./modes");c.listCiphers=d}},{"./decrypter":17,"./encrypter":18,"./modes":21}],21:[function(a,b,c){c["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},c["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},c["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},c["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},c["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},c["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},c.aes128=c["aes-128-cbc"],c.aes192=c["aes-192-cbc"],c.aes256=c["aes-256-cbc"],c["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},c["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},c["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},c["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},c["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},c["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},c["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},c["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},c["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},c["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},c["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},c["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},c["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},c["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},c["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},c["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},c["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},c["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],22:[function(a,b,c){var d=a("../xor");c.encrypt=function(a,b){var c=d(b,a._prev);return a._prev=a._cipher.encryptBlock(c),a._prev},c.decrypt=function(a,b){var c=a._prev;a._prev=b;var e=a._cipher.decryptBlock(b);return d(e,c)}},{"../xor":30}],23:[function(a,b,c){(function(b){function d(a,c,d){var f=c.length,g=e(c,a._cache);return a._cache=a._cache.slice(f),a._prev=b.concat([a._prev,d?c:g]),g}var e=a("../xor");c.encrypt=function(a,c,e){for(var f,g=new b("");c.length;){if(0===a._cache.length&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=new b("")),!(a._cache.length<=c.length)){g=b.concat([g,d(a,c,e)]);break}f=a._cache.length,g=b.concat([g,d(a,c.slice(0,f),e)]),c=c.slice(f)}return g}}).call(this,a("buffer").Buffer)},{"../xor":30,buffer:4}],24:[function(a,b,c){(function(a){function b(a,b,c){for(var e,f,g,h=-1,i=8,j=0;++h<i;)e=a._cipher.encryptBlock(a._prev),f=b&1<<7-h?128:0,g=e[0]^f,j+=(128&g)>>h%8,a._prev=d(a._prev,c?f:g);return j}function d(b,c){var d=b.length,e=-1,f=new a(b.length);for(b=a.concat([b,new a([c])]);++e<d;)f[e]=b[e]<<1|b[e+1]>>7;return f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:4}],25:[function(a,b,c){(function(a){function b(b,c,d){var e=b._cipher.encryptBlock(b._prev),f=e[0]^c;return b._prev=a.concat([b._prev.slice(1),new a([d?c:f])]),f}c.encrypt=function(c,d,e){for(var f=d.length,g=new a(f),h=-1;++h<f;)g[h]=b(c,d[h],e);return g}}).call(this,a("buffer").Buffer)},{buffer:4}],26:[function(a,b,c){(function(b){function d(a){var b=a._cipher.encryptBlock(a._prev);return e(a._prev),b}function e(a){for(var b,c=a.length;c--;){if(b=a.readUInt8(c),255!==b){b++,a.writeUInt8(b,c);break}a.writeUInt8(0,c)}}var f=a("../xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var e=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),f(c,e)}}).call(this,a("buffer").Buffer)},{"../xor":30,buffer:4}],27:[function(a,b,c){c.encrypt=function(a,b){return a._cipher.encryptBlock(b)},c.decrypt=function(a,b){return a._cipher.decryptBlock(b)}},{}],28:[function(a,b,c){(function(b){function d(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}var e=a("../xor");c.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=b.concat([a._cache,d(a)]);var f=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),e(c,f)}}).call(this,a("buffer").Buffer)},{"../xor":30,buffer:4}],29:[function(a,b){(function(c){function d(a,b,g,h){return this instanceof d?(f.call(this),this._cipher=new e.AES(b),this._prev=new c(g.length),this._cache=new c(""),this._secCache=new c(""),this._decrypt=h,g.copy(this._prev),void(this._mode=a)):new d(a,b,g)}var e=a("./aes"),f=a("./cipherBase"),g=a("inherits");g(d,f),b.exports=d,d.prototype._transform=function(a,b,c){c(null,this._mode.encrypt(this,a,this._decrypt))},d.prototype._flush=function(a){this._cipher.scrub(),a()}}).call(this,a("buffer").Buffer)},{"./aes":14,"./cipherBase":16,buffer:4,inherits:121}],30:[function(a,b){(function(a){function c(b,c){for(var d=Math.min(b.length,c.length),e=new a(d),f=-1;++f<d;)e.writeUInt8(b[f]^c[f],f);return e}b.exports=c}).call(this,a("buffer").Buffer)},{buffer:4}],31:[function(a,b){b.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],32:[function(a,b,c){(function(a){c["RSA-SHA224"]=c.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new a("302d300d06096086480165030402040500041c","hex")},c["RSA-SHA256"]=c.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new a("3031300d060960864801650304020105000420","hex")},c["RSA-SHA384"]=c.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new a("3041300d060960864801650304020205000430","hex")},c["RSA-SHA512"]=c.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new a("3051300d060960864801650304020305000440","hex")},c["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new a("3021300906052b0e03021a05000414","hex")},c["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new a("","hex")}}).call(this,a("buffer").Buffer)},{buffer:4}],33:[function(a,b,c){var d=a("asn1.js"),e=a("asn1.js-rfc3280"),f=d.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});c.RSAPrivateKey=f;var g=d.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});c.RSAPublicKey=g;var h=e.SubjectPublicKeyInfo;c.PublicKey=h;var i=d.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});c.ECPublicKey=i;var j=d.define("ECPrivateWrap",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});c.ECPrivateWrap=j;var k=d.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(e.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});c.PrivateKey=k;var l=d.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});c.EncryptedPrivateKey=l;var m=d.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(n),this.key("publicKey").optional().explicit(1).bitstr())});c.ECPrivateKey=m;var n=d.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),o=d.define("ECPrivateKey2",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});c.ECPrivateKey2=o},{"asn1.js":37,"asn1.js-rfc3280":36}],34:[function(a,b){a("./inject")(b.exports,a("crypto"))},{"./inject":35,crypto:11}],35:[function(a,b){(function(c){function d(a,b){h.call(this);var c=j[a];if(!c)throw new Error("Unknown message digest");this._hash=b.createHash(c.hash),this._tag=c.id,this._crypto=b}function e(a,b){h.call(this);var c=j[a];if(!c)throw new Error("Unknown message digest");this._hash=b.createHash(c.hash),this._tag=c.id}var f=a("./sign"),g=a("./verify"),h=a("readable-stream").Writable,i=a("inherits"),j=a("./algos");b.exports=function(a,b){function c(a){return new d(a,b)}function f(a){return new e(a,b)}a.createSign=c,a.createVerify=f},i(d,h),d.prototype._write=function(a,b,c){this._hash.update(a),c()},d.prototype.update=function(a){return this.write(a),this},d.prototype.sign=function(a,b){this.end();var d=this._hash.digest(),e=f(c.concat([this._tag,d]),a,this._crypto);return b&&(e=e.toString(b)),e},i(e,h),e.prototype._write=function(a,b,c){this._hash.update(a),c()},e.prototype.update=function(a){return this.write(a),this},e.prototype.verify=function(a,b,d){this.end();var e=this._hash.digest();return c.isBuffer(b)||(b=new c(b,d)),g(b,c.concat([this._tag,e]),a)}}).call(this,a("buffer").Buffer)},{"./algos":32,"./sign":72,"./verify":73,buffer:4,inherits:121,"readable-stream":138}],36:[function(a,b,c){try{var d=a("asn1.js")}catch(e){var d=a("../..")}var f=d.define("CRLReason",function(){this.enum({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});c.CRLReason=f;var g=d.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});c.AlgorithmIdentifier=g;var h=d.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(i),this.key("signatureAlgorithm").use(g),this.key("signature").bitstr())});c.Certificate=h;var i=d.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(j),this.key("serialNumber").use(k),this.key("signature").use(g),this.key("issuer").use(r),this.key("validity").use(l),this.key("subject").use(r),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").optional().explicit(1).use(n),this.key("subjectUniqueID").optional().explicit(2).use(n),this.key("extensions").optional().explicit(3).use(p))});c.TBSCertificate=i;var j=d.define("Version",function(){this.int({0:"v1",1:"v2",2:"v3"})});c.Version=j;var k=d.define("CertificateSerialNumber",function(){this.int()});c.CertificateSerialNumber=k;var l=d.define("Validity",function(){this.seq().obj(this.key("notBefore").use(m),this.key("notAfter").use(m))});c.Validity=l;var m=d.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});c.Time=m;var n=d.define("UniqueIdentifier",function(){this.bitstr()});c.UniqueIdentifier=n;var o=d.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(g),this.key("subjectPublicKey").bitstr())});c.SubjectPublicKeyInfo=o;var p=d.define("Extensions",function(){this.seqof(q)});c.Extensions=p;var q=d.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});c.Extension=q;var r=d.define("Name",function(){this.choice({rdn:this.use(s)})});c.Name=r;var s=d.define("RDNSequence",function(){this.seqof(t)});c.RDNSequence=s;var t=d.define("RelativeDistinguishedName",function(){this.setof(u)});c.RelativeDistinguishedName=t;var u=d.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(v),this.key("value").use(w))});c.AttributeTypeAndValue=u;var v=d.define("AttributeType",function(){this.objid()});c.AttributeType=v;var w=d.define("AttributeValue",function(){this.any()});c.AttributeValue=w},{"../..":34,"asn1.js":37}],37:[function(a,b,c){var d=c;d.bignum=a("bn.js"),d.define=a("./asn1/api").define,d.base=a("./asn1/base"),d.constants=a("./asn1/constants"),d.decoders=a("./asn1/decoders"),d.encoders=a("./asn1/encoders")},{"./asn1/api":38,"./asn1/base":40,"./asn1/constants":44,"./asn1/decoders":46,"./asn1/encoders":48,"bn.js":49}],38:[function(a,b,c){function d(a,b){this.name=a,this.body=b,this.decoders={},this.encoders={}}var e=a("../asn1"),f=a("util"),g=a("vm"),h=c;h.define=function(a,b){return new d(a,b)},d.prototype._createNamed=function(a){var b=g.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return f.inherits(b,a),b.prototype._initNamed=function(b){a.call(this,b)},new b(this)},d.prototype._getDecoder=function(a){return this.decoders.hasOwnProperty(a)||(this.decoders[a]=this._createNamed(e.decoders[a])),this.decoders[a]},d.prototype.decode=function(a,b,c){return this._getDecoder(b).decode(a,c)},d.prototype._getEncoder=function(a){return this.encoders.hasOwnProperty(a)||(this.encoders[a]=this._createNamed(e.encoders[a])),this.encoders[a]},d.prototype.encode=function(a,b,c){return this._getEncoder(b).encode(a,c)}},{"../asn1":37,util:146,vm:147}],39:[function(a,b,c){function d(a,b){return g.call(this,b),h.isBuffer(a)?(this.base=a,this.offset=0,void(this.length=a.length)):void this.error("Input not Buffer")}function e(a,b){if(Array.isArray(a))this.length=0,this.value=a.map(function(a){return a instanceof e||(a=new e(a,b)),this.length+=a.length,a},this);else if("number"==typeof a){if(!(a>=0&&255>=a))return b.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if("string"==typeof a)this.value=a,this.length=h.byteLength(a);else{if(!h.isBuffer(a))return b.error("Unsupported type: "+typeof a);this.value=a,this.length=a.length}}var f=(a("assert"),a("util")),g=a("../base").Reporter,h=a("buffer").Buffer;f.inherits(d,g),c.DecoderBuffer=d,d.prototype.save=function(){return{offset:this.offset}},d.prototype.restore=function(a){var b=new d(this.base);return b.offset=a.offset,b.length=this.offset,this.offset=a.offset,b},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(a){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(a||"DecoderBuffer overrun")},d.prototype.skip=function(a,b){if(!(this.offset+a<=this.length))return this.error(b||"DecoderBuffer overrun");var c=new d(this.base);return c._reporterState=this._reporterState,c.offset=this.offset,c.length=this.offset+a,this.offset+=a,c},d.prototype.raw=function(a){return this.base.slice(a?a.offset:this.offset,this.length)},c.EncoderBuffer=e,e.prototype.join=function(a,b){return a||(a=new h(this.length)),b||(b=0),0===this.length?a:(Array.isArray(this.value)?this.value.forEach(function(c){c.join(a,b),b+=c.length}):("number"==typeof this.value?a[b]=this.value:"string"==typeof this.value?a.write(this.value,b):h.isBuffer(this.value)&&this.value.copy(a,b),b+=this.length),a)}},{"../base":40,assert:2,buffer:4,util:146}],40:[function(a,b,c){var d=c;d.Reporter=a("./reporter").Reporter,d.DecoderBuffer=a("./buffer").DecoderBuffer,d.EncoderBuffer=a("./buffer").EncoderBuffer,d.Node=a("./node")},{"./buffer":39,"./node":41,"./reporter":42}],41:[function(a,b){function c(a,b){var c={};this._baseState=c,c.enc=a,c.parent=b||null,c.children=null,c.tag=null,c.args=null,c.reverseArgs=null,c.choice=null,c.optional=!1,c.any=!1,c.obj=!1,c.use=null,c.useDecoder=null,c.key=null,c["default"]=null,c.explicit=null,c.implicit=null,c.parent||(c.children=[],this._wrap())}var d=a("assert"),e=a("../base").Reporter,f=a("../base").EncoderBuffer,g=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],h=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(g),i=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];b.exports=c;var j=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];c.prototype.clone=function(){var a=this._baseState,b={};j.forEach(function(c){b[c]=a[c]});var c=new this.constructor(b.parent);return c._baseState=b,c},c.prototype._wrap=function(){var a=this._baseState;h.forEach(function(b){this[b]=function(){var c=new this.constructor(this);return a.children.push(c),c[b].apply(c,arguments)}},this)},c.prototype._init=function(a){var b=this._baseState;d(null===b.parent),a.call(this),b.children=b.children.filter(function(a){return a._baseState.parent===this},this),d.equal(b.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(a){var b=this._baseState,c=a.filter(function(a){return a instanceof this.constructor},this);a=a.filter(function(a){return!(a instanceof this.constructor)},this),0!==c.length&&(d(null===b.children),b.children=c,c.forEach(function(a){a._baseState.parent=this},this)),0!==a.length&&(d(null===b.args),b.args=a,b.reverseArgs=a.map(function(a){if("object"!=typeof a||a.constructor!==Object)return a;var b={};return Object.keys(a).forEach(function(c){c==(0|c)&&(c|=0);var d=a[c];b[d]=c}),b}))},i.forEach(function(a){c.prototype[a]=function(){var b=this._baseState;throw new Error(a+" not implemented for encoding: "+b.enc)}}),g.forEach(function(a){c.prototype[a]=function(){var b=this._baseState,c=Array.prototype.slice.call(arguments);return d(null===b.tag),b.tag=a,this._useArgs(c),this}}),c.prototype.use=function(a){var b=this._baseState;return d(null===b.use),b.use=a,this},c.prototype.optional=function(){var a=this._baseState;return a.optional=!0,this},c.prototype.def=function(a){var b=this._baseState;return d(null===b["default"]),b["default"]=a,b.optional=!0,this},c.prototype.explicit=function(a){var b=this._baseState;return d(null===b.explicit&&null===b.implicit),b.explicit=a,this},c.prototype.implicit=function(a){var b=this._baseState;return d(null===b.explicit&&null===b.implicit),b.implicit=a,this},c.prototype.obj=function(){var a=this._baseState,b=Array.prototype.slice.call(arguments);return a.obj=!0,0!==b.length&&this._useArgs(b),this},c.prototype.key=function k(k){var a=this._baseState;return d(null===a.key),a.key=k,this},c.prototype.any=function(){var a=this._baseState;return a.any=!0,this},c.prototype.choice=function(a){var b=this._baseState;return d(null===b.choice),b.choice=a,this._useArgs(Object.keys(a).map(function(b){return a[b]})),this},c.prototype._decode=function(a){var b=this._baseState;if(null===b.parent)return a.wrapResult(b.children[0]._decode(a));var c,d=b["default"],e=!0;if(null!==b.key&&(c=a.enterKey(b.key)),b.optional&&(e=this._peekTag(a,null!==b.explicit?b.explicit:null!==b.implicit?b.implicit:b.tag||0),a.isError(e)))return e;var f;if(b.obj&&e&&(f=a.enterObject()),e){if(null!==b.explicit){var g=this._decodeTag(a,b.explicit);if(a.isError(g))return g;a=g}if(null===b.use&&null===b.choice){if(b.any)var h=a.save();var i=this._decodeTag(a,null!==b.implicit?b.implicit:b.tag,b.any);if(a.isError(i))return i;b.any?d=a.raw(h):a=i}if(d=b.any?d:null===b.choice?this._decodeGeneric(b.tag,a):this._decodeChoice(a),a.isError(d))return d;if(!b.any&&null===b.choice&&null!==b.children){var j=b.children.some(function(b){b._decode(a)});if(j)return err}}return b.obj&&e&&(d=a.leaveObject(f)),null===b.key||null===d&&e!==!0||a.leaveKey(c,b.key,d),d},c.prototype._decodeGeneric=function(a,b){var c=this._baseState;return"seq"===a||"set"===a?null:"seqof"===a||"setof"===a?this._decodeList(b,a,c.args[0]):"octstr"===a||"bitstr"===a||"ia5str"===a?this._decodeStr(b,a):"objid"===a&&c.args?this._decodeObjid(b,c.args[0],c.args[1]):"objid"===a?this._decodeObjid(b,null,null):"gentime"===a||"utctime"===a?this._decodeTime(b,a):"null_"===a?this._decodeNull(b):"bool"===a?this._decodeBool(b):"int"===a||"enum"===a?this._decodeInt(b,c.args&&c.args[0]):null!==c.use?this._getUse(c.use,b._reporterState.obj)._decode(b):b.error("unknown tag: "+a)},c.prototype._getUse=function(a,b){var c=this._baseState;return c.useDecoder=this._use(a,b),d(null===c.useDecoder._baseState.parent),c.useDecoder=c.useDecoder._baseState.children[0],c.implicit!==c.useDecoder._baseState.implicit&&(c.useDecoder=c.useDecoder.clone(),c.useDecoder._baseState.implicit=c.implicit),c.useDecoder},c.prototype._decodeChoice=function(a){var b=this._baseState,c=null,d=!1;return Object.keys(b.choice).some(function(e){var f=a.save(),g=b.choice[e];try{var h=g._decode(a);if(a.isError(h))return!1;c={type:e,value:h},d=!0}catch(i){return a.restore(f),!1}return!0},this),d?c:a.error("Choice not matched")},c.prototype._createEncoderBuffer=function(a){return new f(a,this.reporter)},c.prototype._encode=function(a,b,c){var d=this._baseState;if(null===d["default"]||d["default"]!==a){var e=this._encodeValue(a,b,c);if(void 0!==e&&!this._skipDefault(e,b,c))return e}},c.prototype._encodeValue=function(a,b,c){var d=this._baseState;if(null===d.parent)return d.children[0]._encode(a,b||new e);var f=null;if(this.reporter=b,d.optional&&void 0===a){if(null===d["default"])return;a=d["default"]}var g=null,h=!1;if(d.any)f=this._createEncoderBuffer(a);else if(d.choice)f=this._encodeChoice(a,b);else if(d.children)g=d.children.map(function(c){if("null_"===c._baseState.tag)return c._encode(null,b,a);if(null===c._baseState.key)return b.error("Child should have a key");var d=b.enterKey(c._baseState.key);if("object"!=typeof a)return b.error("Child expected, but input is not object");var e=c._encode(a[c._baseState.key],b,a);return b.leaveKey(d),e},this).filter(function(a){return a}),g=this._createEncoderBuffer(g);else if("seqof"===d.tag||"setof"===d.tag){if(!d.args||1!==d.args.length)return b.error("Too many args for : "+d.tag);if(!Array.isArray(a))return b.error("seqof/setof, but data is not Array");var i=this.clone();i._baseState.implicit=null,g=this._createEncoderBuffer(a.map(function(c){var d=this._baseState;return this._getUse(d.args[0],a)._encode(c,b)},i))}else null!==d.use?f=this._getUse(d.use,c)._encode(a,b):(g=this._encodePrimitive(d.tag,a),h=!0);var f;if(!d.any&&null===d.choice){var j=null!==d.implicit?d.implicit:d.tag,k=null===d.implicit?"universal":"context";null===j?null===d.use&&b.error("Tag could be ommited only for .use()"):null===d.use&&(f=this._encodeComposite(j,h,k,g))}return null!==d.explicit&&(f=this._encodeComposite(d.explicit,!1,"context",f)),f},c.prototype._encodeChoice=function(a,b){var c=this._baseState,e=c.choice[a.type];return e||d(!1,a.type+" not found in "+JSON.stringify(Object.keys(c.choice))),e._encode(a.value,b)},c.prototype._encodePrimitive=function(a,b){var c=this._baseState;if("octstr"===a||"bitstr"===a||"ia5str"===a)return this._encodeStr(b,a);if("objid"===a&&c.args)return this._encodeObjid(b,c.reverseArgs[0],c.args[1]);if("objid"===a)return this._encodeObjid(b,null,null);if("gentime"===a||"utctime"===a)return this._encodeTime(b,a);if("null_"===a)return this._encodeNull();if("int"===a||"enum"===a)return this._encodeInt(b,c.args&&c.reverseArgs[0]);if("bool"===a)return this._encodeBool(b);throw new Error("Unsupported tag: "+a)}},{"../base":40,assert:2}],42:[function(a,b,c){function d(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}function e(a,b){this.path=a,this.rethrow(b)}var f=a("util");c.Reporter=d,d.prototype.isError=function(a){return a instanceof e},d.prototype.enterKey=function(a){return this._reporterState.path.push(a)},d.prototype.leaveKey=function(a,b,c){var d=this._reporterState;d.path=d.path.slice(0,a-1),null!==d.obj&&(d.obj[b]=c)},d.prototype.enterObject=function(){var a=this._reporterState,b=a.obj;return a.obj={},b},d.prototype.leaveObject=function(a){var b=this._reporterState,c=b.obj;return b.obj=a,c},d.prototype.error=function(a){var b,c=this._reporterState,d=a instanceof e;if(b=d?a:new e(c.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),a.message||a,a.stack),!c.options.partial)throw b;return d||c.errors.push(b),b},d.prototype.wrapResult=function(a){var b=this._reporterState;return b.options.partial?{result:this.isError(a)?null:a,errors:b.errors}:a},f.inherits(e,Error),e.prototype.rethrow=function(a){return this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,e),this}},{util:146}],43:[function(a,b,c){var d=a("../constants");c.tagClass={0:"universal",1:"application",2:"context",3:"private"},c.tagClassByName=d._reverse(c.tagClass),c.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},c.tagByName=d._reverse(c.tag)},{"../constants":44}],44:[function(a,b,c){var d=c;d._reverse=function(a){var b={};return Object.keys(a).forEach(function(c){(0|c)==c&&(c=0|c);var d=a[c];b[d]=c}),b},d.der=a("./der")},{"./der":43}],45:[function(a,b){function c(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new d,this.tree._init(a.body)}function d(a){i.Node.call(this,"der",a)
}function e(a,b){var c=a.readUInt8(b);if(a.isError(c))return c;var d=k.tagClass[c>>6],e=0===(32&c);if(31===(31&c)){var f=c;for(c=0;128===(128&f);){if(f=a.readUInt8(b),a.isError(f))return f;c<<=7,c|=127&f}}else c&=31;var g=k.tag[c];return{cls:d,primitive:e,tag:c,tagStr:g}}function f(a,b,c){var d=a.readUInt8(c);if(a.isError(d))return d;if(!b&&128===d)return null;if(0===(128&d))return d;var e=127&d;if(e>=4)return a.error("length octect is too long");d=0;for(var f=0;e>f;f++){d<<=8;var g=a.readUInt8(c);if(a.isError(g))return g;d|=g}return d}var g=a("util"),h=a("../../asn1"),i=h.base,j=h.bignum,k=h.constants.der;b.exports=c,c.prototype.decode=function(a,b){return a instanceof i.DecoderBuffer||(a=new i.DecoderBuffer(a,b)),this.tree._decode(a,b)},g.inherits(d,i.Node),d.prototype._peekTag=function(a,b){if(a.isEmpty())return!1;var c=a.save(),d=e(a,'Failed to peek tag: "'+b+'"');return a.isError(d)?d:(a.restore(c),d.tag===b||d.tagStr===b)},d.prototype._decodeTag=function(a,b,c){var d=e(a,'Failed to decode tag of "'+b+'"');if(a.isError(d))return d;var g=f(a,d.primitive,'Failed to get length of "'+b+'"');if(a.isError(g))return g;if(!c&&d.tag!==b&&d.tagStr!==b&&d.tagStr+"of"!==b)return a.error('Failed to match tag: "'+b+'"');if(d.primitive||null!==g)return a.skip(g,'Failed to match body of: "'+b+'"');var h=a.start(),i=this._skipUntilEnd(a,'Failed to skip indefinite length body: "'+this.tag+'"');return a.isError(i)?i:a.cut(h)},d.prototype._skipUntilEnd=function(a,b){for(;;){var c=e(a,b);if(a.isError(c))return c;var d=f(a,c.primitive,b);if(a.isError(d))return d;var g;if(g=c.primitive||null!==d?a.skip(d):this._skipUntilEnd(a,b),a.isError(g))return g;if("end"===c.tagStr)break}},d.prototype._decodeList=function(a,b,c){for(var d=[];!a.isEmpty();){var e=this._peekTag(a,"end");if(a.isError(e))return e;var f=c.decode(a,"der");if(a.isError(f)&&e)break;d.push(f)}return d},d.prototype._decodeStr=function(a,b){if("octstr"===b)return a.raw();if("bitstr"===b){var c=a.readUInt8();return a.isError(c)?c:{unused:c,data:a.raw()}}return"ia5str"===b?a.raw().toString():this.error("Decoding of string type: "+b+" unsupported")},d.prototype._decodeObjid=function(a,b,c){for(var d=[],e=0;!a.isEmpty();){var f=a.readUInt8();e<<=7,e|=127&f,0===(128&f)&&(d.push(e),e=0)}128&f&&d.push(e);var g=d[0]/40|0,h=d[0]%40;return result=c?d:[g,h].concat(d.slice(1)),b&&(result=b[result.join(" ")]),result},d.prototype._decodeTime=function(a,b){var c=a.raw().toString();if("gentime"===b)var d=0|c.slice(0,4),e=0|c.slice(4,6),f=0|c.slice(6,8),g=0|c.slice(8,10),h=0|c.slice(10,12),i=0|c.slice(12,14);else{if("utctime"!==b)return this.error("Decoding "+b+" time is not supported yet");var d=0|c.slice(0,2),e=0|c.slice(2,4),f=0|c.slice(4,6),g=0|c.slice(6,8),h=0|c.slice(8,10),i=0|c.slice(10,12);d=70>d?2e3+d:1900+d}return Date.UTC(d,e-1,f,g,h,i,0)},d.prototype._decodeNull=function(){return null},d.prototype._decodeBool=function(a){var b=a.readUInt8();return a.isError(b)?b:0!==b},d.prototype._decodeInt=function(a,b){var c=0,d=a.raw();if(d.length>3)return new j(d);for(;!a.isEmpty();){c<<=8;var e=a.readUInt8();if(a.isError(e))return e;c|=e}return b&&(c=b[c]||c),c},d.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getDecoder("der").tree}},{"../../asn1":37,util:146}],46:[function(a,b,c){var d=c;d.der=a("./der")},{"./der":45}],47:[function(a,b){function c(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new d,this.tree._init(a.body)}function d(a){j.Node.call(this,"der",a)}function e(a){return 10>=a?"0"+a:a}function f(a,b,c,d){var e;if("seqof"===a?a="seq":"setof"===a&&(a="set"),l.tagByName.hasOwnProperty(a))e=l.tagByName[a];else{if("number"!=typeof a||(0|a)!==a)return d.error("Unknown tag: "+a);e=a}return e>=31?d.error("Multi-octet tag encoding unsupported"):(b||(e|=32),e|=l.tagClassByName[c||"universal"]<<6)}var g=a("util"),h=a("buffer").Buffer,i=a("../../asn1"),j=i.base,k=i.bignum,l=i.constants.der;b.exports=c,c.prototype.encode=function(a,b){return this.tree._encode(a,b).join()},g.inherits(d,j.Node),d.prototype._encodeComposite=function(a,b,c,d){var e=f(a,b,c,this.reporter);if(d.length<128){var g=new h(2);return g[0]=e,g[1]=d.length,this._createEncoderBuffer([g,d])}for(var i=1,j=d.length;j>=256;j>>=8)i++;var g=new h(2+i);g[0]=e,g[1]=128|i;for(var j=1+i,k=d.length;k>0;j--,k>>=8)g[j]=255&k;return this._createEncoderBuffer([g,d])},d.prototype._encodeStr=function(a,b){return"octstr"===b?this._createEncoderBuffer(a):"bitstr"===b?this._createEncoderBuffer([0|a.unused,a.data]):"ia5str"===b?this._createEncoderBuffer(a):this.reporter.error("Encoding of string type: "+b+" unsupported")},d.prototype._encodeObjid=function(a,b,c){if("string"==typeof a){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(a))return this.reporter.error("objid not found in values map");a=b[a].split(/\s+/g);for(var d=0;d<a.length;d++)a[d]|=0}else Array.isArray(a)&&(a=a.slice());if(!Array.isArray(a))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(a));if(!c){if(a[1]>=40)return this.reporter.error("Second objid identifier OOB");a.splice(0,2,40*a[0]+a[1])}for(var e=0,d=0;d<a.length;d++){var f=a[d];for(e++;f>=128;f>>=7)e++}for(var g=new h(e),i=g.length-1,d=a.length-1;d>=0;d--){var f=a[d];for(g[i--]=127&f;(f>>=7)>0;)g[i--]=128|127&f}return this._createEncoderBuffer(g)},d.prototype._encodeTime=function(a,b){var c,d=new Date(a);return"gentime"===b?c=[d.getFullYear(),e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):"utctime"===b?c=[d.getFullYear()%100,e(d.getUTCMonth()+1),e(d.getUTCDate()),e(d.getUTCHours()),e(d.getUTCMinutes()),e(d.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(c,"octstr")},d.prototype._encodeNull=function(){return this._createEncoderBuffer("")},d.prototype._encodeInt=function(a,b){if("string"==typeof a){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(a))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(a));a=b[a]}if(null!==k&&a instanceof k){var c=a.toArray();a.sign===!1&&128&c[0]&&c.unshift(0),a=new h(c)}if(h.isBuffer(a)){var d=a.length;0===a.length&&d++;var e=new h(d);return a.copy(e),0===a.length&&(e[0]=0),this._createEncoderBuffer(e)}if(128>a)return this._createEncoderBuffer(a);if(256>a)return this._createEncoderBuffer([0,a]);for(var d=1,f=a;f>=256;f>>=8)d++;for(var e=new Array(d),f=e.length-1;f>=0;f--)e[f]=255&a,a>>=8;return 128&e[0]&&e.unshift(0),this._createEncoderBuffer(new h(e))},d.prototype._encodeBool=function(a){return this._createEncoderBuffer(a?255:0)},d.prototype._use=function(a,b){return"function"==typeof a&&(a=a(b)),a._getEncoder("der").tree},d.prototype._skipDefault=function(a,b,c){var d,e=this._baseState;if(null===e["default"])return!1;var f=a.join();if(void 0===e.defaultBuffer&&(e.defaultBuffer=this._encodeValue(e["default"],b,c).join()),f.length!==e.defaultBuffer.length)return!1;for(d=0;d<f.length;d++)if(f[d]!==e.defaultBuffer[d])return!1;return!0}},{"../../asn1":37,buffer:4,util:146}],48:[function(a,b,c){var d=c;d.der=a("./der")},{"./der":47}],49:[function(a,b){function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,void(null!==a&&this._init(a||0,b||10)))}function f(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function h(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function i(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function j(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function l(a){k.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new e(1)).div(this.m).neg().mod(this.r)}"object"==typeof b&&(b.exports=e),e.BN=e,e.wordSize=26,e.prototype._init=function(a,b){if("number"==typeof a)return 0>a&&(this.sign=!0,a=-a),void(67108864>a?(this.words=[67108863&a],this.length=1):(this.words=[67108863&a,a/67108864&67108863],this.length=2));if("object"==typeof a){c("number"==typeof a.length),this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;for(var e=0,d=a.length-1,f=0;d>=0;d-=3){var g=a[d]|a[d-1]<<8|a[d-2]<<16;this.words[f]|=g<<e&67108863,this.words[f+1]=g>>>26-e&67108863,e+=24,e>=26&&(e-=26,f++)}return this.strip()}"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&36>=b),a=a.toString().replace(/\s+/g,"");var h=0;"-"===a[0]&&h++,16===b?this._parseHex(a,h):this._parseBase(a,b,h),"-"===a[0]&&(this.sign=!0),this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var f=parseInt(a.slice(c,c+6),16);this.words[e]|=f<<d&67108863,this.words[e+1]|=f>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var f=parseInt(a.slice(b,c+6),16);this.words[e]|=f<<d&67108863,this.words[e+1]|=f>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,d){this.words=[0],this.length=1;for(var f=0,g=1,h=0,i=null,j=d;j<a.length;j++){var k,l=a[j];k=10===b||"9">=l?0|l:l>="a"?l.charCodeAt(0)-97+10:l.charCodeAt(0)-65+10,f*=b,f+=k,g*=b,h++,g>1048575&&(c(67108863>=g),i||(i=new e(g)),this.mul(i).copy(this),this.iadd(new e(f)),f=0,g=1,h=0)}0!==h&&(this.mul(new e(g)).copy(this),this.iadd(new e(f)))},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],n=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?m[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&36>=a){var j=n[a],k=o[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var p=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?m[j-p.length]+p+d:p+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(){this.strip();var a=new Array(this.byteLength());a[0]=0;for(var b=this.clone(),c=0;0!==b.cmpn(0);c++){var d=b.andln(255);b.ishrn(8),a[a.length-c-1]=d}return a},e.prototype._countBits=function(a){return a>=33554432?26:a>=16777216?25:a>=8388608?24:a>=4194304?23:a>=2097152?22:a>=1048576?21:a>=524288?20:a>=262144?19:a>=131072?18:a>=65536?17:a>=32768?16:a>=16384?15:a>=8192?14:a>=4096?13:a>=2048?12:a>=1024?11:a>=512?10:a>=256?9:a>=128?8:a>=64?7:a>=32?6:a>=16?5:a>=8?4:a>=4?3:a>=2?2:a>=1?1:0},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;if(c>0)var d=this,e=a;else var d=a,e=this;for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]-f;0>b?(b+=67108864,f=1):f=0,this.words[g]=b}for(;0!==f&&g<d.length;g++){var b=d.words[g]-f;0>b?(b+=67108864,f=1):f=0,this.words[g]=b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);g>=h;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);h>=i;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);g>=h;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.ishln=function(a){c("number"==typeof a&&a>=0);{var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;this.clone()}if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;d>g;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishrn=function(a,b,d){c("number"==typeof a&&a>=0),b=b?(b-b%26)/26:0;var e=a%26,f=Math.min((a-e)/26,this.length),g=67108863^67108863>>>e<<e,h=d;if(b-=f,b=Math.max(0,b),h){for(var i=0;f>i;i++)h.words[i]=this.words[i];h.length=f}if(0===f);else if(this.length>f){this.length-=f;for(var i=0;i<this.length;i++)this.words[i]=this.words[i+f]}else this.words[0]=0,this.length=1;for(var j=0,i=this.length-1;i>=0&&(0!==j||i>=b);i--){var k=this.words[i];this.words[i]=j<<26-e|k>>>e,j=k&g}return h&&0!==j&&(h.words[h.length++]=j),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),d?{hi:this,lo:h}:this},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){if(c("number"==typeof a),0>a)return this.isubn(-a);if(this.sign)return 1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this);this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),0>a)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._wordDiv=function(a,b){for(var c=this.length-a.length,d=this.clone(),f=a,g="mod"!==b&&new e(0);d.length>f.length;){var h=67108864*d.words[d.length-1]+d.words[d.length-2],i=h/f.words[f.length-1],j=i/67108864|0,k=67108863&i;i=new e(null),i.words=[k,j],i.length=2;var c=26*(d.length-f.length-1);if(g){var l=i.shln(c);d.sign?g.isub(l):g.iadd(l)}i=i.mul(f).ishln(c),d.sign?d.iadd(i):d.isub(i)}for(;d.ucmp(f)>=0;){var h=d.words[d.length-1],i=new e(h/f.words[f.length-1]|0),c=26*(d.length-f.length);if(g){var l=i.shln(c);d.sign?g.isub(l):g.iadd(l)}i=i.mul(f).ishln(c),d.sign?d.iadd(i):d.isub(i)}return d.sign&&(g&&g.isubn(1),d.iadd(f)),{div:g?g:null,mod:d}},e.prototype.divmod=function(a,b){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var d,f,g=this.neg().divmod(a,b);return"mod"!==b&&(d=g.div.neg()),"div"!==b&&(f=0===g.mod.cmpn(0)?g.mod:a.sub(g.mod)),{div:d,mod:f}}if(!this.sign&&a.sign){var d,g=this.divmod(a.neg(),b);return"mod"!==b&&(d=g.div.neg()),{div:d,mod:g.mod}}return this.sign&&a.sign?this.neg().divmod(a.neg(),b):a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div").div},e.prototype.mod=function(a){return this.divmod(a,"mod").mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.shrn(1),e=a.andln(1),f=c.cmp(d);return 0>f||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(67108863>=a);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(67108863>=a);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype._egcd=function(a,b){c(!b.sign),c(0!==b.cmpn(0));var d=this,f=b.clone();d=d.sign?d.mod(b):d.clone();for(var g=new e(0);f.isEven();)f.ishrn(1);for(var h=f.clone();d.cmpn(1)>0&&f.cmpn(1)>0;){for(;d.isEven();)d.ishrn(1),a.isEven()?a.ishrn(1):a.iadd(h).ishrn(1);for(;f.isEven();)f.ishrn(1),g.isEven()?g.ishrn(1):g.iadd(h).ishrn(1);d.cmp(f)>=0?(d.isub(f),a.isub(g)):(f.isub(d),g.isub(a))}return 0===d.cmpn(1)?a:g},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);for(;b.isEven();)b.ishrn(1);do{for(;c.isEven();)c.ishrn(1);if(b.cmp(c)<0){var e=b;b=c,c=e}b.isub(b.div(c).mul(c))}while(0!==b.cmpn(0)&&0!==c.cmpn(0));return 0===b.cmpn(0)?c.ishln(d):b.ishln(d)},e.prototype.invm=function(a){return this._egcd(new e(1),a).mod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;d+1>f;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=0>a;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:a>d?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){e>d?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new k(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var p={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},f.prototype.ireduce=function(a){var b,c=a;do{var d=c.ishrn(this.n,0,this.tmp);c=this.imulK(d.hi),c=c.iadd(d.lo),b=c.bitLength()}while(b>this.n);var e=b<this.n?-1:c.cmp(this.p);return 0===e?(c.words[0]=0,c.length=1):e>0?c.isub(this.p):c.strip(),c},f.prototype.imulK=function(a){return a.imul(this.k)},d(g,f),g.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b=a.length-3;b>=0;b--){var c=a.words[b],d=64*c,e=977*c;d+=e/67108864|0;var f=d/67108864|0;d&=67108863,e&=67108863,a.words[b+2]+=f,a.words[b+1]+=d,a.words[b]=e}var c=a.words[a.length-2];return c>=67108864&&(a.words[a.length-1]+=c>>>26,a.words[a.length-2]=67108863&c),0===a.words[a.length-1]&&a.length--,0===a.words[a.length-1]&&a.length--,a},d(h,f),d(i,f),d(j,f),j.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function q(a){if(p[a])return p[a];var q;if("k256"===a)q=new g;else if("p224"===a)q=new h;else if("p192"===a)q=new i;else{if("p25519"!==a)throw new Error("Unknown prime "+a);q=new j}return p[a]=q,q},k.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},k.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},k.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.mod(this.m)._forceRed(this)},k.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},k.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},k.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},k.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},k.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},k.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.shln(b))},k.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},k.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},k.prototype.isqr=function(a){return this.imul(a,a)},k.prototype.sqr=function(a){return this.mul(a,a)},k.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).ishrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.ishrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).ishrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).ishrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(o>q);var r=this.pow(m,new e(1).ishln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},k.prototype.invm=function(a){var b=a._egcd(new e(1),this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},k.prototype.pow=function(a,b){for(var c=[],d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.ishrn(1);for(var e=a,f=0;f<c.length&&0===c[f];f++,e=this.sqr(e));if(++f<c.length)for(var d=this.sqr(e);f<c.length;f++,d=this.sqr(d))0!==c[f]&&(e=this.mul(e,d));return e},k.prototype.convertTo=function(a){return a.clone()},k.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new l(a)},d(l,k),l.prototype.convertTo=function(a){return this.imod(a.shln(this.shift))},l.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},l.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).ishrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},l.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).ishrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},l.prototype.invm=function(a){var b=this.imod(a.invm(this.m).mul(this.r2));return b._forceRed(this)}},{}],50:[function(a,b,c){var d=c;d.version=a("../package.json").version,d.utils=a("./elliptic/utils"),d.rand=a("brorand"),d.hmacDRBG=a("./elliptic/hmac-drbg"),d.curve=a("./elliptic/curve"),d.curves=a("./elliptic/curves"),d.ec=a("./elliptic/ec")},{"../package.json":69,"./elliptic/curve":53,"./elliptic/curves":56,"./elliptic/ec":57,"./elliptic/hmac-drbg":60,"./elliptic/utils":61,brorand:62}],51:[function(a,b){function c(a,b){this.type=a,this.p=new f(b.p,16),this.red=b.prime?f.red(b.prime):f.mont(this.p),this.zero=new f(0).toRed(this.red),this.one=new f(1).toRed(this.red),this.two=new f(2).toRed(this.red),this.n=b.n&&new f(b.n,16),this.g=b.g&&this.pointFromJSON(b.g,b.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function d(a,b){this.curve=a,this.type=b,this.precomputed=null}var e=a("assert"),f=a("bn.js"),g=a("../../elliptic"),h=g.utils.getNAF,i=g.utils.getJSF;b.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(a,b){var c=a._getDoubles(),d=h(b,1),e=(1<<c.step+1)-(c.step%2===0?2:1);e/=3;for(var f=[],g=0;g<d.length;g+=c.step){for(var i=0,b=g+c.step-1;b>=g;b--)i=(i<<1)+d[b];f.push(i)}for(var j=this.jpoint(null,null,null),k=this.jpoint(null,null,null),l=e;l>0;l--){for(var g=0;g<f.length;g++){var i=f[g];i===l?k=k.mixedAdd(c.points[g]):i===-l&&(k=k.mixedAdd(c.points[g].neg()))}j=j.add(k)}return j.toP()},c.prototype._wnafMul=function(a,b){var c=4,d=a._getNAFPoints(c);c=d.wnd;for(var f=d.points,g=h(b,c),i=this.jpoint(null,null,null),j=g.length-1;j>=0;j--){for(var b=0;j>=0&&0===g[j];j--)b++;if(j>=0&&b++,i=i.dblp(b),0>j)break;var k=g[j];e(0!==k),i="affine"===a.type?i.mixedAdd(k>0?f[k-1>>1]:f[-k-1>>1].neg()):i.add(k>0?f[k-1>>1]:f[-k-1>>1].neg())}return"affine"===a.type?i.toP():i},c.prototype._wnafMulAdd=function(a,b,c,d){for(var e=this._wnafT1,f=this._wnafT2,g=this._wnafT3,j=0,k=0;d>k;k++){var l=b[k],m=l._getNAFPoints(a);e[k]=m.wnd,f[k]=m.points}for(var k=d-1;k>=1;k-=2){var n=k-1,o=k;if(1===e[n]&&1===e[o]){var p=[b[n],null,null,b[o]];0===b[n].y.cmp(b[o].y)?(p[1]=b[n].add(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg())):0===b[n].y.cmp(b[o].y.redNeg())?(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].add(b[o].neg())):(p[1]=b[n].toJ().mixedAdd(b[o]),p[2]=b[n].toJ().mixedAdd(b[o].neg()));var q=[-3,-1,-5,-7,0,7,5,1,3],r=i(c[n],c[o]);
j=Math.max(r[0].length,j),g[n]=new Array(j),g[o]=new Array(j);for(var s=0;j>s;s++){var t=0|r[0][s],u=0|r[1][s];g[n][s]=q[3*(t+1)+(u+1)],g[o][s]=0,f[n]=p}}else g[n]=h(c[n],e[n]),g[o]=h(c[o],e[o]),j=Math.max(g[n].length,j),j=Math.max(g[o].length,j)}for(var v=this.jpoint(null,null,null),w=this._wnafT4,k=j;k>=0;k--){for(var x=0;k>=0;){for(var y=!0,s=0;d>s;s++)w[s]=0|g[s][k],0!==w[s]&&(y=!1);if(!y)break;x++,k--}if(k>=0&&x++,v=v.dblp(x),0>k)break;for(var s=0;d>s;s++){var l,z=w[s];0!==z&&(z>0?l=f[s][z-1>>1]:0>z&&(l=f[s][-z-1>>1].neg()),v="affine"===l.type?v.mixedAdd(l):v.add(l))}}for(var k=0;d>k;k++)f[k]=null;return v.toP()},c.BasePoint=d,d.prototype.validate=function(){return this.curve.validate(this)},d.prototype.precompute=function(a){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,a),b.beta=this._getBeta(),this.precomputed=b,this},d.prototype._getDoubles=function(a,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var c=[this],d=this,e=0;b>e;e+=a){for(var f=0;a>f;f++)d=d.dbl();c.push(d)}return{step:a,points:c}},d.prototype._getNAFPoints=function(a){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],c=(1<<a)-1,d=1===c?null:this.dbl(),e=1;c>e;e++)b[e]=b[e-1].add(d);return{wnd:a,points:b}},d.prototype._getBeta=function(){return null},d.prototype.dblp=function(a){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}},{"../../elliptic":50,assert:2,"bn.js":49}],52:[function(a,b){function c(a){this.twisted=1!=a.a,this.mOneA=this.twisted&&-1==a.a,this.extended=this.mOneA,j.call(this,"mont",a),this.a=new h(a.a,16).mod(this.red.m).toRed(this.red),this.c=new h(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new h(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),e(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==a.c}function d(a,b,c,d,e){j.BasePoint.call(this,a,"projective"),null===b&&null===c&&null===d?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new h(b,16),this.y=new h(c,16),this.z=d?new h(d,16):this.curve.one,this.t=e&&new h(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}{var e=a("assert"),f=a("../curve"),g=a("../../elliptic"),h=a("bn.js"),i=a("inherits"),j=f.base;g.utils.getNAF}i(c,j),b.exports=c,c.prototype._mulA=function(a){return this.mOneA?a.redNeg():this.a.redMul(a)},c.prototype._mulC=function(a){return this.oneC?a:this.c.redMul(a)},c.prototype.point=function(a,b,c,e){return new d(this,a,b,c,e)},c.prototype.jpoint=function(a,b,c,d){return this.point(a,b,c,d)},c.prototype.pointFromJSON=function(a){return d.fromJSON(this,a)},c.prototype.pointFromX=function(a,b){b=new h(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr(),d=this.c2.redSub(this.a.redMul(c)),e=this.one.redSub(this.c2.redMul(this.d).redMul(c)),g=d.redMul(e.redInvm()).redSqrt(),i=g.fromRed().isOdd();return(a&&!i||!a&&i)&&(g=g.redNeg()),this.point(b,g,f.one)},c.prototype.validate=function(a){if(a.isInfinity())return!0;a.normalize();var b=a.x.redSqr(),c=a.y.redSqr(),d=b.redMul(this.a).redAdd(c),e=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(c)));return 0===d.cmp(e)},i(d,j.BasePoint),d.fromJSON=function(a,b){return new d(a,b[0],b[1],b[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),f=d.redAdd(b),g=f.redSub(c),h=d.redSub(b),i=e.redMul(g),j=f.redMul(h),k=e.redMul(h),l=g.redMul(f);return this.curve.point(i,j,l,k)},d.prototype._projDbl=function(){var a=this.x.redAdd(this.y).redSqr(),b=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var d=this.curve._mulA(b),e=d.redAdd(c);if(this.zOne)var f=a.redSub(b).redSub(c).redMul(e.redSub(this.curve.two)),g=e.redMul(d.redSub(c)),h=e.redSqr().redSub(e).redSub(e);else var i=this.z.redSqr(),j=e.redSub(i).redISub(i),f=a.redSub(b).redISub(c).redMul(j),g=e.redMul(d.redSub(c)),h=e.redMul(j)}else var d=b.redAdd(c),i=this.curve._mulC(redMul(this.z)).redSqr(),j=d.redSub(i).redSub(i),f=this.curve._mulC(a.redISub(d)).redMul(j),g=this.curve._mulC(d).redMul(b.redISub(c)),h=d.redMul(j);return this.curve.point(f,g,h)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(a){var b=this.y.redSub(this.x).redMul(a.y.redSub(a.x)),c=this.y.redAdd(this.x).redMul(a.y.redAdd(a.x)),d=this.t.redMul(this.curve.dd).redMul(a.t),e=this.z.redMul(a.z.redAdd(a.z)),f=c.redSub(b),g=e.redSub(d),h=e.redAdd(d),i=c.redAdd(b),j=f.redMul(g),k=h.redMul(i),l=f.redMul(i),m=g.redMul(h);return this.curve.point(j,k,m,l)},d.prototype._projAdd=function(a){var b=this.z.redMul(a.z),c=b.redSqr(),d=this.x.redMul(a.x),e=this.y.redMul(a.y),f=this.curve.d.redMul(d).redMul(e),g=c.redSub(f),h=c.redAdd(f),i=this.x.redAdd(this.y).redMul(a.x.redAdd(a.y)).redISub(d).redISub(e),j=b.redMul(g).redMul(i);if(this.curve.twisted)var k=b.redMul(h).redMul(e.redSub(this.curve._mulA(d))),l=g.redMul(h);else var k=b.redMul(h).redMul(e.redSub(d)),l=this.curve._mulC(g).redMul(h);return this.curve.point(j,k,l)},d.prototype.add=function(a){return this.isInfinity()?a:a.isInfinity()?this:this.curve.extended?this._extAdd(a):this._projAdd(a)},d.prototype.mul=function(a){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,a):this.curve._wnafMul(this,a)},d.prototype.mulAdd=function(a,b,c){return this.curve._wnafMulAdd(1,[this,b],[a,c],2)},d.prototype.normalize=function(){if(this.zOne)return this;var a=this.z.redInvm();return this.x=this.x.redMul(a),this.y=this.y.redMul(a),this.t&&(this.t=this.t.redMul(a)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../../elliptic":50,"../curve":53,assert:2,"bn.js":49,inherits:121}],53:[function(a,b,c){var d=c;d.base=a("./base"),d.short=a("./short"),d.mont=a("./mont"),d.edwards=a("./edwards")},{"./base":51,"./edwards":52,"./mont":54,"./short":55}],54:[function(a,b){function c(a){i.call(this,"mont",a),this.a=new g(a.a,16).toRed(this.red),this.b=new g(a.b,16).toRed(this.red),this.i4=new g(4).toRed(this.red).redInvm(),this.two=new g(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function d(a,b,c){i.BasePoint.call(this,a,"projective"),null===b&&null===c?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new g(b,16),this.z=new g(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}{var e=(a("assert"),a("../curve")),f=a("../../elliptic"),g=a("bn.js"),h=a("inherits"),i=e.base;f.utils.getNAF}h(c,i),b.exports=c,c.prototype.point=function(a,b){return new d(this,a,b)},c.prototype.pointFromJSON=function(a){return d.fromJSON(this,a)},c.prototype.validate=function(a){var b=a.normalize().x,c=b.redSqr(),d=c.redMul(b).redAdd(c.redMul(this.a)).redAdd(b),e=d.redSqrt();return 0===e.redSqr().cmp(d)},h(d,i.BasePoint),d.prototype.precompute=function(){},d.fromJSON=function(a,b){return new d(a,b[0],b[1]||a.one)},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},d.prototype.dbl=function(){var a=this.x.redAdd(this.z),b=a.redSqr(),c=this.x.redSub(this.z),d=c.redSqr(),e=b.redSub(d),f=b.redMul(d),g=e.redMul(d.redAdd(this.curve.a24.redMul(e)));return this.curve.point(f,g)},d.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.diffAdd=function(a,b){var c=this.x.redAdd(this.z),d=this.x.redSub(this.z),e=a.x.redAdd(a.z),f=a.x.redSub(a.z),g=f.redMul(c),h=e.redMul(d),i=b.z.redMul(g.redAdd(h).redSqr()),j=b.x.redMul(g.redISub(h).redSqr());return this.curve.point(i,j)},d.prototype.mul=function(a){for(var b=a.clone(),c=this,d=this.curve.point(null,null),e=this,f=[];0!==b.cmpn(0);b.ishrn(1))f.push(b.andln(1));for(var g=f.length-1;g>=0;g--)0===f[g]?(c=c.diffAdd(d,e),d=d.dbl()):(d=c.diffAdd(d,e),c=c.dbl());return d},d.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},d.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":50,"../curve":53,assert:2,"bn.js":49,inherits:121}],55:[function(a,b){function c(a){k.call(this,"short",a),this.a=new i(a.a,16).toRed(this.red),this.b=new i(a.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(a),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(a,b,c,d){k.BasePoint.call(this,a,"affine"),null===b&&null===c?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(b,16),this.y=new i(c,16),d&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function e(a,b,c,d){k.BasePoint.call(this,a,"jacobian"),null===b&&null===c&&null===d?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(b,16),this.y=new i(c,16),this.z=new i(d,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}{var f=a("assert"),g=a("../curve"),h=a("../../elliptic"),i=a("bn.js"),j=a("inherits"),k=g.base;h.utils.getNAF}j(c,k),b.exports=c,c.prototype._getEndomorphism=function(a){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var b,c;if(a.beta)b=new i(a.beta,16).toRed(this.red);else{var d=this._getEndoRoots(this.p);b=d[0].cmp(d[1])<0?d[0]:d[1],b=b.toRed(this.red)}if(a.lambda)c=new i(a.lambda,16);else{var e=this._getEndoRoots(this.n);0===this.g.mul(e[0]).x.cmp(this.g.x.redMul(b))?c=e[0]:(c=e[1],f(0===this.g.mul(c).x.cmp(this.g.x.redMul(b))))}var g;return g=a.basis?a.basis.map(function(a){return{a:new i(a.a,16),b:new i(a.b,16)}}):this._getEndoBasis(c),{beta:b,lambda:c,basis:g}}},c.prototype._getEndoRoots=function(a){var b=a===this.p?this.red:i.mont(a),c=new i(2).toRed(b).redInvm(),d=c.redNeg(),e=(new i(1).toRed(b),new i(3).toRed(b).redNeg().redSqrt().redMul(c)),f=d.redAdd(e).fromRed(),g=d.redSub(e).fromRed();return[f,g]},c.prototype._getEndoBasis=function(a){for(var b,c,d,e,f,g,h,j=this.n.shrn(Math.floor(this.n.bitLength()/2)),k=a,l=this.n.clone(),m=new i(1),n=new i(0),o=new i(0),p=new i(1),q=0;0!==k.cmpn(0);){var r=l.div(k),s=l.sub(r.mul(k)),t=o.sub(r.mul(m)),u=p.sub(r.mul(n));if(!d&&s.cmp(j)<0)b=h.neg(),c=m,d=s.neg(),e=t;else if(d&&2===++q)break;h=s,l=k,k=s,o=m,m=t,p=n,n=u}f=s.neg(),g=t;var v=d.sqr().add(e.sqr()),w=f.sqr().add(g.sqr());return w.cmp(v)>=0&&(f=b,g=c),d.sign&&(d=d.neg(),e=e.neg()),f.sign&&(f=f.neg(),g=g.neg()),[{a:d,b:e},{a:f,b:g}]},c.prototype._endoSplit=function(a){var b=this.endo.basis,c=b[0],d=b[1],e=d.b.mul(a).divRound(this.n),f=c.b.neg().mul(a).divRound(this.n),g=e.mul(c.a),h=f.mul(d.a),i=e.mul(c.b),j=f.mul(d.b),k=a.sub(g).sub(h),l=i.add(j).neg();return{k1:k,k2:l}},c.prototype.point=function(a,b,c){return new d(this,a,b,c)},c.prototype.pointFromX=function(a,b){b=new i(b,16),b.red||(b=b.toRed(this.red));var c=b.redSqr().redMul(b).redIAdd(b.redMul(this.a)).redIAdd(this.b),d=c.redSqrt(),e=d.fromRed().isOdd();return(a&&!e||!a&&e)&&(d=d.redNeg()),this.point(b,d)},c.prototype.jpoint=function(a,b,c){return new e(this,a,b,c)},c.prototype.pointFromJSON=function(a,b){return d.fromJSON(this,a,b)},c.prototype.validate=function(a){if(a.inf)return!0;var b=a.x,c=a.y,d=this.a.redMul(b),e=b.redSqr().redMul(b).redIAdd(d).redIAdd(this.b);return 0===c.redSqr().redISub(e).cmpn(0)},c.prototype._endoWnafMulAdd=function(a,b){for(var c=this._endoWnafT1,d=this._endoWnafT2,e=0;e<a.length;e++){var f=this._endoSplit(b[e]),g=a[e],h=g._getBeta();f.k1.sign&&(f.k1.sign=!f.k1.sign,g=g.neg(!0)),f.k2.sign&&(f.k2.sign=!f.k2.sign,h=h.neg(!0)),c[2*e]=g,c[2*e+1]=h,d[2*e]=f.k1,d[2*e+1]=f.k2}for(var i=this._wnafMulAdd(1,c,d,2*e),j=0;2*e>j;j++)c[j]=null,d[j]=null;return i},j(d,k.BasePoint),d.prototype._getBeta=function(){function a(a){return d.point(a.x.redMul(d.endo.beta),a.y)}if(this.curve.endo){var b=this.precomputed;if(b&&b.beta)return b.beta;var c=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(b){var d=this.curve;b.beta=c,c.precomputed={beta:null,naf:b.naf&&{wnd:b.naf.wnd,points:b.naf.points.map(a)},doubles:b.doubles&&{step:b.doubles.step,points:b.doubles.points.map(a)}}}return c}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(a,b,c){function d(b){return a.point(b[0],b[1],c)}"string"==typeof b&&(b=JSON.parse(b));var e=a.point(b[0],b[1],c);if(!b[2])return e;var f=b[2];return e.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[e].concat(f.doubles.points.map(d))},naf:f.naf&&{wnd:f.naf.wnd,points:[e].concat(f.naf.points.map(d))}},e},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(a){if(this.inf)return a;if(a.inf)return this;if(this.eq(a))return this.dbl();if(this.neg().eq(a))return this.curve.point(null,null);if(0===this.x.cmp(a.x))return this.curve.point(null,null);var b=this.y.redSub(a.y);0!==b.cmpn(0)&&(b=b.redMul(this.x.redSub(a.x).redInvm()));var c=b.redSqr().redISub(this.x).redISub(a.x),d=b.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,d)},d.prototype.dbl=function(){if(this.inf)return this;var a=this.y.redAdd(this.y);if(0===a.cmpn(0))return this.curve.point(null,null);var b=this.curve.a,c=this.x.redSqr(),d=a.redInvm(),e=c.redAdd(c).redIAdd(c).redIAdd(b).redMul(d),f=e.redSqr().redISub(this.x.redAdd(this.x)),g=e.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,g)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(a){return a=new i(a,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,a):this.curve.endo?this.curve._endoWnafMulAdd([this],[a]):this.curve._wnafMul(this,a)},d.prototype.mulAdd=function(a,b,c){var d=[this,b],e=[a,c];return this.curve.endo?this.curve._endoWnafMulAdd(d,e):this.curve._wnafMulAdd(1,d,e,2)},d.prototype.eq=function(a){return this===a||this.inf===a.inf&&(this.inf||0===this.x.cmp(a.x)&&0===this.y.cmp(a.y))},d.prototype.neg=function(a){function b(a){return a.neg()}if(this.inf)return this;var c=this.curve.point(this.x,this.y.redNeg());if(a&&this.precomputed){var d=this.precomputed;c.precomputed={naf:d.naf&&{wnd:d.naf.wnd,points:d.naf.points.map(b)},doubles:d.doubles&&{step:d.doubles.step,points:d.doubles.points.map(b)}}}return c},d.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var a=this.curve.jpoint(this.x,this.y,this.curve.one);return a},j(e,k.BasePoint),e.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var a=this.z.redInvm(),b=a.redSqr(),c=this.x.redMul(b),d=this.y.redMul(b).redMul(a);return this.curve.point(c,d)},e.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},e.prototype.add=function(a){if(this.isInfinity())return a;if(a.isInfinity())return this;var b=a.z.redSqr(),c=this.z.redSqr(),d=this.x.redMul(b),e=a.x.redMul(c),f=this.y.redMul(b.redMul(a.z)),g=a.y.redMul(c.redMul(this.z)),h=d.redSub(e),i=f.redSub(g);if(0===h.cmpn(0))return 0!==i.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var j=h.redSqr(),k=j.redMul(h),l=d.redMul(j),m=i.redSqr().redIAdd(k).redISub(l).redISub(l),n=i.redMul(l.redISub(m)).redISub(f.redMul(k)),o=this.z.redMul(a.z).redMul(h);return this.curve.jpoint(m,n,o)},e.prototype.mixedAdd=function(a){if(this.isInfinity())return a.toJ();if(a.isInfinity())return this;var b=this.z.redSqr(),c=this.x,d=a.x.redMul(b),e=this.y,f=a.y.redMul(b).redMul(this.z),g=c.redSub(d),h=e.redSub(f);if(0===g.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var i=g.redSqr(),j=i.redMul(g),k=c.redMul(i),l=h.redSqr().redIAdd(j).redISub(k).redISub(k),m=h.redMul(k.redISub(l)).redISub(e.redMul(j)),n=this.z.redMul(g);return this.curve.jpoint(l,m,n)},e.prototype.dblp=function(a){if(0===a)return this;if(this.isInfinity())return this;if(!a)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var b=this,c=0;a>c;c++)b=b.dbl();return b}for(var d=this.curve.a,e=this.curve.tinv,f=this.x,g=this.y,h=this.z,i=h.redSqr().redSqr(),j=g.redAdd(g),c=0;a>c;c++){var k=f.redSqr(),l=j.redSqr(),m=l.redSqr(),n=k.redAdd(k).redIAdd(k).redIAdd(d.redMul(i)),o=f.redMul(l),p=n.redSqr().redISub(o.redAdd(o)),q=o.redISub(p),r=n.redMul(q);r=r.redIAdd(r).redISub(m);var s=j.redMul(h);a>c+1&&(i=i.redMul(m)),f=p,h=s,j=r}return this.curve.jpoint(f,j.redMul(e),h)},e.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},e.prototype._zeroDbl=function(){if(this.zOne){var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr().redISub(d).redISub(d),g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g);var h=f,i=e.redMul(d.redISub(f)).redISub(g),j=this.y.redAdd(this.y)}else{var k=this.x.redSqr(),l=this.y.redSqr(),m=l.redSqr(),n=this.x.redAdd(l).redSqr().redISub(k).redISub(m);n=n.redIAdd(n);var o=k.redAdd(k).redIAdd(k),p=o.redSqr(),q=m.redIAdd(m);q=q.redIAdd(q),q=q.redIAdd(q);var h=p.redISub(n).redISub(n),i=o.redMul(n.redISub(h)).redISub(q),j=this.y.redMul(this.z);j=j.redIAdd(j)}return this.curve.jpoint(h,i,j)},e.prototype._threeDbl=function(){if(this.zOne){var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a).redIAdd(this.curve.a),f=e.redSqr().redISub(d).redISub(d),g=f,h=c.redIAdd(c);h=h.redIAdd(h),h=h.redIAdd(h);var i=e.redMul(d.redISub(f)).redISub(h),j=this.y.redAdd(this.y)}else{var k=this.z.redSqr(),l=this.y.redSqr(),m=this.x.redMul(l),n=this.x.redSub(k).redMul(this.x.redAdd(k));n=n.redAdd(n).redIAdd(n);var o=m.redIAdd(m);o=o.redIAdd(o);var p=o.redAdd(o),g=n.redSqr().redISub(p),j=this.y.redAdd(this.z).redSqr().redISub(l).redISub(k),q=l.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var i=n.redMul(o.redISub(g)).redISub(q)}return this.curve.jpoint(g,i,j)},e.prototype._dbl=function(){var a=this.curve.a,b=(this.curve.tinv,this.x),c=this.y,d=this.z,e=d.redSqr().redSqr(),f=b.redSqr(),g=c.redSqr(),h=f.redAdd(f).redIAdd(f).redIAdd(a.redMul(e)),i=b.redAdd(b);i=i.redIAdd(i);var j=i.redMul(g),k=h.redSqr().redISub(j.redAdd(j)),l=j.redISub(k),m=g.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=h.redMul(l).redISub(m),o=c.redAdd(c).redMul(d);return this.curve.jpoint(k,n,o)},e.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr(),d=b.redSqr(),e=a.redAdd(a).redIAdd(a),f=e.redSqr(),g=this.x.redAdd(b).redSqr().redISub(a).redISub(d);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(f);var h=g.redSqr(),i=d.redIAdd(d);i=i.redIAdd(i),i=i.redIAdd(i),i=i.redIAdd(i);var j=e.redIAdd(g).redSqr().redISub(f).redISub(h).redISub(i),k=b.redMul(j);k=k.redIAdd(k),k=k.redIAdd(k);var l=this.x.redMul(h).redISub(k);l=l.redIAdd(l),l=l.redIAdd(l);var m=this.y.redMul(j.redMul(i.redISub(j)).redISub(g.redMul(h)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var n=this.z.redAdd(g).redSqr().redISub(c).redISub(h);return this.curve.jpoint(l,m,n)},e.prototype.mul=function(a,b){return a=new i(a,b),this.curve._wnafMul(this,a)},e.prototype.eq=function(a){if("affine"===a.type)return this.eq(a.toJ());if(this===a)return!0;var b=this.z.redSqr(),c=a.z.redSqr();if(0!==this.x.redMul(c).redISub(a.x.redMul(b)).cmpn(0))return!1;var d=b.redMul(this.z),e=c.redMul(a.z);return 0===this.y.redMul(e).redISub(a.y.redMul(d)).cmpn(0)},e.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},e.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":50,"../curve":53,assert:2,"bn.js":49,inherits:121}],56:[function(a,b,c){function d(a){this.curve="short"===a.type?new i.curve.short(a):"edwards"===a.type?new i.curve.edwards(a):new i.curve.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,g(this.g.validate(),"Invalid curve"),g(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function e(a,b){Object.defineProperty(f,a,{configurable:!0,enumerable:!0,get:function(){var c=new d(b);return Object.defineProperty(f,a,{configurable:!0,enumerable:!0,value:c}),c}})}var f=c,g=a("assert"),h=a("hash.js"),i=(a("bn.js"),a("../elliptic"));f.PresetCurve=d,e("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:h.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),e("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:h.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),e("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:h.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),e("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:h.sha256,gRed:!1,g:["9"]}),e("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:h.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),e("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:h.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})
},{"../elliptic":50,assert:2,"bn.js":49,"hash.js":63}],57:[function(a,b){function c(a){return this instanceof c?("string"==typeof a&&(d(f.curves.hasOwnProperty(a),"Unknown curve "+a),a=f.curves[a]),a instanceof f.curves.PresetCurve&&(a={curve:a}),this.curve=a.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=a.curve.g,this.g.precompute(a.curve.n.bitLength()+1),void(this.hash=a.hash||a.curve.hash)):new c(a)}var d=a("assert"),e=a("bn.js"),f=a("../../elliptic"),g=(f.utils,a("./key")),h=a("./signature");b.exports=c,c.prototype.keyPair=function(a,b){return new g(this,a,b)},c.prototype.genKeyPair=function(a){a||(a={});for(var b=new f.hmacDRBG({hash:this.hash,pers:a.pers,entropy:a.entropy||f.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),c=this.n.byteLength(),d=this.n.sub(new e(2));;){var g=new e(b.generate(c));if(!(g.cmp(d)>0))return g.iaddn(1),this.keyPair(g)}},c.prototype._truncateToN=function(a,b){var c=8*a.byteLength()-this.n.bitLength();return c>0&&(a=a.shrn(c)),!b&&a.cmp(this.n)>=0?a.sub(this.n):a},c.prototype.sign=function(a,b,c){b=this.keyPair(b,"hex"),a=this._truncateToN(new e(a,16)),c||(c={});for(var d=this.n.byteLength(),g=b.getPrivate().toArray(),i=g.length;21>i;i++)g.unshift(0);for(var j=a.toArray(),i=j.length;d>i;i++)j.unshift(0);for(var k=new f.hmacDRBG({hash:this.hash,entropy:g,nonce:j}),l=this.n.sub(new e(1));;){var m=new e(k.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(l)>=0)){var n=this.g.mul(m);if(!n.isInfinity()){var o=n.getX().mod(this.n);if(0!==o.cmpn(0)){var p=m.invm(this.n).mul(o.mul(b.getPrivate()).iadd(a)).mod(this.n);if(0!==p.cmpn(0))return c.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p)),new h(o,p)}}}}},c.prototype.verify=function(a,b,c){a=this._truncateToN(new e(a,16)),c=this.keyPair(c,"hex"),b=new h(b,"hex");var d=b.r,f=b.s;if(d.cmpn(1)<0||d.cmp(this.n)>=0)return!1;if(f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;var g=f.invm(this.n),i=g.mul(a).mod(this.n),j=g.mul(d).mod(this.n),k=this.g.mulAdd(i,c.getPublic(),j);return k.isInfinity()?!1:0===k.getX().mod(this.n).cmp(d)}},{"../../elliptic":50,"./key":58,"./signature":59,assert:2,"bn.js":49}],58:[function(a,b){function c(a,b,d){return b instanceof c?b:d instanceof c?d:(b||(b=d,d=null),null!==b&&"object"==typeof b&&(b.x?(d=b,b=null):(b.priv||b.pub)&&(d=b.pub,b=b.priv)),this.ec=a,this.priv=null,this.pub=null,void(this._importPublicHex(b,d)||("hex"===d&&(d=null),b&&this._importPrivate(b),d&&this._importPublic(d))))}var d=(a("assert"),a("bn.js")),e=a("../../elliptic"),f=e.utils;b.exports=c,c.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},c.prototype.getPublic=function(a,b){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof a&&(b=a,a=null),!b)return this.pub;for(var c=this.ec.curve.p.byteLength(),d=this.pub.getX().toArray(),e=d.length;c>e;e++)d.unshift(0);if(a)var g=[this.pub.getY().isEven()?2:3].concat(d);else{for(var h=this.pub.getY().toArray(),e=h.length;c>e;e++)h.unshift(0);var g=[4].concat(d,h)}return f.encode(g,b)},c.prototype.getPrivate=function(a){return"hex"===a?this.priv.toString(16,2):this.priv},c.prototype._importPrivate=function(a){this.priv=new d(a,16),this.priv=this.priv.mod(this.ec.curve.n)},c.prototype._importPublic=function(a){this.pub=this.ec.curve.point(a.x,a.y)},c.prototype._importPublicHex=function(a,b){a=f.toArray(a,b);var c=this.ec.curve.p.byteLength();if(4===a[0]&&a.length-1===2*c)this.pub=this.ec.curve.point(a.slice(1,1+c),a.slice(1+c,1+2*c));else{if(2!==a[0]&&3!==a[0]||a.length-1!==c)return!1;this.pub=this.ec.curve.pointFromX(3===a[0],a.slice(1,1+c))}return!0},c.prototype.derive=function(a){return a.mul(this.priv).getX()},c.prototype.sign=function(a){return this.ec.sign(a,this)},c.prototype.verify=function(a,b){return this.ec.verify(a,b,this)},c.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":50,assert:2,"bn.js":49}],59:[function(a,b){function c(a,b){return a instanceof c?a:void(this._importDER(a,b)||(d(a&&b,"Signature without r or s"),this.r=new e(a,16),this.s=new e(b,16)))}var d=a("assert"),e=a("bn.js"),f=a("../../elliptic"),g=f.utils;b.exports=c,c.prototype._importDER=function(a,b){if(a=g.toArray(a,b),a.length<6||48!==a[0]||2!==a[2])return!1;var c=a[1];if(1+c>a.length)return!1;var d=a[3];if(d>=128)return!1;if(4+d+2>=a.length)return!1;if(2!==a[4+d])return!1;var f=a[5+d];return f>=128?!1:4+d+2+f>a.length?!1:(this.r=new e(a.slice(4,4+d)),this.s=new e(a.slice(4+d+2,4+d+2+f)),!0)},c.prototype.toDER=function(a){var b=this.r.toArray(),c=this.s.toArray();128&b[0]&&(b=[0].concat(b)),128&c[0]&&(c=[0].concat(c));var d=b.length+c.length+4,e=[48,d,2,b.length];return e=e.concat(b,[2,c.length],c),g.encode(e,a)}},{"../../elliptic":50,assert:2,"bn.js":49}],60:[function(a,b){function c(a){if(!(this instanceof c))return new c(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var b=g.toArray(a.entropy,a.entropyEnc),e=g.toArray(a.nonce,a.nonceEnc),f=g.toArray(a.pers,a.persEnc);d(b.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(b,e,f)}var d=a("assert"),e=a("hash.js"),f=a("../elliptic"),g=f.utils;b.exports=c,c.prototype._init=function(a,b,c){var d=a.concat(b).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;this._update(d),this.reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},c.prototype._update=function(a){var b=this._hmac().update(this.V).update([0]);a&&(b=b.update(a)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(a,b,c,e){"string"!=typeof b&&(e=c,c=b,b=null),a=g.toBuffer(a,b),c=g.toBuffer(c,e),d(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(c||[])),this.reseed=1},c.prototype.generate=function(a,b,c,d){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof b&&(d=c,c=b,b=null),c&&(c=g.toArray(c,d),this._update(c));for(var e=[];e.length<a;)this.V=this._hmac().update(this.V).digest(),e=e.concat(this.V);var f=e.slice(0,a);return this._update(c),this.reseed++,g.encode(f,b)}},{"../elliptic":50,assert:2,"hash.js":63}],61:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!==0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=f(a[c].toString(16));return b}function f(a){return 1===a.length?"0"+a:a}function g(a,b){for(var c=[],d=1<<b+1,e=a.clone();e.cmpn(1)>=0;){var f;if(e.isOdd()){var g=e.andln(d-1);f=g>(d>>1)-1?(d>>1)-g:g,e.isubn(f)}else f=0;c.push(f);for(var h=0!==e.cmpn(0)&&0===e.andln(d-1)?b+1:1,i=1;h>i;i++)c.push(0);e.ishrn(h)}return c}function h(a,b){var c=[[],[]];a=a.clone(),b=b.clone();for(var d=0,e=0;a.cmpn(-d)>0||b.cmpn(-e)>0;){var f=a.andln(3)+d&3,g=b.andln(3)+e&3;3===f&&(f=-1),3===g&&(g=-1);var h;if(0===(1&f))h=0;else{var i=a.andln(7)+d&7;h=3!==i&&5!==i||2!==g?f:-f}c[0].push(h);var j;if(0===(1&g))j=0;else{var i=b.andln(7)+e&7;j=3!==i&&5!==i||2!==f?g:-g}c[1].push(j),2*d===h+1&&(d=1-d),2*e===j+1&&(e=1-e),a.ishrn(1),b.ishrn(1)}return c}var i=(a("assert"),a("bn.js"),c);i.toArray=d,i.toHex=e,i.encode=function(a,b){return"hex"===b?e(a):a},i.zero2=f,i.getNAF=g,i.getJSF=h},{assert:2,"bn.js":49}],62:[function(a,b){function c(a){this.rand=a}var d;if(b.exports=function(a){return d||(d=new c(null)),d.generate(a)},b.exports.Rand=c,c.prototype.generate=function(a){return this._rand(a)},"object"==typeof window)c.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(a){var b=new Uint8Array(a);return window.crypto.getRandomValues(b),b}:window.msCrypto&&window.msCrypto.getRandomValues?function(a){var b=new Uint8Array(a);return window.msCrypto.getRandomValues(b),b}:function(){throw new Error("Not implemented yet")};else try{var e=a("crypto");c.prototype._rand=function(a){return e.randomBytes(a)}}catch(f){c.prototype._rand=function(a){for(var b=new Uint8Array(a),c=0;c<b.length;c++)b[c]=this.rand.getByte();return b}}},{}],63:[function(a,b,c){var d=c;d.utils=a("./hash/utils"),d.common=a("./hash/common"),d.sha=a("./hash/sha"),d.ripemd=a("./hash/ripemd"),d.hmac=a("./hash/hmac"),d.sha256=d.sha.sha256,d.sha224=d.sha.sha224,d.ripemd160=d.ripemd.ripemd160},{"./hash/common":64,"./hash/hmac":65,"./hash/ripemd":66,"./hash/sha":67,"./hash/utils":68}],64:[function(a,b,c){function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.endian="big"}var e=a("../hash"),f=e.utils,g=f.assert;c.BlockHash=d,d.prototype.update=function(a,b){if(a=f.toArray(a,b),this.pending=this.pending?this.pending.concat(a):a,this.pendingTotal+=a.length,this.pending.length>=this.blockSize/8){a=this.pending;var c=a.length%(this.blockSize/8);this.pending=a.slice(a.length-c,a.length),0===this.pending.length&&(this.pending=null),a=f.join32(a.slice(0,a.length-c),this.endian);for(var d=0;d<a.length;d+=this.blockSize/32)this._update(a.slice(d,d+this.blockSize/32))}return this},d.prototype.digest=function(a){return this.update(this._pad()),g(null===this.pending),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,b=this.blockSize/8,c=b-(a+8)%b,d=new Array(c+8);d[0]=128;for(var e=1;c>e;e++)d[e]=0;return a<<=3,"big"===this.endian?(d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=a>>>24&255,d[e++]=a>>>16&255,d[e++]=a>>>8&255,d[e++]=255&a):(d[e++]=255&a,d[e++]=a>>>8&255,d[e++]=a>>>16&255,d[e++]=a>>>24&255,d[e++]=0,d[e++]=0,d[e++]=0,d[e++]=0),d}},{"../hash":63}],65:[function(a,b,c){function d(a,b,c){return this instanceof d?(this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,void this._init(f.toArray(b,c))):new d(a,b,c)}var e=a("../hash"),f=e.utils,g=f.assert;b.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=(new this.Hash).update(a).digest()),g(a.length<=this.blockSize);for(var b=a.length;b<this.blockSize;b++)a.push(0);for(var c=a.slice(),b=0;b<a.length;b++)a[b]^=54,c[b]^=92;this.hash={inner:(new this.Hash).update(a),outer:(new this.Hash).update(c)}},d.prototype.update=function(a,b){return this.hash.inner.update(a,b),this},d.prototype.digest=function(a){return this.hash.outer.update(this.hash.inner.digest()),this.hash.outer.digest(a)}},{"../hash":63}],66:[function(a,b,c){function d(){return this instanceof d?(n.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new d}function e(a,b,c,d){return 15>=a?b^c^d:31>=a?b&c|~b&d:47>=a?(b|~c)^d:63>=a?b&d|c&~d:b^(c|~d)}function f(a){return 15>=a?0:31>=a?1518500249:47>=a?1859775393:63>=a?2400959708:2840853838}function g(a){return 15>=a?1352829926:31>=a?1548603684:47>=a?1836072691:63>=a?2053994217:0}var h=a("../hash"),i=h.utils,j=i.rotl32,k=i.sum32,l=i.sum32_3,m=i.sum32_4,n=h.common.BlockHash;i.inherits(d,n),c.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.prototype._update=function(a){for(var b=this.h[0],c=this.h[1],d=this.h[2],h=this.h[3],i=this.h[4],n=b,s=c,t=d,u=h,v=i,w=0;80>w;w++){var x=k(j(m(b,e(w,c,d,h),a[o[w]],f(w)),q[w]),i);b=i,i=h,h=j(d,10),d=c,c=x,x=k(j(m(n,e(79-w,s,t,u),a[p[w]],g(w)),r[w]),v),n=v,v=u,u=j(t,10),t=s,s=x}x=l(this.h[1],d,u),this.h[1]=l(this.h[2],h,v),this.h[2]=l(this.h[3],i,n),this.h[3]=l(this.h[4],b,s),this.h[4]=l(this.h[0],c,t),this.h[0]=x},d.prototype._digest=function(a){return"hex"===a?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],q=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],r=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":63}],67:[function(a,b,c){function d(){return this instanceof d?(s.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],void(this.k=t)):new d}function e(){return this instanceof e?(d.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new e}function f(a,b,c){return a&b^~a&c}function g(a,b,c){return a&b^a&c^b&c}function h(a){return o(a,2)^o(a,13)^o(a,22)}function i(a){return o(a,6)^o(a,11)^o(a,25)}function j(a){return o(a,7)^o(a,18)^a>>>3}function k(a){return o(a,17)^o(a,19)^a>>>10}var l=a("../hash"),m=l.utils,n=m.assert,o=m.rotr32,p=(m.rotl32,m.sum32),q=m.sum32_4,r=m.sum32_5,s=l.common.BlockHash,t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];m.inherits(d,s),c.sha256=d,d.blockSize=512,d.outSize=256,d.hmacStrength=192,d.prototype._update=function(a){for(var b=new Array(64),c=0;16>c;c++)b[c]=a[c];for(;c<b.length;c++)b[c]=q(k(b[c-2]),b[c-7],j(b[c-15]),b[c-16]);var d=this.h[0],e=this.h[1],l=this.h[2],m=this.h[3],o=this.h[4],s=this.h[5],t=this.h[6],u=this.h[7];n(this.k.length===b.length);for(var c=0;c<b.length;c++){var v=r(u,i(o),f(o,s,t),this.k[c],b[c]),w=p(h(d),g(d,e,l));u=t,t=s,s=o,o=p(m,v),m=l,l=e,e=d,d=p(v,w)}this.h[0]=p(this.h[0],d),this.h[1]=p(this.h[1],e),this.h[2]=p(this.h[2],l),this.h[3]=p(this.h[3],m),this.h[4]=p(this.h[4],o),this.h[5]=p(this.h[5],s),this.h[6]=p(this.h[6],t),this.h[7]=p(this.h[7],u)},d.prototype._digest=function(a){return"hex"===a?m.toHex32(this.h,"big"):m.split32(this.h,"big")},m.inherits(e,d),c.sha224=e,e.blockSize=512,e.outSize=224,e.hmacStrength=192,e.prototype._digest=function(a){return"hex"===a?m.toHex32(this.h.slice(0,7),"big"):m.split32(this.h.slice(0,7),"big")}},{"../hash":63}],68:[function(a,b,c){function d(a,b){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if("string"==typeof a)if(b){if("hex"===b){a=a.replace(/[^a-z0-9]+/gi,""),a.length%2!=0&&(a="0"+a);for(var d=0;d<a.length;d+=2)c.push(parseInt(a[d]+a[d+1],16))}}else for(var d=0;d<a.length;d++){var e=a.charCodeAt(d),f=e>>8,g=255&e;f?c.push(f,g):c.push(g)}else for(var d=0;d<a.length;d++)c[d]=0|a[d];return c}function e(a){for(var b="",c=0;c<a.length;c++)b+=g(a[c].toString(16));return b}function f(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d];"little"===b&&(e=e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24,0>e&&(e+=4294967296)),c+=h(e.toString(16))}return c}function g(a){return 1===a.length?"0"+a:a}function h(a){return 7===a.length?"0"+a:6===a.length?"00"+a:5===a.length?"000"+a:4===a.length?"0000"+a:3===a.length?"00000"+a:2===a.length?"000000"+a:1===a.length?"0000000"+a:a}function i(a,b){q(a.length%4===0);for(var c=new Array(a.length/4),d=0,e=0;d<c.length;d++,e+=4){var f;f="big"===b?a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3]:a[e+3]<<24|a[e+2]<<16|a[e+1]<<8|a[e],0>f&&(f+=4294967296),c[d]=f}return c}function j(a,b){for(var c=new Array(4*a.length),d=0,e=0;d<a.length;d++,e+=4){var f=a[d];"big"===b?(c[e]=f>>>24,c[e+1]=f>>>16&255,c[e+2]=f>>>8&255,c[e+3]=255&f):(c[e+3]=f>>>24,c[e+2]=f>>>16&255,c[e+1]=f>>>8&255,c[e]=255&f)}return c}function k(a,b){return a>>>b|a<<32-b}function l(a,b){return a<<b|a>>>32-b}function m(a,b){var c=a+b&4294967295;return 0>c&&(c+=4294967296),c}function n(a,b,c){var d=a+b+c&4294967295;return 0>d&&(d+=4294967296),d}function o(a,b,c,d){var e=a+b+c+d&4294967295;return 0>e&&(e+=4294967296),e}function p(a,b,c,d,e){var f=a+b+c+d+e&4294967295;return 0>f&&(f+=4294967296),f}function q(a,b){if(!a)throw new Error(b||"Assertion failed")}var r=c;r.toArray=d,r.toHex=e,r.toHex32=f,r.zero2=g,r.zero8=h,r.join32=i,r.split32=j,r.rotr32=k,r.rotl32=l,r.sum32=m,r.sum32_3=n,r.sum32_4=o,r.sum32_5=p,r.assert=q,r.inherits="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],69:[function(a,b){b.exports={name:"elliptic",version:"0.15.15",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^0.15.0",brorand:"^1.0.1","hash.js":"^0.2.0",inherits:"^2.0.1"},gitHead:"4bf1f50607285bff4ae19521217dbc801c3d36af",_id:"elliptic@0.15.15",_shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",_from:"elliptic@>=0.15.14 <0.16.0",_npmVersion:"2.1.6",_nodeVersion:"0.10.33",_npmUser:{name:"indutny",email:"fedor@indutny.com"},maintainers:[{name:"indutny",email:"fedor@indutny.com"}],dist:{shasum:"63269184a856d6e00871e84f37a8401ff84e4aea",tarball:"http://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz"},directories:{},_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-0.15.15.tgz"}},{}],70:[function(a,b,c){c.strip=function(a){a=a.toString();var b=/^-----BEGIN (.*)-----\n/,c=b.exec(a),d=c[1],e=new RegExp("\n-----END "+d+"-----(\n*)$"),f=a.slice(c[0].length).replace(e,"").replace(/\n/g,"");return{tag:d,base64:f}};var d=function(a,b){for(var c=[];a;){if(a.length<b){c.push(a);break}c.push(a.substr(0,b)),a=a.substr(b)}return c.join("\n")};c.assemble=function(a){var b=a.tag,c=a.base64,e="-----BEGIN "+b+"-----",f="-----END "+b+"-----";return e+"\n"+d(c,64)+"\n"+f+"\n"}},{}],71:[function(a,b){(function(c){function d(a,b){var d;"object"!=typeof a||c.isBuffer(a)||(d=a.passphrase,a=a.key);var h,i,j=f.strip(a),k=j.tag,l=new c(j.base64,"base64");switch(k){case"PUBLIC KEY":switch(i=g.PublicKey.decode(l,"der"),h=i.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPublicKey.decode(i.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:g.ECPublicKey.decode(l,"der")};default:throw new Error("unknown key id "+h)}throw new Error("unknown key type "+k);case"ENCRYPTED PRIVATE KEY":l=g.EncryptedPrivateKey.decode(l,"der"),l=e(b,l,d);case"PRIVATE KEY":switch(i=g.PrivateKey.decode(l,"der"),h=i.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return g.RSAPrivateKey.decode(i.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return i=g.ECPrivateWrap.decode(l,"der"),{curve:i.algorithm.curve,privateKey:g.ECPrivateKey.decode(i.subjectPrivateKey,"der").privateKey};default:throw new Error("unknown key id "+h)}throw new Error("unknown key type "+k);case"RSA PUBLIC KEY":return g.RSAPublicKey.decode(l,"der");case"RSA PRIVATE KEY":return g.RSAPrivateKey.decode(l,"der");case"EC PRIVATE KEY":return l=g.ECPrivateKey.decode(l,"der"),{curve:l.parameters.value,privateKey:l.privateKey};default:throw new Error("unknown key type "+k)}}function e(a,b,d){var e=b.algorithm.decrypt.kde.kdeparams.salt,f=b.algorithm.decrypt.kde.kdeparams.iters,g=h[b.algorithm.decrypt.cipher.algo.join(".")],i=b.algorithm.decrypt.cipher.iv,j=b.subjectPrivateKey,k=parseInt(g.split("-")[1],10)/8,l=a.pbkdf2Sync(d,e,f,k),m=a.createDecipheriv(g,l,i),n=[];return n.push(m.update(j)),n.push(m.final()),c.concat(n)}var f=a("pemstrip"),g=a("./asn1"),h=a("./aesid.json");b.exports=d}).call(this,a("buffer").Buffer)},{"./aesid.json":31,"./asn1":33,buffer:4,pemstrip:70}],72:[function(a,b){(function(c){function d(a,b,d){var h=g(b,d);if(h.curve)return f(a,h,d);for(var i=h.modulus.byteLength(),j=[0,1];a.length+j.length+1<i;)j.push(255);j.push(0);for(var k=-1;++k<a.length;)j.push(a[k]);var l=e(j,h);if(l.length<i){var m=new c(i-l.length);m.fill(0),l=c.concat([m,l],i)}return l}function e(a,b){var d=new h(a).toRed(h.mont(b.prime1)),e=new h(a).toRed(h.mont(b.prime2)),f=new h(b.coefficient),g=new h(b.prime1),i=new h(b.prime2),j=d.redPow(b.exponent1),k=e.redPow(b.exponent2);j=j.fromRed(),k=k.fromRed();var l=j.isub(k).imul(f).mod(g);return l.imul(i),k.iadd(l),new c(k.toArray())}function f(a,b,d){i.rand=d.randomBytes;var e;"1.3.132.0.10"===b.curve.join(".")&&(e=new i.ec("secp256k1"));var f=e.genKeyPair();f._importPrivate(b.privateKey);var g=f.sign(a);return new c(g.toDER())}var g=a("./parseKeys"),h=a("bn.js"),i=a("elliptic");b.exports=d}).call(this,a("buffer").Buffer)},{"./parseKeys":71,"bn.js":49,buffer:4,elliptic:50}],73:[function(a,b){(function(c){function d(a,b,d){var g=f(d);if("ec"===g.type)return e(a,b,g);var i=h.mont(g.modulus);a=new h(a).toRed(i),a=a.redPow(new h(g.publicExponent)),a=new c(a.fromRed().toArray()),a=a.slice(a.length-b.length);for(var j=0,k=a.length,l=-1;++l<k;)j+=a[l]^b[l];return!j}function e(a,b,c){var d;"1.3.132.0.10"===c.data.algorithm.curve.join(".")&&(d=new g.ec("secp256k1"));var e=c.data.subjectPrivateKey.data;return d.verify(b.toString("hex"),a.toString("hex"),e.toString("hex"))}var f=a("./parseKeys"),g=a("elliptic"),h=a("bn.js");b.exports=d}).call(this,a("buffer").Buffer)},{"./parseKeys":71,"bn.js":49,buffer:4,elliptic:50}],74:[function(a,b){(function(c){function d(a,b){f.rand=b.randomBytes,this.curve=new f.ec(a),this.keys=void 0}function e(a,b){Array.isArray(a)||(a=a.toArray());var d=new c(a);return b?d.toString(b):d}var f=a("elliptic"),g=a("bn.js");b.exports=d,d.prototype.generateKeys=function(a,b){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,b)},d.prototype.computeSecret=function(a,b,d){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),a=new g(a),a=a.toString(16);var f=this.curve.keyPair(a,"hex").getPublic(),h=f.mul(this.keys.getPrivate()).getX();return e(h,d)},d.prototype.getPublicKey=function(a,b){var c=this.keys.getPublic("compressed"===b,!0);return"hybrid"===b&&(c[0]=c[c.length-1]%2?7:6),e(c,a)},d.prototype.getPrivateKey=function(a){return e(this.keys.getPrivate(),a)},d.prototype.setPublicKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);d=d.toArray(),this.keys._importPublicHex(d)},d.prototype.setPrivateKey=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b));var d=new g(a);d=d.toString(16),this.keys._importPrivate(d)}}).call(this,a("buffer").Buffer)},{"bn.js":76,buffer:4,elliptic:77}],75:[function(a,b){var c=a("./ecdh");b.exports=function(a,b){b.createECDH=function(b){return new c(b,a)}}},{"./ecdh":74}],76:[function(a,b){b.exports=a(49)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":49}],77:[function(a,b){b.exports=a(50)},{"../package.json":96,"./elliptic/curve":80,"./elliptic/curves":83,"./elliptic/ec":84,"./elliptic/hmac-drbg":87,"./elliptic/utils":88,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic.js":50,brorand:89}],78:[function(a,b){b.exports=a(51)},{"../../elliptic":77,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/base.js":51,assert:2,"bn.js":76}],79:[function(a,b){b.exports=a(52)},{"../../elliptic":77,"../curve":80,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/edwards.js":52,assert:2,"bn.js":76,inherits:121}],80:[function(a,b){b.exports=a(53)},{"./base":78,"./edwards":79,"./mont":81,"./short":82,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/index.js":53}],81:[function(a,b){b.exports=a(54)},{"../../elliptic":77,"../curve":80,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/mont.js":54,assert:2,"bn.js":76,inherits:121}],82:[function(a,b){b.exports=a(55)},{"../../elliptic":77,"../curve":80,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curve/short.js":55,assert:2,"bn.js":76,inherits:121}],83:[function(a,b){b.exports=a(56)},{"../elliptic":77,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/curves.js":56,assert:2,"bn.js":76,"hash.js":90}],84:[function(a,b){b.exports=a(57)},{"../../elliptic":77,"./key":85,"./signature":86,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/index.js":57,assert:2,"bn.js":76}],85:[function(a,b){b.exports=a(58)},{"../../elliptic":77,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/key.js":58,assert:2,"bn.js":76}],86:[function(a,b){b.exports=a(59)},{"../../elliptic":77,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/ec/signature.js":59,assert:2,"bn.js":76}],87:[function(a,b){b.exports=a(60)},{"../elliptic":77,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/hmac-drbg.js":60,assert:2,"hash.js":90}],88:[function(a,b){b.exports=a(61)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/lib/elliptic/utils.js":61,assert:2,"bn.js":76}],89:[function(a,b){b.exports=a(62)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/brorand/index.js":62}],90:[function(a,b){b.exports=a(63)},{"./hash/common":91,"./hash/hmac":92,"./hash/ripemd":93,"./hash/sha":94,"./hash/utils":95,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash.js":63}],91:[function(a,b){b.exports=a(64)},{"../hash":90,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/common.js":64}],92:[function(a,b){b.exports=a(65)},{"../hash":90,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/hmac.js":65}],93:[function(a,b){b.exports=a(66)},{"../hash":90,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/ripemd.js":66}],94:[function(a,b){b.exports=a(67)},{"../hash":90,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/sha.js":67}],95:[function(a,b){b.exports=a(68)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/hash.js/lib/hash/utils.js":68}],96:[function(a,b){b.exports=a(69)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/package.json":69}],97:[function(a,b){(function(c){function d(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._pub=new j(a)}function e(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._priv=new j(a)}function f(a,b){var c=b.toString("hex"),d=[c,a.toString(16)].join("_");if(d in s)return s[d];var e=0;if(a.isEven()||!r.simpleSieve||!r.fermatTest(a)||!l.test(a))return e+=1,e+="02"===c||"05"===c?8:4,s[d]=e,e;l.test(a.shrn(1))||(e+=2);var f,c=b.toString("hex");switch(c){case"02":a.mod(m).cmp(n)&&(e+=8);break;case"05":f=a.mod(o),f.cmp(p)&&f.cmp(q)&&(e+=8);break;default:e+=4}return s[d]=e,e}function g(a,b){try{Object.defineProperty(a,"verifyError",{enumerable:!0,value:b,writable:!1})}catch(c){a.verifyError=b}}function h(a,b,c,h){this.setGenerator(b),this.__prime=new j(a),this._prime=j.mont(this.__prime),this._pub=void 0,this._priv=void 0,h?(this.setPublicKey=d,this.setPrivateKey=e,g(this,f(this.__prime,b))):g(this,8),this._makeNum=function(){return c.randomBytes(192)}}function i(a,b){var d=new c(a.toArray());return b?d.toString(b):d}var j=a("bn.js"),k=a("miller-rabin"),l=new k,m=new j(24),n=new j(11),o=new j(10),p=new j(3),q=new j(7),r=a("./generatePrime");b.exports=h;var s={};h.prototype.generateKeys=function(){return this._priv||(this._priv=new j(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},h.prototype.computeSecret=function(a){a=new j(a),a=a.toRed(this._prime);var b=a.redPow(this._priv).fromRed(),d=new c(b.toArray()),e=this.getPrime();if(d.length<e.length){var f=new c(e.length-d.length);f.fill(0),d=c.concat([f,d])}return d},h.prototype.getPublicKey=function(a){return i(this._pub,a)},h.prototype.getPrivateKey=function(a){return i(this._priv,a)
},h.prototype.getPrime=function(a){return i(this.__prime,a)},h.prototype.getGenerator=function(a){return i(this._gen,a)},h.prototype.setGenerator=function(a,b){b=b||"utf8",c.isBuffer(a)||(a=new c(a,b)),this._gen=new j(a)}}).call(this,a("buffer").Buffer)},{"./generatePrime":98,"bn.js":100,buffer:4,"miller-rabin":101}],98:[function(a,b){function c(){if(null!==t)return t;var a=1048576,b=[];b[0]=2;for(var c=1,d=3;a>d;d+=2){for(var e=Math.ceil(Math.sqrt(d)),f=0;c>f&&b[f]<=e&&d%b[f]!==0;f++);c!==f&&b[f]<=e||(b[c++]=d)}return t=b,b}function d(a){for(var b=c(),d=0;d<b.length;d++)if(0===a.modn(b[d]))return!1;return!0}function e(a){var b=g.mont(a);return 0===k.toRed(b).redPow(a.subn(1)).fromRed().cmpn(1)}function f(a,b,c){function f(a){i=-1;var d=c.randomBytes(Math.ceil(a/8));d[0]|=192,d[d.length-1]|=3;var e,f=new g(d);if(b.cmp(k))if(b.cmp(l))t={major:[r],minor:[k]};else{for(e=f.mod(o);e.cmp(p);)f.iadd(r),e=f.mod(o);t={major:[r,m],minor:[k,n]}}else{for(;f.mod(h).cmp(q);)f.iadd(r);t={major:[h],minor:[s]}}return f}b=new g(b);for(var i,t,u=f(a),v=u.shrn(1);;){if(u.bitLength()>a&&(u=f(a),v=u.shrn(1)),i++,d(v)&&e(v)&&j.test(v)&&d(u)&&e(u)&&j.test(u))return u;u.iadd(t.major[i%t.major.length]),v.iadd(t.minor[i%t.minor.length])}}b.exports=f,f.simpleSieve=d,f.fermatTest=e;var g=a("bn.js"),h=new g(24),i=a("miller-rabin"),j=new i,k=(new g(1),new g(2)),l=new g(5),m=new g(16),n=new g(8),o=new g(10),p=new g(3),q=(new g(7),new g(11)),r=new g(4),s=new g(12),t=null},{"bn.js":100,"miller-rabin":101}],99:[function(a,b){(function(c){var d=a("./primes.json"),e=a("./dh"),f=a("./generatePrime");b.exports=function(a,b){function g(b){return new e(new c(d[b].prime,"hex"),new c(d[b].gen,"hex"),a)}function h(b,d,g,h){return(c.isBuffer(d)||"string"==typeof d&&-1===["hex","binary","base64"].indexOf(d))&&(h=g,g=d,d=void 0),d=d||"binary",h=h||"binary",g=g||new c([2]),c.isBuffer(g)||(g=new c(g,h)),"number"==typeof b?new e(f(b,g,a),g,a,!0):(c.isBuffer(b)||(b=new c(b,d)),new e(b,g,a,!0))}b.DiffieHellmanGroup=b.createDiffieHellmanGroup=b.getDiffieHellman=g,b.createDiffieHellman=b.DiffieHellman=h}}).call(this,a("buffer").Buffer)},{"./dh":97,"./generatePrime":98,"./primes.json":103,buffer:4}],100:[function(a,b){b.exports=a(49)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/bn.js/lib/bn.js":49}],101:[function(a,b){function c(a){this.rand=a||new e.Rand}var d=a("bn.js"),e=a("brorand");b.exports=c,c.create=function(a){return new c(a)},c.prototype._rand=function(a){var b=a.bitLength(),c=this.rand.generate(Math.ceil(b/8));c[0]|=3;var e=7&b;return 0!==e&&(c[c.length-1]>>=7-e),new d(c)},c.prototype.test=function(a,b,c){var e=a.bitLength(),f=d.mont(a),g=new d(1).toRed(f);b||(b=Math.max(1,e/48|0));for(var h=a.subn(1),i=h.subn(1),j=0;!h.testn(j);j++);for(var k=a.shrn(j),l=h.toRed(f),m=!0;b>0;b--){var n=this._rand(i);c&&c(n);var o=n.toRed(f).redPow(k);if(0!==o.cmp(g)&&0!==o.cmp(l)){for(var p=1;j>p;p++){if(o=o.redSqr(),0===o.cmp(g))return!1;if(0===o.cmp(l))break}if(p===j)return!1}}return m},c.prototype.getDivisor=function(a,b){var c=a.bitLength(),e=d.mont(a),f=new d(1).toRed(e);b||(b=Math.max(1,c/48|0));for(var g=a.subn(1),h=g.subn(1),i=0;!g.testn(i);i++);for(var j=a.shrn(i),k=g.toRed(e),l=!0;b>0;b--){var m=this._rand(h),n=a.gcd(m);if(0!==n.cmpn(1))return n;var o=m.toRed(e).redPow(j);if(0!==o.cmp(f)&&0!==o.cmp(k)){for(var p=1;i>p;p++){if(o=o.redSqr(),0===o.cmp(f))return o.fromRed().subn(1).gcd(a);if(0===o.cmp(k))break}if(p===i)return o=o.redSqr(),o.fromRed().subn(1).gcd(a)}}return l}},{"bn.js":100,brorand:102}],102:[function(a,b){b.exports=a(62)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/grunt-browserify/node_modules/browserify/node_modules/crypto-browserify/node_modules/browserify-sign/node_modules/elliptic/node_modules/brorand/index.js":62}],103:[function(a,b){b.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],104:[function(a,b){(function(a){b.exports=function(b){function c(a,b,c,e,f,g){if("function"==typeof f&&(g=f,f=void 0),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var h;try{h=d(a,b,c,e,f)}catch(i){return g(i)}g(void 0,h)})}function d(c,d,e,f,g){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(0>e)throw new TypeError("Bad iterations");if("number"!=typeof f)throw new TypeError("Key length not a number");if(0>f)throw new TypeError("Bad key length");g=g||"sha1",a.isBuffer(c)||(c=new a(c)),a.isBuffer(d)||(d=new a(d));var h,i,j,k=1,l=new a(f),m=new a(d.length+4);d.copy(m,0,0,d.length);for(var n=1;k>=n;n++){m.writeUInt32BE(n,d.length);var o=b.createHmac(g,c).update(m).digest();if(!h&&(h=o.length,j=new a(h),k=Math.ceil(f/h),i=f-(k-1)*h,f>(Math.pow(2,32)-1)*h))throw new TypeError("keylen exceeds maximum length");o.copy(j,0,0,h);for(var p=1;e>p;p++){o=b.createHmac(g,c).update(o).digest();for(var q=0;h>q;q++)j[q]^=o[q]}var r=(n-1)*h,s=n==k?i:h;j.copy(l,r,0,s)}return l}return{pbkdf2:c,pbkdf2Sync:d}}}).call(this,a("buffer").Buffer)},{buffer:4}],105:[function(a,b){(function(a){function c(a,b,c){return a^b^c}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return(a|~b)^c}function f(a,b,c){return a&c|b&~c}function g(a,b,c){return a^(b|~c)}function h(a,b){return a<<b|a>>>32-b}function i(b){var c=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof b&&(b=new a(b,"utf8"));var d=p(b),e=8*b.length,f=8*b.length;d[e>>>5]|=128<<24-e%32,d[(e+64>>>9<<4)+14]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8);for(var g=0;g<d.length;g+=16)r(c,d,g);for(var g=0;5>g;g++){var h=c[g];c[g]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}var i=q(c);return new a(i)}b.exports=i;var j=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],k=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],n=[0,1518500249,1859775393,2400959708,2840853838],o=[1352829926,1548603684,1836072691,2053994217,0],p=function(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b},q=function(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},r=function(a,b,i){for(var p=0;16>p;p++){var q=i+p,r=b[q];b[q]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var s,t,u,v,w,x,y,z,A,B;x=s=a[0],y=t=a[1],z=u=a[2],A=v=a[3],B=w=a[4];for(var C,p=0;80>p;p+=1)C=s+b[i+j[p]]|0,C+=16>p?c(t,u,v)+n[0]:32>p?d(t,u,v)+n[1]:48>p?e(t,u,v)+n[2]:64>p?f(t,u,v)+n[3]:g(t,u,v)+n[4],C=0|C,C=h(C,l[p]),C=C+w|0,s=w,w=v,v=h(u,10),u=t,t=C,C=x+b[i+k[p]]|0,C+=16>p?g(y,z,A)+o[0]:32>p?f(y,z,A)+o[1]:48>p?e(y,z,A)+o[2]:64>p?d(y,z,A)+o[3]:c(y,z,A)+o[4],C=0|C,C=h(C,m[p]),C=C+B|0,x=B,B=A,A=h(z,10),z=y,y=C;C=a[1]+u+A|0,a[1]=a[2]+v+B|0,a[2]=a[3]+w+x|0,a[3]=a[4]+s+y|0,a[4]=a[0]+t+z|0,a[0]=C}}).call(this,a("buffer").Buffer)},{buffer:4}],106:[function(a,b){(function(a){function c(b,c){this._block=new a(b),this._finalSize=c,this._blockSize=b,this._len=0,this._s=0}c.prototype.init=function(){this._s=0,this._len=0},c.prototype.update=function(b,c){"string"==typeof b&&(c=c||"utf8",b=new a(b,c));for(var d=this._len+=b.length,e=this._s=this._s||0,f=0,g=this._block;d>e;){for(var h=Math.min(b.length,f+this._blockSize-e%this._blockSize),i=h-f,j=0;i>j;j++)g[e%this._blockSize+j]=b[j+f];e+=i,f+=i,e%this._blockSize===0&&this._update(g)}return this._s=e,this},c.prototype.digest=function(a){var b=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),b%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(b,this._blockSize-4);var c=this._update(this._block)||this._hash();return a?c.toString(a):c},c.prototype._update=function(){throw new Error("_update must be implemented by subclass")},b.exports=c}).call(this,a("buffer").Buffer)},{buffer:4}],107:[function(a,b,c){var c=b.exports=function(a){var b=c[a.toLowerCase()];if(!b)throw new Error(a+" is not supported (we accept pull requests)");return new b};c.sha1=a("./sha1"),c.sha224=a("./sha224"),c.sha256=a("./sha256"),c.sha384=a("./sha384"),c.sha512=a("./sha512")},{"./sha1":108,"./sha224":109,"./sha256":110,"./sha384":111,"./sha512":112}],108:[function(a,b){(function(c){function d(){return q.length?q.pop().init():this instanceof d?(this._w=p,j.call(this,64,56),this._h=null,void this.init()):new d}function e(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d}function f(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function g(a,b){return a+b|0}function h(a,b){return a<<b|a>>>32-b}var i=a("util").inherits,j=a("./hash"),k=0,l=4,m=8,n=12,o=16,p=new("undefined"==typeof Int32Array?Array:Int32Array)(80),q=[];i(d,j),d.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,j.prototype.init.call(this),this},d.prototype._POOL=q,d.prototype._update=function(a){var b,c,d,i,j,k,l,m,n,o;b=k=this._a,c=l=this._b,d=m=this._c,i=n=this._d,j=o=this._e;for(var p=this._w,q=0;80>q;q++){var r=p[q]=16>q?a.readInt32BE(4*q):h(p[q-3]^p[q-8]^p[q-14]^p[q-16],1),s=g(g(h(b,5),e(q,c,d,i)),g(g(j,r),f(q)));j=i,i=d,d=h(c,30),c=b,b=s}this._a=g(b,k),this._b=g(c,l),this._c=g(d,m),this._d=g(i,n),this._e=g(j,o)},d.prototype._hash=function(){q.length<100&&q.push(this);var a=new c(20);return a.writeInt32BE(0|this._a,k),a.writeInt32BE(0|this._b,l),a.writeInt32BE(0|this._c,m),a.writeInt32BE(0|this._d,n),a.writeInt32BE(0|this._e,o),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":106,buffer:4,util:146}],109:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,64,56)}var e=a("util").inherits,f=a("./sha256"),g=a("./hash"),h=new Array(64);e(d,f),d.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this._len=this._s=0,this},d.prototype._hash=function(){var a=new c(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":106,"./sha256":110,buffer:4,util:146}],110:[function(a,b){(function(c){function d(){this.init(),this._w=p,n.call(this,64,56)}function e(a,b){return a>>>b|a<<32-b}function f(a,b){return a>>>b}function g(a,b,c){return a&b^~a&c}function h(a,b,c){return a&b^a&c^b&c}function i(a){return e(a,2)^e(a,13)^e(a,22)}function j(a){return e(a,6)^e(a,11)^e(a,25)}function k(a){return e(a,7)^e(a,18)^f(a,3)}function l(a){return e(a,17)^e(a,19)^f(a,10)}var m=a("util").inherits,n=a("./hash"),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=new Array(64);m(d,n),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},d.prototype._update=function(a){var b,c,d,e,f,m,n,p,q,r,s=this._w;b=0|this._a,c=0|this._b,d=0|this._c,e=0|this._d,f=0|this._e,m=0|this._f,n=0|this._g,p=0|this._h;for(var t=0;64>t;t++){var u=s[t]=16>t?a.readInt32BE(4*t):l(s[t-2])+s[t-7]+k(s[t-15])+s[t-16];q=p+j(f)+g(f,m,n)+o[t]+u,r=i(b)+h(b,c,d),p=n,n=m,m=f,f=e+q,e=d,d=c,c=b,b=q+r}this._a=b+this._a|0,this._b=c+this._b|0,this._c=d+this._c|0,this._d=e+this._d|0,this._e=f+this._e|0,this._f=m+this._f|0,this._g=n+this._g|0,this._h=p+this._h|0},d.prototype._hash=function(){var a=new c(32);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a.writeInt32BE(this._h,28),a},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":106,buffer:4,util:146}],111:[function(a,b){(function(c){function d(){this.init(),this._w=h,g.call(this,128,112)}var e=a("util").inherits,f=a("./sha512"),g=a("./hash"),h=new Array(160);e(d,f),d.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this._len=this._s=0,this},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(48);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":106,"./sha512":112,buffer:4,util:146}],112:[function(a,b){(function(c){function d(){this.init(),this._w=k,i.call(this,128,112)}function e(a,b,c){return a>>>c|b<<32-c}function f(a,b,c){return a&b^~a&c}function g(a,b,c){return a&b^a&c^b&c}var h=a("util").inherits,i=a("./hash"),j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],k=new Array(160);h(d,i),d.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},d.prototype._update=function(a){var b,c,d,h,i,k,l,m,n,o,p,q,r,s,t,u,v=this._w;b=0|this._a,c=0|this._b,d=0|this._c,h=0|this._d,i=0|this._e,k=0|this._f,l=0|this._g,m=0|this._h,n=0|this._al,o=0|this._bl,p=0|this._cl,q=0|this._dl,r=0|this._el,s=0|this._fl,t=0|this._gl,u=0|this._hl;for(var w=0;80>w;w++){var x,y,z=2*w;if(16>w)x=v[z]=a.readInt32BE(4*z),y=v[z+1]=a.readInt32BE(4*z+4);else{var A=v[z-30],B=v[z-30+1],C=e(A,B,1)^e(A,B,8)^A>>>7,D=e(B,A,1)^e(B,A,8)^e(B,A,7);A=v[z-4],B=v[z-4+1];var E=e(A,B,19)^e(B,A,29)^A>>>6,F=e(B,A,19)^e(A,B,29)^e(B,A,6),G=v[z-14],H=v[z-14+1],I=v[z-32],J=v[z-32+1];y=D+H,x=C+G+(D>>>0>y>>>0?1:0),y+=F,x=x+E+(F>>>0>y>>>0?1:0),y+=J,x=x+I+(J>>>0>y>>>0?1:0),v[z]=x,v[z+1]=y}var K=g(b,c,d),L=g(n,o,p),M=e(b,n,28)^e(n,b,2)^e(n,b,7),N=e(n,b,28)^e(b,n,2)^e(b,n,7),O=e(i,r,14)^e(i,r,18)^e(r,i,9),P=e(r,i,14)^e(r,i,18)^e(i,r,9),Q=j[z],R=j[z+1],S=f(i,k,l),T=f(r,s,t),U=u+P,V=m+O+(u>>>0>U>>>0?1:0);U+=T,V=V+S+(T>>>0>U>>>0?1:0),U+=R,V=V+Q+(R>>>0>U>>>0?1:0),U+=y,V=V+x+(y>>>0>U>>>0?1:0);var W=N+L,X=M+K+(N>>>0>W>>>0?1:0);m=l,u=t,l=k,t=s,k=i,s=r,r=q+U|0,i=h+V+(q>>>0>r>>>0?1:0)|0,h=d,q=p,d=c,p=o,c=b,o=n,n=U+W|0,b=V+X+(U>>>0>n>>>0?1:0)|0}this._al=this._al+n|0,this._bl=this._bl+o|0,this._cl=this._cl+p|0,this._dl=this._dl+q|0,this._el=this._el+r|0,this._fl=this._fl+s|0,this._gl=this._gl+t|0,this._hl=this._hl+u|0,this._a=this._a+b+(this._al>>>0<n>>>0?1:0)|0,this._b=this._b+c+(this._bl>>>0<o>>>0?1:0)|0,this._c=this._c+d+(this._cl>>>0<p>>>0?1:0)|0,this._d=this._d+h+(this._dl>>>0<q>>>0?1:0)|0,this._e=this._e+i+(this._el>>>0<r>>>0?1:0)|0,this._f=this._f+k+(this._fl>>>0<s>>>0?1:0)|0,this._g=this._g+l+(this._gl>>>0<t>>>0?1:0)|0,this._h=this._h+m+(this._hl>>>0<u>>>0?1:0)|0},d.prototype._hash=function(){function a(a,c,d){b.writeInt32BE(a,d),b.writeInt32BE(c,d+4)}var b=new c(64);return a(this._a,this._al,0),a(this._b,this._bl,8),a(this._c,this._cl,16),a(this._d,this._dl,24),a(this._e,this._el,32),a(this._f,this._fl,40),a(this._g,this._gl,48),a(this._h,this._hl,56),b},b.exports=d}).call(this,a("buffer").Buffer)},{"./hash":106,buffer:4,util:146}],113:[function(a,b){"use strict";var c=a("pbkdf2-compat/pbkdf2");b.exports=function(a,b){b=b||{};var d=c(a);return b.pbkdf2=d.pbkdf2,b.pbkdf2Sync=d.pbkdf2Sync,b}},{"pbkdf2-compat/pbkdf2":104}],114:[function(a,b){(function(c,d){"use strict";!function(){var e=("undefined"==typeof window?c:window)||{},f=e.crypto||e.msCrypto||a("crypto");b.exports=function(a){if(f.getRandomValues){var b=new d(a);return f.getRandomValues(b),b}if(f.randomBytes)return f.randomBytes(a);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{buffer:4,crypto:3}],115:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],116:[function(a,b){var c=b.exports,d=(a("events").EventEmitter,a("./lib/request")),e=a("url");c.request=function(a,b){"string"==typeof a&&(a=e.parse(a)),a||(a={}),a.host||a.port||(a.port=parseInt(window.location.port,10)),!a.host&&a.hostname&&(a.host=a.hostname),a.protocol||(a.protocol=a.scheme?a.scheme+":":window.location.protocol),a.host||(a.host=window.location.hostname||window.location.host),/:/.test(a.host)&&(a.port||(a.port=a.host.split(":")[1]),a.host=a.host.split(":")[0]),a.port||(a.port="https:"==a.protocol?443:80);var c=new d(new f,a);return b&&c.on("response",b),c},c.get=function(a,b){a.method="GET";var d=c.request(a,b);return d.end(),d},c.Agent=function(){},c.Agent.defaultMaxSockets=4;var f=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],b=0;b<a.length;b++)try{var c=new window.ActiveXObject(a[b]);return function(){if(c){var d=c;return c=null,d}return new window.ActiveXObject(a[b])}}catch(d){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();c.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}
},{"./lib/request":117,events:115,url:144}],117:[function(a,b){var c=a("stream"),d=a("./response"),e=a("Base64"),f=a("inherits"),g=b.exports=function(a,b){var c=this;c.writable=!0,c.xhr=a,c.body=[],c.uri=(b.protocol||"http:")+"//"+b.host+(b.port?":"+b.port:"")+(b.path||"/"),"undefined"==typeof b.withCredentials&&(b.withCredentials=!0);try{a.withCredentials=b.withCredentials}catch(f){}if(b.responseType)try{a.responseType=b.responseType}catch(f){}if(a.open(b.method||"GET",c.uri,!0),a.onerror=function(){c.emit("error",new Error("Network error"))},c._headers={},b.headers)for(var g=h(b.headers),i=0;i<g.length;i++){var j=g[i];if(c.isSafeRequestHeader(j)){var k=b.headers[j];c.setHeader(j,k)}}b.auth&&this.setHeader("Authorization","Basic "+e.btoa(b.auth));var l=new d;l.on("close",function(){c.emit("close")}),l.on("ready",function(){c.emit("response",l)}),l.on("error",function(a){c.emit("error",a)}),a.onreadystatechange=function(){a.__aborted||l.handle(a)}};f(g,c),g.prototype.setHeader=function(a,b){this._headers[a.toLowerCase()]=b},g.prototype.getHeader=function(a){return this._headers[a.toLowerCase()]},g.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]},g.prototype.write=function(a){this.body.push(a)},g.prototype.destroy=function(){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},g.prototype.end=function(a){void 0!==a&&this.body.push(a);for(var b=h(this._headers),c=0;c<b.length;c++){var d=b[c],e=this._headers[d];if(i(e))for(var f=0;f<e.length;f++)this.xhr.setRequestHeader(d,e[f]);else this.xhr.setRequestHeader(d,e)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(i(this.body[0])){for(var g=[],c=0;c<this.body.length;c++)g.push.apply(g,this.body[c]);this.xhr.send(g)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var j=0,c=0;c<this.body.length;c++)j+=this.body[c].length;for(var g=new this.body[0].constructor(j),l=0,c=0;c<this.body.length;c++)for(var m=this.body[c],f=0;f<m.length;f++)g[l++]=m[f];this.xhr.send(g)}else if(k(this.body[0]))this.xhr.send(this.body[0]);else{for(var g="",c=0;c<this.body.length;c++)g+=this.body[c].toString();this.xhr.send(g)}},g.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],g.prototype.isSafeRequestHeader=function(a){return a?-1===j(g.unsafeHeaders,a.toLowerCase()):!1};var h=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},i=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},k=function(a){return"undefined"!=typeof Blob&&a instanceof Blob?!0:"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer?!0:"undefined"!=typeof FormData&&a instanceof FormData?!0:void 0}},{"./response":118,Base64:119,inherits:121,stream:141}],118:[function(a,b){function c(a){for(var b=a.getAllResponseHeaders().split(/\r?\n/),c={},d=0;d<b.length;d++){var e=b[d];if(""!==e){var f=e.match(/^([^:]+):\s*(.*)/);if(f){var g=f[1].toLowerCase(),i=f[2];void 0!==c[g]?h(c[g])?c[g].push(i):c[g]=[c[g],i]:c[g]=i}else c[e]=!0}}return c}var d=a("stream"),e=a("util"),f=b.exports=function(){this.offset=0,this.readable=!0};e.inherits(f,d);var g={streaming:!0,status2:!0};f.prototype.getResponse=function(a){var b=String(a.responseType).toLowerCase();return"blob"===b?a.responseBlob||a.response:"arraybuffer"===b?a.response:a.responseText},f.prototype.getHeader=function(a){return this.headers[a.toLowerCase()]},f.prototype.handle=function(a){if(2===a.readyState&&g.status2){try{this.statusCode=a.status,this.headers=c(a)}catch(b){g.status2=!1}g.status2&&this.emit("ready")}else if(g.streaming&&3===a.readyState){try{this.statusCode||(this.statusCode=a.status,this.headers=c(a),this.emit("ready"))}catch(b){}try{this._emitData(a)}catch(b){g.streaming=!1}}else 4===a.readyState&&(this.statusCode||(this.statusCode=a.status,this.emit("ready")),this._emitData(a),a.error?this.emit("error",this.getResponse(a)):this.emit("end"),this.emit("close"))},f.prototype._emitData=function(a){var b=this.getResponse(a);return b.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(b,this.offset)),void(this.offset=b.byteLength)):void(b.length>this.offset&&(this.emit("data",b.slice(this.offset)),this.offset=b.length))};var h=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{stream:141,util:146}],119:[function(a,b,c){!function(){function a(a){this.message=a}var b="undefined"!=typeof c?c:this,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var c,e,f=0,g=d,h="";b.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&c>>8-f%1*8)){if(e=b.charCodeAt(f+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|e}return h}),b.atob||(b.atob=function(b){if(b=b.replace(/=+$/,""),b.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var c,e,f=0,g=0,h="";e=b.charAt(g++);~e&&(c=f%4?64*c+e:e,f++%4)?h+=String.fromCharCode(255&c>>(-2*f&6)):0)e=d.indexOf(e);return h})}()},{}],120:[function(a,b){var c=a("http"),d=b.exports;for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);d.request=function(a,b){return a||(a={}),a.scheme="https",c.request.call(this,a,b)}},{http:116}],121:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],122:[function(a,b){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],123:[function(a,b,c){c.endianness=function(){return"LE"},c.hostname=function(){return"undefined"!=typeof location?location.hostname:""},c.loadavg=function(){return[]},c.uptime=function(){return 0},c.freemem=function(){return Number.MAX_VALUE},c.totalmem=function(){return Number.MAX_VALUE},c.cpus=function(){return[]},c.type=function(){return"Browser"},c.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},c.networkInterfaces=c.getNetworkInterfaces=function(){return{}},c.arch=function(){return"javascript"},c.platform=function(){return"browser"},c.tmpdir=c.tmpDir=function(){return"/tmp"},c.EOL="\n"},{}],124:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:125}],125:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],126:[function(a,b,c){(function(a){!function(d){function e(a){throw RangeError(H[a])}function f(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function g(a,b){return f(a.split(G),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:w}function k(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;q>f;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=t>=k?x:k>=t+y?y:k-t,!(n>m);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;q>i;++i)p=a[i],128>p&&u.push(K(p));for(d=f=u.length,f&&u.push(D);q>d;){for(j=v,i=0;q>i;++i)p=a[i],p>=b&&j>p&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;q>i;++i)if(p=a[i],b>p&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=g>=n?x:n>=g+y?y:n-g,!(o>m);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c,r="object"==typeof b&&b&&b.exports==q&&b,s="object"==typeof a&&a;(s.global===s||s.window===s)&&(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^ -~]/,G=/\x2E|\u3002|\uFF0E|\uFF61/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.2.4",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&!q.nodeType)if(r)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],127:[function(a,b){"use strict";function c(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,e,f){b=b||"&",e=e||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(e);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),c(g,n)?d(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var d=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],128:[function(a,b){"use strict";function c(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,g,h){return b=b||"&",g=g||"=",null===a&&(a=void 0),"object"==typeof a?c(f(a),function(f){var h=encodeURIComponent(d(f))+g;return e(a[f])?c(a[f],function(a){return h+encodeURIComponent(d(a))}).join(b):h+encodeURIComponent(d(a[f]))}).join(b):h?encodeURIComponent(d(h))+g+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},f=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],129:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":127,"./encode":128}],130:[function(a,b){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":131}],131:[function(a,b){(function(c){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||c.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}b.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=a("core-util-is");h.inherits=a("inherits");var i=a("./_stream_readable"),j=a("./_stream_writable");h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})}).call(this,a("_process"))},{"./_stream_readable":133,"./_stream_writable":135,_process:125,"core-util-is":136,inherits:121}],132:[function(a,b){function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":134,"core-util-is":136,inherits:121}],133:[function(a,b){(function(c){function d(b){b=b||{};var c=b.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(C||(C=a("string_decoder/").StringDecoder),this.decoder=new C(b.encoding),this.encoding=b.encoding)}function e(a){return this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void A.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&l(a),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=D)a=D;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return y.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?l(a):u(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?c.nextTick(function(){m(a)}):m(a))}function m(a){a.emit("readable")}function n(a,b){b.readingMore||(b.readingMore=!0,c.nextTick(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;b.awaitDrain--,0===b.awaitDrain&&q(a)}}function q(a){function b(a){var b=a.write(c);!1===b&&d.awaitDrain++}var c,d=a._readableState;for(d.awaitDrain=0;d.pipesCount&&null!==(c=a.read());)if(1===d.pipesCount?b(d.pipes,0,null):v(d.pipes,b),a.emit("data",c),d.awaitDrain>0)return;return 0===d.pipesCount?(d.flowing=!1,void(z.listenerCount(a,"data")>0&&s(a))):void(d.ranOut=!0)}function r(){this._readableState.ranOut&&(this._readableState.ranOut=!1,q(this))}function s(a,b){var d=a._readableState;if(d.flowing)throw new Error("Cannot switch to old mode now.");var e=b||!1,f=!1;a.readable=!0,a.pipe=A.prototype.pipe,a.on=a.addListener=A.prototype.on,a.on("readable",function(){f=!0;for(var b;!e&&null!==(b=a.read());)a.emit("data",b);null===b&&(f=!1,a._readableState.needReadable=!0)}),a.pause=function(){e=!0,this.emit("pause")},a.resume=function(){e=!1,f?c.nextTick(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):y.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new y(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,c.nextTick(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e;var x=a("isarray"),y=a("buffer").Buffer;e.ReadableState=d;var z=a("events").EventEmitter;z.listenerCount||(z.listenerCount=function(a,b){return a.listeners(b).length});var A=a("stream"),B=a("core-util-is");B.inherits=a("inherits");var C;B.inherits(e,A),e.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new y(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){C||(C=a("string_decoder/").StringDecoder),this._readableState.decoder=new C(b),this._readableState.encoding=b};var D=8388608;e.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c,d=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l(this),null;if(a=i(a,b),0===a&&b.ended)return c=null,b.length>0&&b.decoder&&(c=t(a,b),b.length-=c.length),0===b.length&&u(this),c;var e=b.needReadable;return b.length-a<=b.highWaterMark&&(e=!0),(b.ended||b.reading)&&(e=!1),e&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),e&&!b.reading&&(a=i(d,b)),c=a>0?t(a,b):null,null===c&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&u(this),c},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){a===k&&f()}function e(){a.end()}function f(){a.removeListener("close",h),a.removeListener("finish",i),a.removeListener("drain",o),a.removeListener("error",g),a.removeListener("unpipe",d),k.removeListener("end",e),k.removeListener("end",f),(!a._writableState||a._writableState.needDrain)&&o()}function g(b){j(),a.removeListener("error",g),0===z.listenerCount(a,"error")&&a.emit("error",b)}function h(){a.removeListener("finish",i),j()}function i(){a.removeListener("close",h),j()}function j(){k.unpipe(a)}var k=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=a;break;case 1:l.pipes=[l.pipes,a];break;default:l.pipes.push(a)}l.pipesCount+=1;var m=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,n=m?e:f;l.endEmitted?c.nextTick(n):k.once("end",n),a.on("unpipe",d);var o=p(k);return a.on("drain",o),a._events&&a._events.error?x(a._events.error)?a._events.error.unshift(g):a._events.error=[g,a._events.error]:a.on("error",g),a.once("close",h),a.once("finish",i),a.emit("pipe",k),l.flowing||(this.on("readable",r),l.flowing=!0,c.nextTick(function(){q(k)})),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=A.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||s(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):this.read(0))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){s(this),this.read(0),this.emit("resume")},e.prototype.pause=function(){s(this,!0),this.emit("pause")},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&"undefined"==typeof this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(){c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("_process"))},{_process:125,buffer:4,"core-util-is":136,events:115,inherits:121,isarray:122,stream:141,"string_decoder/":142}],134:[function(a,b){function c(a,b){this.afterTransform=function(a,c){return d(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a);var b=(this._transformState=new c(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./_stream_duplex"),h=a("core-util-is");h.inherits=a("inherits"),h.inherits(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./_stream_duplex":131,"core-util-is":136,inherits:121}],135:[function(a,b){(function(c){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=a.decodeStrings===!1;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(b,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function f(b){var c=a("./_stream_duplex");return this instanceof f||this instanceof c?(this._writableState=new e(b,this),this.writable=!0,void w.call(this)):new f(b)}function g(a,b,d){var e=new Error("write after end");a.emit("error",e),c.nextTick(function(){d(e)})}function h(a,b,d,e){var f=!0;if(!u.isBuffer(d)&&"string"!=typeof d&&null!==d&&void 0!==d&&!b.objectMode){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),c.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new u(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),u.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing?b.buffer.push(new d(c,e,f)):k(a,b,g,c,e,f),h}function k(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function l(a,b,d,e,f){d?c.nextTick(function(){f(e)}):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,b){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),b)l(a,d,e,b,f);else{var g=r(a,d);g||d.bufferProcessing||!d.buffer.length||q(a,d),e?c.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),d(),c&&s(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback,h=b.objectMode?1:e.length;if(k(a,b,h,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function r(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function s(a,b){var c=r(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function t(a,b,d){b.ending=!0,s(a,b),d&&(b.finished?c.nextTick(d):a.once("finish",d)),b.ended=!0}b.exports=f;var u=a("buffer").Buffer;f.WritableState=e;var v=a("core-util-is");v.inherits=a("inherits");var w=a("stream");v.inherits(f,w),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),u.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(e=j(this,d,a,b,c)),e},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),"undefined"!=typeof a&&null!==a&&this.write(a,b),d.ending||d.finished||t(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":131,_process:125,buffer:4,"core-util-is":136,inherits:121,stream:141}],136:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,a("buffer").Buffer)},{buffer:4}],137:[function(a,b){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":132}],138:[function(a,b,c){var d=a("stream");c=b.exports=a("./lib/_stream_readable.js"),c.Stream=d,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":131,"./lib/_stream_passthrough.js":132,"./lib/_stream_readable.js":133,"./lib/_stream_transform.js":134,"./lib/_stream_writable.js":135,stream:141}],139:[function(a,b){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":134}],140:[function(a,b){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":135}],141:[function(a,b){function c(){d.call(this)}b.exports=c;var d=a("events").EventEmitter,e=a("inherits");e(c,d),c.Readable=a("readable-stream/readable.js"),c.Writable=a("readable-stream/writable.js"),c.Duplex=a("readable-stream/duplex.js"),c.Transform=a("readable-stream/transform.js"),c.PassThrough=a("readable-stream/passthrough.js"),c.Stream=c,c.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()}function e(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===d.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",e),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)
}var j=this;j.on("data",c),a.on("drain",e),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{events:115,inherits:121,"readable-stream/duplex.js":130,"readable-stream/passthrough.js":137,"readable-stream/readable.js":138,"readable-stream/transform.js":139,"readable-stream/writable.js":140}],142:[function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=a("buffer").Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:4}],143:[function(a,b,c){function d(){throw new Error("tty.ReadStream is not implemented")}function e(){throw new Error("tty.ReadStream is not implemented")}c.isatty=function(){return!1},c.ReadStream=d,c.WriteStream=e},{}],144:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname=this.hostname.length>u?"":this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.path=c.search?"/"+c.search:null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:126,querystring:129}],145:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],146:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":145,_process:125,inherits:121}],147:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)b.push(c);return b},forEach=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c++)b(a[c],c,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,b,c){Object.defineProperty(a,b,{writable:!0,enumerable:!1,configurable:!0,value:c})}}catch(a){return function(a,b,c){a[b]=c}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(a){return this instanceof Script?void(this.code=a):new Script(a)};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var b=document.createElement("iframe");b.style||(b.style={}),b.style.display="none",document.body.appendChild(b);var c=b.contentWindow,d=c.eval,e=c.execScript;!d&&e&&(e.call(c,"null"),d=c.eval),forEach(Object_keys(a),function(b){c[b]=a[b]}),forEach(globals,function(b){a[b]&&(c[b]=a[b])});var f=Object_keys(c),g=d.call(c,this.code);return forEach(Object_keys(c),function(b){(b in a||-1===indexOf(f,b))&&(a[b]=c[b])}),forEach(globals,function(b){b in a||defineProp(a,b,c[b])}),document.body.removeChild(b),g},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var b=Script.createContext(a),c=this.runInContext(b);return forEach(Object_keys(b),function(c){a[c]=b[c]}),c},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(b){var c=Script(b);return c[a].apply(c,[].slice.call(arguments,1))}}),exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var b=new Context;return"object"==typeof a&&forEach(Object_keys(a),function(c){b[c]=a[c]}),b}},{indexof:148}],148:[function(a,b){var c=[].indexOf;b.exports=function(a,b){if(c)return a.indexOf(b);for(var d=0;d<a.length;++d)if(a[d]===b)return d;return-1}},{}],149:[function(a,b,c){var d=a("net"),e=a("bindings")("hiredis.node");c.Reader=e.Reader,c.createConnection=function(a,b){var c=d.createConnection(a||6379,b),f=new e.Reader,g=c.write;return c.write=function(){var a,b=arguments;for(g.call(c,"*"+b.length+"\r\n"),a=0;a<b.length;a++){var d=b[a];g.call(c,"$"+d.length+"\r\n"+d+"\r\n")}},c.on("data",function(a){var b;f.feed(a);try{for(;void 0!==(b=f.get());)c.emit("reply",b)}catch(d){f=null,c.emit("error",d),c.destroy()}}),c}},{bindings:150,net:1}],150:[function(a,b,c){(function(d,e){function f(b){"string"==typeof b?b={bindings:b}:b||(b={}),b.__proto__=l,b.module_root||(b.module_root=c.getRoot(c.getFileName())),".node"!=h.extname(b.bindings)&&(b.bindings+=".node");for(var d,e,f,g=[],j=0,k=b.try.length;k>j;j++){d=i.apply(null,b.try[j].map(function(a){return b[a]||a})),g.push(d);try{return e=b.path?a.resolve(d):a(d),b.path||(e.path=d),e}catch(m){if(!/not find/i.test(m.message))throw m}}throw f=new Error("Could not locate the bindings file. Tried:\n"+g.map(function(a){return b.arrow+a}).join("\n")),f.tries=g,f}var g=a("fs"),h=a("path"),i=h.join,j=h.dirname,k=g.existsSync||h.existsSync,l={arrow:d.env.NODE_BINDINGS_ARROW||"  ",compiled:d.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:d.platform,arch:d.arch,version:d.versions.node,bindings:"bindings.node","try":[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};b.exports=c=f,c.getFileName=function(a){var b,c=Error.prepareStackTrace,d=Error.stackTraceLimit,f={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(c,d){for(var f=0,g=d.length;g>f;f++)if(b=d[f].getFileName(),b!==e){if(!a)return;if(b!==a)return}},Error.captureStackTrace(f),f.stack,Error.prepareStackTrace=c,Error.stackTraceLimit=d,b},c.getRoot=function(a){for(var b,c=j(a);;){if("."===c&&(c=d.cwd()),k(i(c,"package.json"))||k(i(c,"node_modules")))return c;if(b===c)throw new Error('Could not find module root given file: "'+a+'". Do you have a `package.json` file? ');b=c,c=i(c,"..")}}}).call(this,a("_process"),"/node_modules/hiredis/node_modules/bindings/bindings.js")},{_process:125,fs:1,path:124}],151:[function(a,b,c){(function(b){function d(){var a,b,c=arguments;for(b=0;b<arguments.length;b++)a=c[b],a&&"object"==typeof a&&"function"==typeof a.toJSON&&(c[b]=a.toJSON());return k.apply(null,c)}var e,f=a("buffer"),g=a("events");e=a(b+"/../build/Release/msgpackBinding");var h;try{h=a("util")}catch(j){h=a("sys")}var k=e.pack,l=e.unpack;c.pack=d,c.unpack=l;var m=function(a){var b=this;g.EventEmitter.call(b),b.buf=null,b.send=function(b){var c=[d(b)];for(i=1;i<arguments.length;i++)c.push(arguments[i]);return a.write.apply(a,c)},a.addListener("data",function(a){if(b.buf){var c=new f.Buffer(b.buf.length+a.length);b.buf.copy(c,0,0,b.buf.length),a.copy(c,b.buf.length,0,a.length),b.buf=c}else b.buf=a;for(;b.buf&&b.buf.length>0;){var d=l(b.buf);if(!d)break;b.emit("msg",d),b.buf=l.bytes_remaining>0?b.buf.slice(b.buf.length-l.bytes_remaining,b.buf.length):null}})};h.inherits(m,g.EventEmitter),c.Stream=m}).call(this,"/node_modules/msgpack/lib")},{buffer:4,events:115,sys:146,util:146}],152:[function(a,b){b.exports={Server:a("./src/ReckonerServer"),GameObject:a("./src/game/GameObject"),PomeloApp:a("./src/pomelo/ReckonerPomeloApp"),EntryHandler:a("./src/pomelo/ReckonerEntryHandler"),RemoteHandler:a("./src/pomelo/ReckonerRemoteHandler"),GateHandler:a("./src/pomelo/ReckonerGateHandler")}},{"./src/ReckonerServer":241,"./src/game/GameObject":242,"./src/pomelo/ReckonerEntryHandler":244,"./src/pomelo/ReckonerGateHandler":245,"./src/pomelo/ReckonerPomeloApp":246,"./src/pomelo/ReckonerRemoteHandler":247}],153:[function(a,b){b.exports=a("./src/HashArray.js")},{"./src/HashArray.js":154}],154:[function(a,b){var c=a("jclass"),d=c._extend({init:function(a,b,c){a=a instanceof Array?a:[a],this._map={},this._list=[],this.callback=b,this.keyFields=a,this.isHashArray=!0,this.options=c||{ignoreDuplicates:!1},b&&b("construct")},addOne:function(a){var b=!1;for(var c in this.keyFields){c=this.keyFields[c];var d=this.objectAt(a,c);if(d)if(this._map[d]){if(this.options.ignoreDuplicates)return;if(-1!=this._map[d].indexOf(a)){b=!0;continue}this._map[d].push(a)}else this._map[d]=[a]}b&&-1!=this._list.indexOf(a)||this._list.push(a)},add:function(){for(var a=0;a<arguments.length;a++)this.addOne(arguments[a]);return this.callback&&this.callback("add",Array.prototype.slice.call(arguments,0)),this},addAll:function(a){if(a.length<100)this.add.apply(this,a);else for(var b=0;b<a.length;b++)this.add(a[b]);return this},addMap:function(a,b){return this._map[a]=b,this.callback&&this.callback("addMap",{key:a,obj:b}),this},intersection:function(a){var b=this;if(!a||!a.isHashArray)throw Error("Cannot HashArray.intersection() on a non-hasharray object. You passed in: ",a);var c=this.clone(null,!0),d=this.clone(null,!0).addAll(this.all.concat(a.all));return d.all.forEach(function(d){b.collides(d)&&a.collides(d)&&c.add(d)}),c},complement:function(a){if(!a||!a.isHashArray)throw Error("Cannot HashArray.complement() on a non-hasharray object. You passed in: ",a);var b=this.clone(null,!0);return this.all.forEach(function(c){a.collides(c)||b.add(c)}),b},get:function(a){return this._map[a]instanceof Array&&1==this._map[a].length?this._map[a][0]:this._map[a]},getAll:function(a){if(a=a instanceof Array?a:[a],"*"==a[0])return this.all;var b=new d(this.keyFields);for(var c in a)b.add.apply(b,this.getAsArray(a[c]));return b.all},getAsArray:function(a){return this._map[a]||[]},getUniqueRandomIntegers:function(a,b,c){var d=[],e={};for(a=Math.min(Math.max(c-b,1),a);d.length<a;){var f=Math.floor(b+Math.random()*(c+1));e[f]||(e[f]=!0,d.push(f))}return d},sample:function(a,b){var c=this.all,d=[];b&&(c=this.getAll(b));for(var e=this.getUniqueRandomIntegers(a,0,c.length-1),f=0;f<e.length;f++)d.push(c[e[f]]);return d},has:function(a){return this._map.hasOwnProperty(a)},collides:function(a){for(var b in this.keyFields)if(this.has(this.objectAt(a,this.keyFields[b])))return!0;return!1},hasMultiple:function(a){return this._map[a]instanceof Array},removeByKey:function(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b],d=this._map[c].concat();if(d){a=a.concat(d);for(var e in d){var f=d[e];for(var g in this.keyFields){var h=this.objectAt(f,this.keyFields[g]);if(h&&this._map[h]){var g=this._map[h].indexOf(f);-1!=g&&this._map[h].splice(g,1),0==this._map[h].length&&delete this._map[h]}}this._list.splice(this._list.indexOf(f),1)}}delete this._map[c]}return this.callback&&this.callback("removeByKey",a),this},remove:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];for(var c in this.keyFields){var d=this.objectAt(b,this.keyFields[c]);if(d){var c=this._map[d].indexOf(b);-1!=c&&this._map[d].splice(c,1),0==this._map[d].length&&delete this._map[d]}}this._list.splice(this._list.indexOf(b),1)}return this.callback&&this.callback("remove",arguments),this},removeAll:function(){var a=this._list.concat();return this._map={},this._list=[],this.callback&&this.callback("remove",a),this},objectAt:function(a,b){if("string"==typeof b)return a[b];for(var c=b.concat();c.length&&a;)a=a[c.shift()];return a},forEach:function(a,b){a=a instanceof Array?a:[a];var c=this.getAll(a);return c.forEach(b),this},forEachDeep:function(a,b,c){a=a instanceof Array?a:[a];var d=this,e=this.getAll(a);return e.forEach(function(a){c(d.objectAt(a,b),a)}),this},clone:function(a,b){var c=new d(this.keyFields.concat(),a?a:this.callback);return b||c.add.apply(c,this.all.concat()),c},sum:function(a,b,c){var d=this,e=0;return this.forEachDeep(a,b,function(a,b){void 0!==c&&(a*=d.objectAt(b,c)),e+=a}),e},average:function(a,b,c){var d=0,e=0,f=0,g=this;return void 0!==c&&this.forEachDeep(a,c,function(a){f+=a}),this.forEachDeep(a,b,function(a,b){void 0!==c&&(a*=g.objectAt(b,c)/f),d+=a,e++}),void 0!==c?d:d/e},filter:function(a,b){function c(a){var c=e.objectAt(a,b);return void 0!==c&&c!==!1}var e=this,f="function"==typeof b?b:c,g=new d(this.keyFields);return g.addAll(this.getAll(a).filter(f)),g}});Object.defineProperty(d.prototype,"all",{get:function(){return this._list}}),Object.defineProperty(d.prototype,"map",{get:function(){return this._map}}),b.exports=d,"undefined"!=typeof window&&(window.HashArray=d)},{jclass:155}],155:[function(a,b,c){!function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof c?(c=a(),"object"==typeof b&&(b.exports=c)):window?window.Class=a():"object"==typeof console&&console.error instanceof Function&&console.error("cannot determine environment")}(function(){var a=function(a){return a instanceof Function},b=function(a){return void 0===a},c=function(a){return"object"==typeof a},d=function(a){return c(a)&&a.descriptor===!0},e=function(a){var d,e,f,g,h=Array.prototype.slice.call(arguments,1);for(d in h){if(e=h[d],!c(e))return;for(f in e)g=a[f],b(g)&&(a[f]=e[f])}return a},f={_isClassObject:!1},g=!1,h=function(){};return h._subClasses=[],h._extend=function(c,i,j){b(c)&&(c={}),b(i)&&(i={}),b(j)&&(j={}),e(j,f);var k=this,l=function(){g||(this._class=l,this.init&&this.init.apply(this,arguments))};g=!0;var m=new k;g=!1;var n=k.prototype;l.prototype=m,l.prototype.constructor=l,l._superClass=k,l._subClasses=[],k._subClasses.push(l),l._extend=k._extend;var o,p,q;for(o in c)p=c[o],d(p)?Object.defineProperty(m,o,p):(m[o]=p,q=n[o],a(p)&&a(q)&&p!==q&&(p._super=q));if(!j._isClassObject){var r=b(k._members)?h:k._members._class,s={_isClassObject:!0},t=r._extend(i,{},s);l._members=new t}return l._extends=function(a){return this._superClass==h?!1:a==this._superClass||a==h?!0:this._superClass._extends(a)},l},h._convert=function(a,b){var c=a.prototype;return c.init=function(){var b=this;this._origin=h._construct(a,arguments),Object.keys(this._origin).forEach(function(a){b._origin.hasOwnProperty(a)&&Object.defineProperty(b,a,{get:function(){return b._origin[a]}})})},h._extend(c,{},b)},h._construct=function(a,b){var c=function(){return a.apply(this,b||[])};return c.prototype=a.prototype,new c},h})},{}],156:[function(a,b){!function(a){function c(a,b){if("object"!==e(a))return b;for(var d in b)a[d]="object"===e(a[d])&&"object"===e(b[d])?c(a[d],b[d]):b[d];return a}function d(a,b,d){var g=d[0],h=d.length;(a||"object"!==e(g))&&(g={});for(var i=0;h>i;++i){var j=d[i],k=e(j);if("object"===k)for(var l in j){var m=a?f.clone(j[l]):j[l];g[l]=b?c(g[l],m):m}}return g}function e(a){return{}.toString.call(a).slice(8,-1).toLowerCase()}var f=function(a){return d(a===!0,!1,arguments)},g="merge";f.recursive=function(a){return d(a===!0,!0,arguments)},f.clone=function(a){var b,c,d=a,g=e(a);if("array"===g)for(d=[],c=a.length,b=0;c>b;++b)d[b]=f.clone(a[b]);else if("object"===g){d={};for(b in a)d[b]=f.clone(a[b])}return d},a?b.exports=f:window[g]=f}("object"==typeof b&&b&&"object"==typeof b.exports&&b.exports)},{}],157:[function(a,b){function c(){c.init.call(this)}var d={};d.isObject=function(a){return"object"==typeof a&&null!==a},d.isNumber=function(a){return"number"==typeof a},d.isUndefined=function(a){return void 0===a},d.isFunction=function(a){return"function"==typeof a},b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(a){if(!d.isNumber(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,f,g,h;if(this._events||(this._events={}),"error"===a&&!this._events.error)throw b=arguments[1],b instanceof Error?b:Error('Uncaught, unspecified "error" event.');if(c=this._events[a],d.isUndefined(c))return!1;if(d.isFunction(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,f=new Array(e-1),g=1;e>g;g++)f[g-1]=arguments[g];c.apply(this,f)}else if(d.isObject(c)){for(e=arguments.length,f=new Array(e-1),g=1;e>g;g++)f[g-1]=arguments[g];for(h=c.slice(),e=h.length,g=0;e>g;g++)h[g].apply(this,f)}return!0},c.prototype.addListener=function(a,b){var e;if(!d.isFunction(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d.isFunction(b.listener)?b.listener:b),this._events[a]?d.isObject(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,d.isObject(this._events[a])&&!this._events[a].warned){var e;e=d.isUndefined(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,d.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),d.isFunction(console.trace)&&console.trace())
}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d.isFunction(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,f,g;if(!d.isFunction(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,e=-1,c===b||d.isFunction(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(d.isObject(c)){for(g=f;g-->0;)if(c[g]===b||c[g].listener&&c[g].listener===b){e=g;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d.isFunction(c))this.removeListener(a,c);else if(Array.isArray(c))for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d.isFunction(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d.isFunction(a._events[b])?1:a._events[b].length:0}},{}],158:[function(a,b){b.exports=a("./lib/pomelo")},{"./lib/pomelo":162}],159:[function(a,b){(function(c,d){var e=a("./util/utils"),f=a("pomelo-logger").getLogger("pomelo",d),g=a("events").EventEmitter,h=a("./util/events"),i=a("./util/appUtil"),j=a("./util/constants"),k=a("./common/manager/appManager"),l=a("path"),m=b.exports={},n=1,o=2,p=3,q=4;m.init=function(b){b=b||{},this.options=b,this.loaded=[],this.components={},this.settings={};var c=b.base||l.dirname(a.main.filename);this.set(j.RESERVED.BASE,c,!0),this.event=new g,this.serverId=null,this.serverType=null,this.curServer=null,this.startTime=null,this.master=null,this.servers={},this.serverTypeMaps={},this.serverTypes=[],this.lifecycleCbs={},this.clusterSeq={},i.defaultConfiguration(this),this.state=n,f.info("Application initialized. Server ID: %j",this.getServerId())},m.getBase=function(){return this.get(j.RESERVED.BASE)},m.require=function(b){return a(l.join(m.getBase(),b))},m.configureLogger=function(a){if("off"!==c.env.POMELO_LOGGER){var b=this.getBase(),d=this.get(j.RESERVED.ENV),e=l.join(b,j.FILEPATH.LOG),f=l.join(b,j.FILEPATH.CONFIG_DIR,d,l.basename(j.FILEPATH.LOG));fs.existsSync(e)?a.configure(e,{serverId:this.serverId,base:b}):fs.existsSync(f)?a.configure(f,{serverId:this.serverId,base:b}):a.error("logger file path configuration is error.")}},m.filter=function(a){this.before(a),this.after(a)},m.before=function(a){v(this,j.KEYWORDS.BEFORE_FILTER,a)},m.after=function(a){v(this,j.KEYWORDS.AFTER_FILTER,a)},m.globalFilter=function(a){this.globalBefore(a),this.globalAfter(a)},m.globalBefore=function(a){v(this,j.KEYWORDS.GLOBAL_BEFORE_FILTER,a)},m.globalAfter=function(a){v(this,j.KEYWORDS.GLOBAL_AFTER_FILTER,a)},m.rpcBefore=function(a){v(this,j.KEYWORDS.RPC_BEFORE_FILTER,a)},m.rpcAfter=function(a){v(this,j.KEYWORDS.RPC_AFTER_FILTER,a)},m.rpcFilter=function(a){this.rpcBefore(a),this.rpcAfter(a)},m.load=function(a,b,c){if(!a)throw Error("Name was not defined in call to app.load(...)");return"string"!=typeof a&&(c=b,b=a,a="string"==typeof b.name?b.name:null),console.log("Attempting to load: ",a,b,c),"function"==typeof b&&(b=b(this,c)),a||"string"!=typeof b.name||(a=b.name),a&&this.components[a]?void f.warn("Application.load(): ignoring duplicate component: %j",a):(this.loaded.push(b),a&&(this.components[a]=b),this)},m.loadConfigBaseApp=function(b,c){var d=this.get(j.RESERVED.ENV),e=l.join(m.getBase(),c),g=l.join(m.getBase(),j.FILEPATH.CONFIG_DIR,d,l.basename(c));if(fs.existsSync(e)){var h=a(e);this.set(b,h[d]||h)}else if(fs.existsSync(g)){var i=a(g);this.set(b,i)}else f.error("invalid configuration with file path: %s",b)},m.loadConfig=function(b,c){c=a(c),c=c[this.get(j.RESERVED.ENV)]||c,this.set(b,c)},m.setConfig=function(a,b){b=b[this.get(j.RESERVED.ENV)]||b,console.log("Setting: ",a,b),this.set(a,b)},m.route=function(a,b){var c=this.get(j.KEYWORDS.ROUTE);return c||(c={},this.set(j.KEYWORDS.ROUTE,c)),c[a]=b,this},m.beforeStopHook=function(a){f.warn("this method was deprecated in pomelo 0.8"),a&&"function"==typeof a&&this.set(j.KEYWORDS.BEFORE_STOP_HOOK,a)},m.start=function(a){if(console.log("Starting Pomelo App..."),this.startTime=Date.now(),this.state>n)return void e.invokeCallback(a,new Error("application has already start."));var b=this;i.startByType(b,function(){i.loadDefaultComponents(b);var c=function(){i.optComponents(b.loaded,j.RESERVED.START,function(c){b.state=o,c?e.invokeCallback(a,c):(f.info("%j enter after start...",b.getServerId()),b.afterStart(a))})},d=b.lifecycleCbs[j.LIFECYCLE.BEFORE_STARTUP];d?d.call(null,b,c):c()})},m.afterStart=function(a){if(this.state!==o)return void e.invokeCallback(a,new Error("Application is not running now."));var b=this.lifecycleCbs[j.LIFECYCLE.AFTER_STARTUP],c=this;i.optComponents(this.loaded,j.RESERVED.AFTER_START,function(d){c.state=p;var g=c.getServerId();d||f.info("%j finished start",g),b?b.call(null,c,function(){e.invokeCallback(a,d)}):e.invokeCallback(a,d);var i=Date.now()-c.startTime;f.info("Application %j started in %s ms",g,i),c.event.emit(h.START_SERVER,g)})},m.stop=function(a){if(this.state>p)return void f.warn("[pomelo application] application is not running now.");this.state=q;var b=this;this.stopTimer=setTimeout(function(){c.exit(0)},j.TIME.TIME_WAIT_STOP);var d=function(){b.stopTimer&&clearTimeout(b.stopTimer)},g=function(){i.stopComps(b.loaded,0,a,function(){d(),a&&c.exit(0)})},h=this.get(j.KEYWORDS.BEFORE_STOP_HOOK),k=this.lifecycleCbs[j.LIFECYCLE.BEFORE_SHUTDOWN];k?k.call(null,this,g,d):h?e.invokeCallback(h,b,g,d):g()},m.set=function(a,b,c){return 1===arguments.length?this.settings[a]:(this.settings[a]=b,c&&(this[a]=b),this)},m.get=function(a){return this.settings[a]},m.enabled=function(a){return!!this.get(a)},m.disabled=function(a){return!this.get(a)},m.enable=function(a){return this.set(a,!0)},m.disable=function(a){return this.set(a,!1)},m.configure=function(a,b,c){var d=[].slice.call(arguments);return c=d.pop(),a=b=j.RESERVED.ALL,d.length>0&&(a=d[0]),d.length>1&&(b=d[1]),(a===j.RESERVED.ALL||t(this.settings.env,a))&&(b===j.RESERVED.ALL||t(this.settings.serverType,b))&&c.call(this),this},m.registerAdmin=function(a,b,c){var d=this.get(j.KEYWORDS.MODULE);d||(d={},this.set(j.KEYWORDS.MODULE,d)),"string"!=typeof a&&(c=b,b=a,b&&(a=b.moduleId)),a&&(d[a]={moduleId:a,module:b,opts:c})},m.use=function(b,c){if(!b.components)return void f.error("Invalid plugin definition, no plugin.components object exists");var d=this;c=c||{};var e=l.dirname(b.components);return fs.existsSync(b.components)?(fs.readdirSync(b.components).forEach(function(b){if(/\.js$/.test(b)){var g=l.basename(b,".js"),h=c[g]||{},i=l.join(e,j.DIR.COMPONENT,b);fs.existsSync(i)?d.load(a(i),h):f.error("Component %s does not exist at %s",g,i)}}),b.events?fs.existsSync(b.events)?void fs.readdirSync(b.events).forEach(function(b){if(/\.js$/.test(b)){var c=l.join(e,j.DIR.EVENT,b);fs.existsSync(c)?u(a(c),d):f.error("events %s not exist at %s",b,c)}}):void f.error("Failed to find plugin.events at path: %s",b.events):void 0):void f.error("Failed to find plugin.components in file path: %s",b.components)},m.transaction=function(a,b,c,d){k.transaction(a,b,c,d)},m.getMaster=function(){return this.master},m.getCurServer=function(){return this.curServer},m.getServerId=function(){return this.serverId},m.getServerType=function(){return this.serverType},m.getServers=function(){return this.servers},m.getServersFromConfig=function(){return this.get(j.KEYWORDS.SERVER_MAP)},m.getServerTypes=function(){return this.serverTypes},m.getServerById=function(a){return this.servers[a]},m.getServerFromConfig=function(a){return this.get(j.KEYWORDS.SERVER_MAP)[a]},m.getServersByType=function(a){return this.serverTypeMaps[a]},m.isFrontend=function(a){return a=a||this.getCurServer(),!!a&&"true"===a.frontend},m.isBackend=function(a){return a=a||this.getCurServer(),!!a&&!a.frontend},m.isMaster=function(){return this.serverType===j.RESERVED.MASTER},m.addServers=function(a){if(a&&a.length){for(var b,c,d=0,e=a.length;e>d;d++)b=a[d],this.servers[b.id]=b,c=this.serverTypeMaps[b.serverType],c||(this.serverTypeMaps[b.serverType]=c=[]),r(c,b),this.serverTypes.indexOf(b.serverType)<0&&this.serverTypes.push(b.serverType);this.event.emit(h.ADD_SERVERS,a)}},m.removeServers=function(a){if(a&&a.length){for(var b,c,d,e=0,f=a.length;f>e;e++)b=a[e],c=this.servers[b],c&&(delete this.servers[b],d=this.serverTypeMaps[c.serverType],s(d,b));this.event.emit(h.REMOVE_SERVERS,a)}},m.replaceServers=function(a){if(a){this.servers=a,this.serverTypeMaps={},this.serverTypes=[];var b=[];for(var c in a){var d=a[c],e=d[j.RESERVED.SERVER_TYPE],f=this.serverTypeMaps[e];f||(this.serverTypeMaps[e]=f=[]),this.serverTypeMaps[e].push(d),this.serverTypes.indexOf(e)<0&&this.serverTypes.push(e),b.push(d)}this.event.emit(h.REPLACE_SERVERS,b)}},m.addCrons=function(a){return a&&a.length?void this.event.emit(h.ADD_CRONS,a):void f.warn("crons is not defined.")},m.removeCrons=function(a){return a&&a.length?void this.event.emit(h.REMOVE_CRONS,a):void f.warn("ids is not defined.")};var r=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].id===b.id)return void(a[c]=b);a.push(b)},s=function(a,b){if(a&&a.length)for(var c=0,d=a.length;d>c;c++)if(a[c].id===b)return void a.splice(c,1)},t=function(a,b){if(!b)return!1;for(var c=b.split("|"),d=0,e=c.length;e>d;d++)if(a===c[d])return!0;return!1},u=function(a,b){var c=new a(b);for(var d in c)"function"==typeof c[d]&&b.event.on(d,c[d].bind(c))},v=function(a,b,c){var d=a.get(b);d||(d=[],a.set(b,d)),d.push(c)}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/lib/application.js")},{"./common/manager/appManager":160,"./util/appUtil":164,"./util/constants":165,"./util/events":166,"./util/utils":168,_process:125,events:115,path:124,"pomelo-logger":229}],160:[function(a,b){(function(c,d){var e=a("async"),f=a("../../util/utils"),g=a("pomelo-logger").getLogger("pomelo",d),h=a("pomelo-logger").getLogger("transaction-log",d),i=a("pomelo-logger").getLogger("transaction-error-log",d),j=b.exports;j.transaction=function(a,b,d,j){if(j||(j=1),"string"!=typeof a)return void g.error("Transaction name formatting error, name was not a string: %s.",a);if("object"!=typeof b)return void g.error("Transaction conditions error, conditions was not an object: %j",b);if("object"!=typeof d)return void g.error("Transaction handlers error, handlers was not an object: %j",d);var k=[],l=[],m=[],n=[];for(var o in b){if("string"!=typeof o||"function"!=typeof b[o])return void g.error("Transaction conditions object format error. Condition '%s' was not a function: %j.",o,b[o]);m.push(o),k.push(b[o])}var p=0;e.forEachSeries(k,function(b,c){b(c),h.info("[%s]:[%s] condition is executed.",a,m[p]),p++},function(b){return b?void c.nextTick(function(){h.error("[%s]:[%s] condition executed with err: %j.",a,m[--p],b.stack);var c={name:a,method:m[p],time:Date.now(),type:"condition",description:b.stack};i.error(JSON.stringify(c))}):void c.nextTick(function(){for(var b in d){if("string"!=typeof b||"function"!=typeof d[b])return void g.error("Transaction handlers object format error. Handler '%s' was not a function: %j.",b,d[b]);n.push(b),l.push(d[b])}var k=!0,m=j;e.whilst(function(){return j>0&&k},function(b){var d=0;j--,e.forEachSeries(l,function(b,c){b(c),h.info("[%s]:[%s] handler is executed.",a,n[d]),d++},function(e){return e?void c.nextTick(function(){h.error("[%s]:[%s]:[%s] handler executed with error: %j.",a,n[--d],m-j,e.stack);var c={name:a,method:n[d],retry:m-j,time:Date.now(),type:"handler",description:e.stack};i.error(JSON.stringify(c)),f.invokeCallback(b)}):(k=!1,f.invokeCallback(b),void c.nextTick(function(){h.info("[%s] all conditions and handlers executed successfully.",a)}))})},function(a){a&&g.error("Transaction process executed with error: %j",a)})})})}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/lib/common/manager/appManager.js")},{"../../util/utils":168,_process:125,async:169,"pomelo-logger":229}],161:[function(a,b){(function(c,d){var e=a("child_process"),f=a("pomelo-logger").getLogger("pomelo",d),g=b.exports,h=a("util"),i=a("../util/utils"),j=a("../util/constants"),k=j.RESERVED.ENV_DEV,l=a("os"),m={},n=a("../pomelo");g.runServers=function(a){var b,c,d=a.startId||a.type;switch(d){case j.RESERVED.MASTER:break;case j.RESERVED.ALL:c=a.getServersFromConfig();for(var e in c)this.run(a,c[e]);break;default:if(b=a.getServerFromConfig(d))this.run(a,b);else{c=a.get(j.RESERVED.SERVERS)[d];for(var f=0;f<c.length;f++)this.run(a,c[f])}}},g.run=function(a,b,d){k=a.get(j.RESERVED.ENV);var e,f;if(i.isLocal(b.host)){var l=[];b.args&&l.push("string"==typeof b.args?b.args.trim():b.args),e=a.get(j.RESERVED.MAIN),l.push(e),l.push(h.format("env=%s",k));for(f in b)f===j.RESERVED.CPU&&(m[b.id]=b[f]),l.push(h.format("%s=%s",f,b[f]));g.localrun(c.execPath,null,l,d)}else{e=h.format('cd "%s" && "%s"',a.getBase(),c.execPath);var n=b.args;void 0!==n&&(e+=n),e+=h.format(' "%s" env=%s ',a.get(j.RESERVED.MAIN),k);for(f in b)f===j.RESERVED.CPU&&(m[b.id]=b[f]),e+=h.format(" %s=%s ",f,b[f]);g.sshrun(e,b.host,d)}},g.bindCpu=function(a,b,c){if(l.platform()===j.PLATFORM.LINUX&&void 0!==m[a])if(i.isLocal(c)){var d=[];d.push("-pc"),d.push(m[a]),d.push(b),g.localrun(j.COMMAND.TASKSET,null,d)}else{var e=h.format('taskset -pc "%s" "%s"',m[a],b);g.sshrun(e,c,null)}},g.kill=function(a,b){for(var c,d=0;d<b.length;d++){var e=b[d];if(i.isLocal(e.host)){var f=[];l.platform()===j.PLATFORM.WIN?(c=j.COMMAND.TASKKILL,f.push("/pid"),f.push("/f")):(c=j.COMMAND.KILL,f.push(-9)),f.push(a[d]),g.localrun(c,null,f)}else c=l.platform()===j.PLATFORM.WIN?h.format("taskkill /pid %s /f",a[d]):h.format("kill -9 %s",a[d]),g.sshrun(c,e.host)}},g.sshrun=function(a,b,c){var d=[];d.push(b);var e=n.app.get(j.RESERVED.SSH_CONFIG_PARAMS);e&&Array.isArray(e)&&(d=d.concat(e)),d.push(a),f.info("Executing "+a+" on "+b+":22"),o(j.COMMAND.SSH,b,d,c)},g.localrun=function(a,b,c,d){f.info("Executing "+a+" "+c+" locally"),o(a,b,c,d)};var o=function(a,b,d,g){var h=null;if(k===j.RESERVED.ENV_DEV){h=e.spawn(a,d);var i=a===j.COMMAND.SSH?"["+b+"] ":"";h.stderr.on("data",function(a){var b=a.toString();c.stderr.write(b),g&&g(b)}),h.stdout.on("data",function(a){var b=i+a.toString();c.stdout.write(b)})}else h=e.spawn(a,d,{detached:!0,stdio:"inherit"}),h.unref();h.on("exit",function(b){0!==b&&f.warn("child process exit with error, error code: %s, executed command: %s",b,a),"function"==typeof g&&g(0===b?null:b)})}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/lib/master/starter.js")},{"../pomelo":162,"../util/constants":165,"../util/utils":168,_process:125,child_process:1,os:123,"pomelo-logger":229,util:146}],162:[function(a,b){(function(c){function d(a,b,c,d){if(/\.js$/.test(d)){var f=g.basename(d,".js"),h=e.bind(null,"./"+b+"/",f);this[a].__defineGetter__(f,h),c&&this.__defineGetter__(f,h)}}function e(b,c){return a(c?b+c:b)}var f=a("fs"),g=a("path"),h=a("./application"),i=a("./pomeloManager"),j=b.exports={};j.manager=i,j.version="1.1.2",j.events=a("./util/events"),j.components={},j.filters={},j.rpcFilters={},j.connectors={},j.connectors.__defineGetter__("sioconnector",e.bind(null,"./connectors/sioconnector")),j.connectors.__defineGetter__("hybridconnector",e.bind(null,"./connectors/hybridconnector")),j.connectors.__defineGetter__("udpconnector",e.bind(null,"./connectors/udpconnector")),j.connectors.__defineGetter__("mqttconnector",e.bind(null,"./connectors/mqttconnector")),j.pushSchedulers={},j.pushSchedulers.__defineGetter__("direct",e.bind(null,"./pushSchedulers/direct")),j.pushSchedulers.__defineGetter__("buffer",e.bind(null,"./pushSchedulers/buffer"));var k=this;j.createApp=function(a){var b=h;return b.init(a),k._app=b},Object.defineProperty(j,"app",{get:function(){return k._app}}),f.readdirSync(c+"/components").forEach(d.bind(j,"components","components",!0)),f.readdirSync(c+"/filters/handler").forEach(d.bind(j,"filters","filters/handler",!0)),f.readdirSync(c+"/filters/rpc").forEach(d.bind(j,"rpcFilters","filters/rpc",!1))}).call(this,"/node_modules/reckoner/node_modules/pomelo/lib")},{"./application":159,"./pomeloManager":163,"./util/events":166,fs:1,path:124}],163:[function(a,b){(function(c,d){function e(a){console.log(D),s(function(b){m(a,function(d){d?(c.stdin.destroy(),f(a,b)):n("Destination is not empty, continue? (y/n) [no] ",function(d){c.stdin.destroy(),d?f(a,b):p("Fail to init a project".red)})})})}function f(a,b){var c=u.basename(u.resolve(CUR_DIR,a));q(u.join(d,"../template/"),a),r(u.join(a,"game-server/logs")),r(u.join(a,"shared"));var e=function(a){for(var b=v.readdirSync(a),c=0;c<b.length;c++){var d=u.join(a,b[c]),f=v.statSync(d);"."===d||".."===d||(f.isDirectory()?e(d):v.unlinkSync(d))}v.rmdirSync(a)};setTimeout(function(){switch(b){case"1":for(var d=["game-server/app.js.sio","game-server/app.js.wss","game-server/app.js.mqtt","game-server/app.js.sio.wss","game-server/app.js.udp","web-server/app.js.https","web-server/public/index.html.sio","web-server/public/js/lib/pomeloclient.js","web-server/public/js/lib/pomeloclient.js.wss","web-server/public/js/lib/build/build.js.wss","web-server/public/js/lib/socket.io.js"],f=0;f<d.length;++f)v.unlinkSync(u.resolve(a,d[f]));break;case"2":for(var d=["game-server/app.js","game-server/app.js.wss","game-server/app.js.udp","game-server/app.js.mqtt","game-server/app.js.sio.wss","web-server/app.js.https","web-server/public/index.html","web-server/public/js/lib/component.json","web-server/public/js/lib/pomeloclient.js.wss"],f=0;f<d.length;++f)v.unlinkSync(u.resolve(a,d[f]));v.renameSync(u.resolve(a,"game-server/app.js.sio"),u.resolve(a,"game-server/app.js")),v.renameSync(u.resolve(a,"web-server/public/index.html.sio"),u.resolve(a,"web-server/public/index.html")),e(u.resolve(a,"web-server/public/js/lib/build")),e(u.resolve(a,"web-server/public/js/lib/local"));break;case"3":for(var d=["game-server/app.js.sio","game-server/app.js","game-server/app.js.udp","game-server/app.js.sio.wss","game-server/app.js.mqtt","web-server/app.js","web-server/public/index.html.sio","web-server/public/js/lib/pomeloclient.js","web-server/public/js/lib/pomeloclient.js.wss","web-server/public/js/lib/build/build.js","web-server/public/js/lib/socket.io.js"],f=0;f<d.length;++f)v.unlinkSync(u.resolve(a,d[f]));v.renameSync(u.resolve(a,"game-server/app.js.wss"),u.resolve(a,"game-server/app.js")),v.renameSync(u.resolve(a,"web-server/app.js.https"),u.resolve(a,"web-server/app.js")),v.renameSync(u.resolve(a,"web-server/public/js/lib/build/build.js.wss"),u.resolve(a,"web-server/public/js/lib/build/build.js"));break;case"4":for(var d=["game-server/app.js.sio","game-server/app.js","game-server/app.js.udp","game-server/app.js.wss","game-server/app.js.mqtt","web-server/app.js","web-server/public/index.html","web-server/public/js/lib/pomeloclient.js"],f=0;f<d.length;++f)v.unlinkSync(u.resolve(a,d[f]));v.renameSync(u.resolve(a,"game-server/app.js.sio.wss"),u.resolve(a,"game-server/app.js")),v.renameSync(u.resolve(a,"web-server/app.js.https"),u.resolve(a,"web-server/app.js")),v.renameSync(u.resolve(a,"web-server/public/index.html.sio"),u.resolve(a,"web-server/public/index.html")),v.renameSync(u.resolve(a,"web-server/public/js/lib/pomeloclient.js.wss"),u.resolve(a,"web-server/public/js/lib/pomeloclient.js")),e(u.resolve(a,"web-server/public/js/lib/build")),e(u.resolve(a,"web-server/public/js/lib/local")),v.unlinkSync(u.resolve(a,"web-server/public/js/lib/component.json"));break;case"5":for(var d=["game-server/app.js.sio","game-server/app.js","game-server/app.js.wss","game-server/app.js.mqtt","game-server/app.js.sio.wss","web-server/app.js.https","web-server/public/index.html","web-server/public/js/lib/component.json","web-server/public/js/lib/pomeloclient.js.wss"],f=0;f<d.length;++f)v.unlinkSync(u.resolve(a,d[f]));v.renameSync(u.resolve(a,"game-server/app.js.udp"),u.resolve(a,"game-server/app.js")),e(u.resolve(a,"web-server/public/js/lib/build")),e(u.resolve(a,"web-server/public/js/lib/local"));break;case"6":for(var d=["game-server/app.js","game-server/app.js.wss","game-server/app.js.udp","game-server/app.js.sio","game-server/app.js.sio.wss","web-server/app.js.https","web-server/public/index.html","web-server/public/js/lib/component.json","web-server/public/js/lib/pomeloclient.js.wss"],f=0;f<d.length;++f)v.unlinkSync(u.resolve(a,d[f]));v.renameSync(u.resolve(a,"game-server/app.js.mqtt"),u.resolve(a,"game-server/app.js")),v.renameSync(u.resolve(a,"web-server/public/index.html.sio"),u.resolve(a,"web-server/public/index.html")),e(u.resolve(a,"web-server/public/js/lib/build")),e(u.resolve(a,"web-server/public/js/lib/local"))}for(var g=["game-server/app.js","game-server/package.json","web-server/package.json"],h=0;h<g.length;h++){var i=v.readFileSync(u.resolve(a,g[h])).toString();v.writeFileSync(u.resolve(a,g[h]),i.replace("$",c))}var j=u.resolve(a,"game-server/package.json"),k=v.readFileSync(j).toString();v.writeFileSync(j,k.replace("#",version))},TIME_INIT)}function g(a){a=a||{};var b=a.appFile||u.resolve(a.directory,"app.js");v.existsSync(b)||p(E,b);var d=a.logDir||(a.directory?u.resolve(a.directory,"logs"):void 0);d||p(F),v.existsSync(d)||v.mkdir(d);var e,f=a.type||w.RESERVED.ALL,g=[b,"env="+a.env,"type="+f];a.id&&g.push("startId="+a.id),a.daemon?(e=y(c.execPath,g,{detached:!0,stdio:"ignore"}),e.unref(),console.log(H),c.exit(0)):(e=y(c.execPath,g),e.stdout.on("data",function(a){console.log(a.toString())}),e.stderr.on("data",function(a){console.log(a.toString())}))}function h(a){var b="pomelo_list_"+Date.now();k(b,a,function(a){a.request(co.moduleId,{signal:"list"},function(a,b){a&&console.error(a);var d=[];for(var e in b.msg)d.push(b.msg[e]);var f=function(a,b){return a.serverType<b.serverType?-1:a.serverType>b.serverType?1:a.serverId<b.serverId?-1:a.serverId>b.serverId?1:0};d.sort(f);var g=[];g.push(["serverId","serverType","pid","rss(M)","heapTotal(M)","heapUsed(M)","uptime(m)"]),d.forEach(function(a){g.push([a.serverId,a.serverType,a.pid,a.rss,a.heapTotal,a.heapUsed,a.uptime])}),console.log(cliff.stringifyRows(g,["red","blue","green","cyan","magenta","white","yellow"])),c.exit(0)})})}function i(a,b){if(console.info(B),b.force)return exec(os.platform()===w.PLATFORM.WIN?KILL_CMD_WIN:KILL_CMD_LUX),void c.exit(1);var d="pomelo_terminal_"+Date.now();k(d,b,function(d){d.request(co.moduleId,{signal:a,ids:b.serverIds},function(b,d){b&&console.error(b),"kill"===a&&("ok"===d.code?console.log("All the servers have been terminated!"):console.log("There may be some servers remained:",d.serverIds)),c.exit(0)})})}function j(a){var b="pomelo_restart_"+Date.now(),d=[],e=null;a.id&&d.push(a.id),a.type&&(e=a.type),k(b,a,function(a){a.request(co.moduleId,{signal:"restart",ids:d,type:e},function(a,b){a?console.error(a):b.length?console.info("restart fails server ids: %j",b):console.info(C),c.exit(0)})})}function k(a,b,c){var d=new x({username:b.username,password:b.password,md5:!0});d.connect(a,b.host,b.port,function(a){a&&p(z+a.red),"function"==typeof c&&c(d)})}function l(b){var c=u.join(b.directory,w.FILEPATH.MASTER_HA);v.existsSync(c)||p(G);for(var d=a(c).masterha,e=0;e<d.length;e++){var f=d[e];f.mode=w.RESERVED.STAND_ALONE,f.masterha="true",f.home=b.directory,t(f)}}function m(a,b){v.readdir(a,function(a,c){a&&"ENOENT"!==a.code&&p(A),b(!c||!c.length)})}function n(a,b){o(a,function(a){b(/^ *y(es)?/i.test(a))})}function o(a,b){" "===a[a.length-1]?c.stdout.write(a):console.log(a),c.stdin.setEncoding("ascii"),c.stdin.once("data",function(a){b(a)}).resume()}function p(a,b){console.error(a,b),c.exit(1)}function q(a,b){v.existsSync(a)||p(a+"does not exist."),v.existsSync(b)||(r(b),console.log("   create : ".green+b)),v.readdir(a,function(c,d){c&&p(A);for(var e=0;e<d.length;e++){var f=u.resolve(a,d[e]),g=u.resolve(b,d[e]);v.statSync(f).isFile()?(v.writeFileSync(g,v.readFileSync(f,""),""),console.log("   create : ".green+g)):v.statSync(f).isDirectory()&&q(f,g)}})}function r(a,b){mkdirp(a,493,function(c){if(c)throw c;console.log("   create : ".green+a),"function"==typeof b&&b()})}function s(a){o("Please select underly connector, 1 for websocket(native socket), 2 for socket.io, 3 for wss, 4 for socket.io(wss), 5 for udp, 6 for mqtt: [1]",function(b){switch(b.trim()){case"":a(1);break;case"1":case"2":case"3":case"4":case"5":case"6":a(b.trim());break;default:console.log("Invalid choice! Please input 1 - 5.".red+"\n"),s(a)}})}function t(a){var b,d,e=u.resolve(a.home,"app.js");if(utils.isLocal(a.host)){var f=[];f.push(e);for(d in a)f.push(util.format("%s=%s",d,a[d]));starter.localrun(c.execPath,null,f)}else{b=util.format('cd "%s" && "%s"',a.home,c.execPath),b+=util.format(' "%s" ',e);for(d in a)b+=util.format(" %s=%s ",d,a[d]);starter.sshrun(b,a.host)}}var u=a("path"),v=a("fs"),w=a("./util/constants"),x=a("pomelo-admin").adminClient,y=a("child_process").spawn,z="Failed to connect to admin console server.",A="Failed to read the file, please check if the application is started legally.",B="Closing the application......\nPlease wait......",C="Successfully restarted server.",D="\nThe default admin user is: \n\n"+"  username".green+": admin\n  "+"password".green+": admin\n\nYou can configure admin users by editing adminUser.json later.\n ",E="Failed to find an appropriate script to run,\nplease check the current work directory or the directory specified by option `--directory`.\n".red,F="Logging directory not defined. Specify as Pomelo.manager.start({logDir: 'blah'}).\n".red,G="Failed to find an appropriate masterha config file, \nplease check the current work directory or the arguments passed to.\n".red,H=("Illegal command format. See `pomelo --help`.\n".red,"The application is now running in the background.\n");b.exports={init:e,start:g,createApplicationAt:f,list:h,terminal:i,restart:j,startMasterha:l}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/lib")},{"./util/constants":165,_process:125,child_process:1,fs:1,path:124,"pomelo-admin":170}],164:[function(a,b){(function(c,d){var e=a("async"),f=a("./log"),g=a("./utils"),h=a("path"),i=a("fs"),j=(a("util"),a("./constants")),k=a("../master/starter"),l=a("pomelo-logger").getLogger("pomelo",d);b.exports.defaultConfiguration=function(a){var b=a.options.args||r(c.argv);p(a,b),n(a),m(a),o(a,b),q(a),s(a)},b.exports.startByType=function(a,b){a.startId?a.startId===j.RESERVED.MASTER?g.invokeCallback(b):k.runServers(a):a.type&&a.type!==j.RESERVED.ALL&&a.type!==j.RESERVED.MASTER?k.runServers(a):g.invokeCallback(b)},b.exports.loadDefaultComponents=function(b){var c=a("../pomelo");b.serverType===j.RESERVED.MASTER?b.load(c.master,b.get("masterConfig")):(b.load(c.proxy,b.get("proxyConfig")),b.getCurServer().port&&b.load(c.remote,b.get("remoteConfig")),b.isFrontend()&&(b.load(c.connection,b.get("connectionConfig")),b.load(c.connector,b.get("connectorConfig")),b.load(c.session,b.get("sessionConfig")),b.get("schedulerConfig")?b.load(c.pushScheduler,b.get("schedulerConfig")):b.load(c.pushScheduler,b.get("pushSchedulerConfig"))),b.load(c.backendSession,b.get("backendSessionConfig")),b.load(c.channel,b.get("channelConfig")),b.load(c.server,b.get("serverConfig"))),b.load(c.monitor,b.get("monitorConfig"))},b.exports.stopComps=function(a,c,d,e){if(c>=a.length)return void g.invokeCallback(e);var f=a[c];"function"==typeof f.stop?f.stop(d,function(){b.exports.stopComps(a,c+1,d,e)}):b.exports.stopComps(a,c+1,d,e)},b.exports.optComponents=function(a,b,c){var d=0,f=void 0;e.forEachSeries(a,function(a,c){d++,f=a,"function"==typeof a[b]?a[b](c):c()},function(a){a&&l.error("Failed to call method '%s' on component: %s\nError was: %j",b,f.name,a),g.invokeCallback(c,a)})};var m=function(a){a.options.servers?a.setConfig(j.RESERVED.SERVERS,a.options.servers):a.loadConfigBaseApp(j.RESERVED.SERVERS,j.FILEPATH.SERVER);var b,c,d,e,f=a.get(j.RESERVED.SERVERS),h={};for(var i in f)for(b=f[i],c=0,d=b.length;d>c;c++)e=b[c],e.serverType=i,e[j.RESERVED.CLUSTER_COUNT]?g.loadCluster(a,e,h):(h[e.id]=e,e.wsPort&&l.warn("wsPort is deprecated, use clientPort in frontend server instead, server: %j",e));a.set(j.KEYWORDS.SERVER_MAP,h)},n=function(a){a.options.master?a.setConfig(j.RESERVED.MASTER,a.options.master):a.loadConfigBaseApp(j.RESERVED.MASTER,j.FILEPATH.MASTER),a.master=a.get(j.RESERVED.MASTER)},o=function(a,b){var c=b.serverType||j.RESERVED.MASTER,d=b.id||a.getMaster().id,e=b.mode||j.RESERVED.CLUSTER,f=b.masterha||"false",g=b.type||j.RESERVED.ALL,h=b.startId;a.set(j.RESERVED.MAIN,b.main,!0),a.set(j.RESERVED.SERVER_TYPE,c,!0),a.set(j.RESERVED.SERVER_ID,d,!0),a.set(j.RESERVED.MODE,e,!0),a.set(j.RESERVED.TYPE,g,!0),h&&a.set(j.RESERVED.STARTID,h,!0),"true"===f?(a.master=b,a.set(j.RESERVED.CURRENT_SERVER,b,!0)):c!==j.RESERVED.MASTER?a.set(j.RESERVED.CURRENT_SERVER,b,!0):a.set(j.RESERVED.CURRENT_SERVER,a.getMaster(),!0)},p=function(a,b){a.set(j.RESERVED.ENV,b.env||c.env.NODE_ENV||j.RESERVED.ENV_DEV,!0)},q=function(a){if("off"!==c.env.POMELO_LOGGER){var b=a.get(j.RESERVED.ENV),d=a.options.logConfigFile||h.join(a.getBase(),j.FILEPATH.LOG),e=h.join(a.getBase(),j.FILEPATH.CONFIG_DIR,b,h.basename(j.FILEPATH.LOG));i.existsSync(d)?f.configure(a,d):i.existsSync(e)?f.configure(a,e):l.error("logger file path configuration error.",a.options)}},r=function(a){for(var b={},c=1;a[c].indexOf("--")>0;)c++;b.main=a[c];for(var d=c+1;d<a.length;d++){var e=a[d],f=e.indexOf("="),g=e.slice(0,f),h=e.slice(f+1);!isNaN(Number(h))&&h.indexOf(".")<0&&(h=Number(h)),b[g]=h}return b},s=function(b){var c=h.join(b.getBase(),j.FILEPATH.SERVER_DIR,b.serverType,j.FILEPATH.LIFECYCLE);if(i.existsSync(c)){var d=a(c);for(var e in d)"function"==typeof d[e]?b.lifecycleCbs[e]=d[e]:l.warn("lifecycle.js in %s is error format.",c)}}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/lib/util/appUtil.js")},{"../master/starter":161,"../pomelo":162,"./constants":165,"./log":167,"./utils":168,_process:125,async:169,fs:1,path:124,"pomelo-logger":229,util:146}],165:[function(a,b){b.exports={KEYWORDS:{BEFORE_FILTER:"__befores__",AFTER_FILTER:"__afters__",GLOBAL_BEFORE_FILTER:"__globalBefores__",GLOBAL_AFTER_FILTER:"__globalAfters__",ROUTE:"__routes__",BEFORE_STOP_HOOK:"__beforeStopHook__",MODULE:"__modules__",SERVER_MAP:"__serverMap__",RPC_BEFORE_FILTER:"__rpcBefores__",RPC_AFTER_FILTER:"__rpcAfters__",MASTER_WATCHER:"__masterwatcher__",MONITOR_WATCHER:"__monitorwatcher__"},FILEPATH:{MASTER:"/config/master.json",SERVER:"/config/servers.json",CRON:"/config/crons.json",LOG:"/config/log4js.json",SERVER_PROTOS:"/config/serverProtos.json",CLIENT_PROTOS:"/config/clientProtos.json",MASTER_HA:"/config/masterha.json",LIFECYCLE:"/lifecycle.js",SERVER_DIR:"/app/servers/",CONFIG_DIR:"/config"},DIR:{HANDLER:"handler",REMOTE:"remote",CRON:"cron",LOG:"logs",SCRIPT:"scripts",EVENT:"events",COMPONENT:"components"},RESERVED:{BASE:"base",MAIN:"main",MASTER:"master",SERVERS:"servers",ENV:"env",CPU:"cpu",ENV_DEV:"development",ENV_PRO:"production",ALL:"all",SERVER_TYPE:"serverType",SERVER_ID:"serverId",CURRENT_SERVER:"curServer",MODE:"mode",TYPE:"type",CLUSTER:"clusters",STAND_ALONE:"stand-alone",START:"start",AFTER_START:"afterStart",CRONS:"crons",ERROR_HANDLER:"errorHandler",GLOBAL_ERROR_HANDLER:"globalErrorHandler",AUTO_RESTART:"auto-restart",RESTART_FORCE:"restart-force",CLUSTER_COUNT:"clusterCount",CLUSTER_PREFIX:"cluster-server-",CLUSTER_SIGNAL:"++",RPC_ERROR_HANDLER:"rpcErrorHandler",SERVER:"server",CLIENT:"client",STARTID:"startId",STOP_SERVERS:"stop_servers",SSH_CONFIG_PARAMS:"ssh_config_params"},COMMAND:{TASKSET:"taskset",KILL:"kill",TASKKILL:"taskkill",SSH:"ssh"},PLATFORM:{WIN:"win32",LINUX:"linux"},LIFECYCLE:{BEFORE_STARTUP:"beforeStartup",BEFORE_SHUTDOWN:"beforeShutdown",AFTER_STARTUP:"afterStartup",AFTER_STARTALL:"afterStartAll"},SIGNAL:{FAIL:0,OK:1},TIME:{TIME_WAIT_STOP:3e3,TIME_WAIT_KILL:5e3,TIME_WAIT_RESTART:5e3,TIME_WAIT_COUNTDOWN:1e4,TIME_WAIT_MASTER_KILL:12e4,TIME_WAIT_MONITOR_KILL:2e3,TIME_WAIT_PING:3e4,TIME_WAIT_MAX_PING:3e5,DEFAULT_UDP_HEARTBEAT_TIME:2e4,DEFAULT_UDP_HEARTBEAT_TIMEOUT:1e5}}
},{}],166:[function(a,b){b.exports={ADD_SERVERS:"add_servers",REMOVE_SERVERS:"remove_servers",REPLACE_SERVERS:"replace_servers",BIND_SESSION:"bind_session",UNBIND_SESSION:"unbind_session",CLOSE_SESSION:"close_session",ADD_CRONS:"add_crons",REMOVE_CRONS:"remove_crons",START_SERVER:"start_server",START_ALL:"start_all"}},{}],167:[function(a,b){var c=a("pomelo-logger");b.exports.configure=function(a,b){var d=a.getServerId(),e=a.getBase();c.configure(b,{serverId:d,base:e})}},{"pomelo-logger":229}],168:[function(a,b){(function(c){var d=a("os"),e=a("util"),f=a("child_process").exec,g=a("pomelo-logger").getLogger("pomelo",c),h=a("./constants"),i=a("../pomelo"),j=b.exports;j.invokeCallback=function(a){a&&"function"==typeof a&&a.apply(null,Array.prototype.slice.call(arguments,1))},j.size=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&"function"!=typeof a[c]&&b++;return b},j.endsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b||b.length>a.length?!1:-1!==a.indexOf(b,a.length-b.length)},j.startsWith=function(a,b){return"string"!=typeof a||"string"!=typeof b||b.length>a.length?!1:0===a.indexOf(b)},j.arrayDiff=function(a,b){for(var c={},d=0,e=b.length;e>d;d++)c[b[d]]=!0;var f=[];for(d=0,e=a.length;e>d;d++){var g=a[d];c[g]||f.push(g)}return f},j.format=function(a,b){b=b||"MMddhhmm";var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},j.hasChineseChar=function(a){return/.*[\u4e00-\u9fa5]+.*$/.test(a)?!0:!1},j.unicodeToUtf8=function(a){var b,c,d,e="";for(c=a.length,b=0;c>b;b++)d=a.charCodeAt(b),d>=0&&127>=d?e+=a.charAt(b):d>=128&&2047>=d?(e+=String.fromCharCode(192|d>>6&31),e+=String.fromCharCode(128|63&d)):d>=2048&&65535>=d?(e+=String.fromCharCode(224|d>>12&15),e+=String.fromCharCode(128|d>>6&63),e+=String.fromCharCode(128|63&d)):d>=65536&&2097151>=d?(e+=String.fromCharCode(240|d>>18&7),e+=String.fromCharCode(128|d>>12&63),e+=String.fromCharCode(128|d>>6&63),e+=String.fromCharCode(128|63&d)):d>=2097152&&67108863>=d?(e+=String.fromCharCode(248|d>>24&3),e+=String.fromCharCode(128|d>>18&63),e+=String.fromCharCode(128|d>>12&63),e+=String.fromCharCode(128|d>>6&63),e+=String.fromCharCode(128|63&d)):d>=67108864&&2147483647>=d&&(e+=String.fromCharCode(252|d>>30&1),e+=String.fromCharCode(128|d>>24&63),e+=String.fromCharCode(128|d>>18&63),e+=String.fromCharCode(128|d>>12&63),e+=String.fromCharCode(128|d>>6&63),e+=String.fromCharCode(128|63&d));return e},j.ping=function(a,c){if(b.exports.isLocal(a))c(!0);else{var d="ping -w 15 "+a;f(d,function(a){return a?void c(!1):void c(!0)})}},j.checkPort=function(a,b){if(!a.port&&!a.clientPort)return void this.invokeCallback(b,"leisure");{var c=this,d=a.port||a.clientPort,j=a.host,k=function(a,b,c){var d,f=i.app.get(h.RESERVED.SSH_CONFIG_PARAMS);return f=f&&Array.isArray(f)?f.join(" "):"",d=a.isLocal(b)?e.format("netstat -an|awk '{print $4}'|grep %s|wc -l",c):e.format("ssh %s %s \"netstat -an|awk '{print $4}'|grep %s|wc -l\"",b,f,c)},l=k(c,j,d);f(l,function(e,h){if(e)g.error("command %s execute with error: %j",l,e.stack),c.invokeCallback(b,"error");else if("0"!==h.trim())c.invokeCallback(b,"busy");else{d=a.clientPort;var i=k(c,j,d);f(i,function(a,d){a?(g.error("command %s execute with error: %j",i,a.stack),c.invokeCallback(b,"error")):"0"!==d.trim()?c.invokeCallback(b,"busy"):c.invokeCallback(b,"leisure")})}})}},j.isLocal=function(b){var c=a("../pomelo").app;return c?"127.0.0.1"===b||"localhost"===b||k(b)||b===c.master.host:"127.0.0.1"===b||"localhost"===b||k(b)},j.loadCluster=function(a,b,c){var d={},e=(b.host,parseInt(b[h.RESERVED.CLUSTER_COUNT])),f=a.clusterSeq[b.serverType];f?a.clusterSeq[b.serverType]=f+e:(f=0,a.clusterSeq[b.serverType]=e);for(var g in b){var i=b[g].toString();if(i.indexOf(h.RESERVED.CLUSTER_SIGNAL)>0){var j=b[g].slice(0,-2);d[g]=j}}for(var k=function(a){var b={};for(var c in a)b[c]=a[c];return b},l=0,m=f;e>l;l++,m++){var n=k(b);n.id=h.RESERVED.CLUSTER_PREFIX+b.serverType+"-"+m;for(var o in d){var p=parseInt(d[o]);n[o]=p+l}c[n.id]=n}},j.extends=function(a,b){if(!b||!m(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a},j.headHandler=function(a){for(var b=0,c=1;4>c;c++)c>1&&(b<<=8),b+=a.readUInt8(c);return b};var k=function(a){for(var b in l)if(a===l[b])return!0;return!1},l=function(){var a=d.networkInterfaces(),b=[],c=function(a){"IPv4"===a.family&&b.push(a.address)};for(var e in a)a[e].forEach(c);return b}(),m=function(a){return"object"==typeof a&&null!==a}}).call(this,"/node_modules/reckoner/node_modules/pomelo/lib/util/utils.js")},{"../pomelo":162,"./constants":165,child_process:1,os:123,"pomelo-logger":229,util:146}],169:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};f.nextTick="undefined"!=typeof a&&a.nextTick?a.nextTick:"function"==typeof setImmediate?function(a){setImmediate(a)}:function(a){setTimeout(a,0)},f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){var g=!0;b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):g?f.nextTick(e):e())}),g=!1};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],g=function(a){if(a)b(a),b=function(){};else{var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[c]=e,f.nextTick(l)}},j=e.slice(0,Math.abs(e.length-1))||[],m=function(){return i(j,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(m())e[e.length-1](g,d);else{var n=function(){m()&&(k(n),e[e.length-1](g,d))};h(n)}})},f.waterfall=function(a,b){if(b=b||function(){},!a.length)return b();var c=function(a){return function(d){if(d)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?c(g):b),f.nextTick(function(){a.apply(null,e)})}}};c(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){if(a()){var d=!0;b(function(e){return e?c(e):void(d?f.nextTick(function(){f.whilst(a,b,c)}):f.whilst(a,b,c))}),d=!1}else c()},f.doWhilst=function(a,b,c){var d=!0;a(function(e){return e?c(e):void(b()?d?f.nextTick(function(){f.doWhilst(a,b,c)}):f.doWhilst(a,b,c):c())}),d=!1},f.until=function(a,b,c){if(a())c();else{var d=!0;b(function(e){return e?c(e):void(d?f.nextTick(function(){f.until(a,b,c)}):f.until(a,b,c))}),d=!1}},f.doUntil=function(a,b,c){var d=!0;a(function(e){return e?c(e):void(b()?c():d?f.nextTick(function(){f.doUntil(a,b,c)}):f.doUntil(a,b,c))}),d=!1},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.nextTick(a.process)})}var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=!0,g=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},i=c(function(){var a=arguments;d?f.nextTick(function(){g.apply(null,a)}):g.apply(null,arguments)});a(b.data,i),d=!1}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.nextTick(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("_process"))},{_process:125}],170:[function(a,b,c){(function(d){var e=a("fs"),f=a("./lib/consoleService");b.exports.createMasterConsole=f.createMasterConsole,b.exports.createMonitorConsole=f.createMonitorConsole,b.exports.adminClient=a("./lib/client/client"),c.modules={},e.readdirSync(d+"/lib/modules").forEach(function(b){if(/\.js$/.test(b)){var d=b.substr(0,b.lastIndexOf(".")),e=a("./lib/modules/"+d);e.moduleError||c.modules.__defineGetter__(d,function(){return e})}})}).call(this,"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin")},{"./lib/client/client":171,"./lib/consoleService":172,fs:1}],171:[function(a,b){var c=a("../util/protocol"),d=a("socket.io-client"),e=a("../util/utils"),f=function(a){this.id="",this.reqId=1,this.callbacks={},this.listeners={},this.state=f.ST_INITED,this.socket=null,a=a||{},this.username=a.username||"",this.password=a.password||"",this.md5=a.md5||!1};f.prototype={connect:function(a,b,g,h){this.id=a;var i=this;console.log("try to connect "+b+":"+g),this.socket=d.connect("http://"+b+":"+g,{"force new connection":!0,reconnect:!1}),this.socket.on("connect",function(){i.state=f.ST_CONNECTED,i.md5&&(i.password=e.md5(i.password)),i.socket.emit("register",{type:"client",id:a,username:i.username,password:i.password,md5:i.md5})}),this.socket.on("register",function(a){return a.code!==c.PRO_OK?void h(a.msg):(i.state=f.ST_REGISTERED,void h())}),this.socket.on("client",function(a){if(a=c.parse(a),a.respId){var b=i.callbacks[a.respId];delete i.callbacks[a.respId],b&&"function"==typeof b&&b(a.error,a.body)}else a.moduleId&&i.emit(a.moduleId,a)}),this.socket.on("error",function(a){i.state<f.ST_CONNECTED&&h(a),i.emit("error",a)}),this.socket.on("disconnect",function(){this.state=f.ST_CLOSED,i.emit("close")})},request:function(a,b,d){var e=this.reqId++;b=b||{},b.clientId=this.id,b.username=this.username;var f=c.composeRequest(e,a,b);this.callbacks[e]=d,this.socket.emit("client",f)},notify:function(a,b){b=b||{},b.clientId=this.id,b.username=this.username;var d=c.composeRequest(null,a,b);this.socket.emit("client",d)},command:function(a,b,d,e){var f=this.reqId++;d=d||{},d.clientId=this.id,d.username=this.username;var g=c.composeCommand(f,a,b,d);this.callbacks[f]=e,this.socket.emit("client",g)},on:function(a,b){this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(b)},emit:function(a){var b=this.listeners[a];if(b&&b.length)for(var c,d=Array.prototype.slice.call(arguments,1),e=0,f=b.length;f>e;e++)c=b[e],"function"==typeof c&&c.apply(null,d)}},f.ST_INITED=1,f.ST_CONNECTED=2,f.ST_REGISTERED=3,f.ST_CLOSED=4,b.exports=f},{"../util/protocol":175,"../util/utils":176,"socket.io-client":197}],172:[function(a,b){(function(c,d){var e=a("./util/utils"),f=a("events").EventEmitter,g=a("util"),h=a("./masterAgent"),i=a("./monitorAgent"),j=a("./util/protocol"),k=a("pomelo-scheduler"),l=a("pomelo-logger").getLogger("pomelo-admin",d),m=1e3,n=function(a){f.call(this),this.port=a.port,this.env=a.env,this.values={},this.master=a.master,this.modules={},this.commands={list:s,enable:t,disable:u},this.master?(this.authUser=a.authUser||e.defaultAuthUser,this.authServer=a.authServer||e.defaultAuthServerMaster,this.agent=new h(this,a)):(this.type=a.type,this.id=a.id,this.host=a.host,this.authServer=a.authServer||e.defaultAuthServerMonitor,this.agent=new i({consoleService:this,id:this.id,type:this.type,info:a.info}))};g.inherits(n,f),n.prototype.start=function(a){if(this.master){var b=this;this.agent.listen(this.port,function(d){return d?void e.invokeCallback(a,d):(r(b,b.agent,"register"),r(b,b.agent,"disconnect"),r(b,b.agent,"reconnect"),void c.nextTick(function(){e.invokeCallback(a)}))})}else l.info("try to connect master: %j, %j, %j",this.type,this.host,this.port),this.agent.connect(this.port,this.host,a),r(this,this.agent,"close");r(this,this.agent,"error");for(var d in this.modules)this.enable(d)},n.prototype.stop=function(){for(var a in this.modules)this.disable(a);this.agent.close()},n.prototype.register=function(a,b){this.modules[a]=o(this,a,b)},n.prototype.enable=function(a){var b=this.modules[a];return b&&!b.enable?(b.enable=!0,p(this,b),!0):!1},n.prototype.disable=function(a){var b=this.modules[a];return b&&b.enable?(b.enable=!1,b.schedule&&b.jobId&&(k.cancelJob(b.jobId),k.jobId=null),!0):!1},n.prototype.execute=function(a,b,c,d){var e=this,f=this.modules[a];if(!f)return l.error("unknown module: %j.",a),void d("unknown moduleId:"+a);if(!f.enable)return l.error("module %j is disable.",a),void d("module "+a+" is disable");var g=f.module;if(!g||"function"!=typeof g[b])return l.error("module %j dose not have a method called %j.",a,b),void d("module "+a+" dose not have a method called "+b);var h={action:"execute",moduleId:a,method:b,msg:c},i=v(e.agent,"execute",b,a,c);return 0!==i&&1!==i?(h.error=i,e.emit("admin-log",h,i),void d(new Error(i),null)):("clientHandler"===b&&e.emit("admin-log",h),void g[b](this.agent,c,d))},n.prototype.command=function(a,b,c,d){var e=this,f=this.commands[a];if(!f||"function"!=typeof f)return void d("unknown command:"+a);var g={action:"command",moduleId:b,msg:c},h=v(e.agent,"command",null,b,c);return 0!==h&&1!==h?(g.error=h,e.emit("admin-log",g,h),void d(new Error(h),null)):(e.emit("admin-log",g),void f(this,b,c,d))},n.prototype.set=function(a,b){this.values[a]=b},n.prototype.get=function(a){return this.values[a]};var o=function(a,b,c){var d={moduleId:b,module:c,enable:!1};return c.type&&c.interval&&(!a.master&&"push"===d.module.type||a.master&&"push"!==d.module.type)&&(d.delay=c.delay||0,d.interval=c.interval||1,d.delay<0&&(d.delay=0),d.interval<0&&(d.interval=1),d.interval=Math.ceil(d.interval),d.delay*=m,d.interval*=m,d.schedule=!0),d},p=function(a,b){b&&b.schedule&&(b.jobId=k.scheduleJob({start:Date.now()+b.delay,period:b.interval},q,{service:a,record:b}))},q=function(a){var b=a.service,c=a.record;b&&c&&c.module&&c.enable&&(b.master?c.module.masterHandler(b.agent,null,function(){l.error("interval push should not have a callback.")}):c.module.monitorHandler(b.agent,null,function(){l.error("interval push should not have a callback.")}))},r=function(a,b,c){b.on(c,function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(c),a.emit.apply(a,b)})},s=function(a,b,c,d){var e=a.modules,f=[];for(var b in e)/^__\w+__$/.test(b)||f.push(b);d(null,{modules:f})},t=function(a,b,c,d){if(!b)return l.error("fail to enable admin module for "+b),void d("empty moduleId");var e=a.modules;return e[b]?void(a.master?(a.enable(b),a.agent.notifyCommand("enable",b,c),d(null,j.PRO_OK)):(a.enable(b),d(null,j.PRO_OK))):void d(null,j.PRO_FAIL)},u=function(a,b,c,d){if(!b)return l.error("fail to enable admin module for "+b),void d("empty moduleId");var e=a.modules;return e[b]?void(a.master?(a.disable(b),a.agent.notifyCommand("disable",b,c),d(null,j.PRO_OK)):(a.disable(b),d(null,j.PRO_OK))):void d(null,j.PRO_FAIL)},v=function(a,b,c,d,e){if("execute"===b){if("clientHandler"!==c||"__console__"!==d)return 0;var f=e.signal;if(!f||"stop"!==f&&"add"!==f&&"kill"!==f)return 0}var g=e.clientId;if(!g)return"Unknow clientId";var h=a.getClientById(g);if(!(h&&h.info&&h.info.level))return"Client info error";var i=h.info.level;return i>1?"Command permission denied":1};b.exports.createMasterConsole=function(a){return a=a||{},a.master=!0,new n(a)},b.exports.createMonitorConsole=function(a){return new n(a)}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/lib/consoleService.js")},{"./masterAgent":173,"./monitorAgent":174,"./util/protocol":175,"./util/utils":176,_process:125,events:115,"pomelo-logger":177,"pomelo-scheduler":188,util:146}],173:[function(a,b){(function(c){var d=a("util"),e=a("events").EventEmitter,f=a("socket.io"),g=a("./util/utils"),h=a("./util/protocol"),i=a("pomelo-logger").getLogger("pomelo-admin",c),j=1,k=2,l=3,m=function(a,b){e.call(this),this.consoleService=a,this.server=null,this.idMap={},this.typeMap={},this.slaveMap={},this.clients={},this.reqId=1,this.callbacks={},this.sockets={},this.whitelist=b.whitelist,this.state=j};d.inherits(m,e),b.exports=m;var n="client",o="monitor";m.prototype.listen=function(a,b){if(this.state>j)return void i.error("master agent has started or closed.");this.state=k,this.server=f.listen(a),this.server.set("log level",0);var c=this;this.server.server.on("error",function(a){c.emit("error",a),g.invokeCallback(b,a)}),this.server.server.once("listening",function(){setImmediate(function(){g.invokeCallback(b)})}),this.server.sockets.on("connection",function(a){var b,d,e,f,j;c.sockets[a.id]=a,c.emit("connection",{id:a.id,ip:a.handshake.address.address}),a.on("register",function(g){g&&g.type&&(g.type===n?(d=g.type,b=g.id,e="client",w(g,a,c,function(b){return b?void a.disconnect():(j=g.username,void(f=!0))})):g.type===o?g.id&&(b=g.id,d=g.serverType,e=g.info,x(g,a,c,function(b){return b?void a.disconnect():void(f=!0)})):(a.emit("register",{code:h.PRO_FAIL,msg:"unknown auth master type"}),a.disconnect()))}),a.on("monitor",function(b){if(!f)return void a.disconnect();if(d===n)return void i.error("invalid message to monitor, but current connect type is client.");if(b=h.parse(b),b.respId){var e=c.callbacks[b.respId];return e?(delete c.callbacks[b.respId],void g.invokeCallback(e,b.error,b.body)):void i.warn("unknown resp id:"+b.respId)}c.consoleService.execute(b.moduleId,"masterHandler",b.body,function(c,d){if(h.isRequest(b)){var e=h.composeResponse(b,c,d);e&&a.emit("monitor",e)}else i.warn("notify should not have a callback.")})}),a.on("client",function(b){return f?d!==n?void i.error("invalid message to client, but current connect type is "+d):(b=h.parse(b),void(b.command?c.consoleService.command(b.command,b.moduleId,b.body,function(c,d){if(h.isRequest(b)){var e=h.composeResponse(b,c,d);e&&a.emit("client",e)}else i.warn("notify should not have a callback.")}):c.consoleService.execute(b.moduleId,"clientHandler",b.body,function(c,d){if(h.isRequest(b)){var e=h.composeResponse(b,c,d);e&&a.emit("client",e)}else i.warn("notify should not have a callback.")}))):void a.disconnect()}),a.on("reconnect",function(g,i){if(g&&g.type&&g.id){if(c.idMap[g.id])return void a.emit("reconnect_ok",{code:h.PRO_FAIL,msg:"id has been registered. id:"+g.id});{q(c,g.id,g.serverType,g.pid,g.info,a)}b=g.id,d=g.serverType,f=!0,g.info.pid=i,e=g.info,a.emit("reconnect_ok",{code:h.PRO_OK,msg:"ok"}),c.emit("reconnect",g.info)}}),a.on("disconnect",function(){delete c.sockets[a.id],f&&(r(c,b,d,e),c.emit("disconnect",b,d,e)),"client"===d&&f&&i.info("client user "+j+" exit"),f=!1,b=null,d=null}),a.on("error",function(a){c.emit("error",a)})}),this.on("connection",p.bind(this))};var p=function(a){if("function"==typeof this.whitelist){var b=this;b.whitelist(function(c,d){if(c)return void i.error("%j.(pomelo-admin whitelist).",c);if(!Array.isArray(d))return void i.error("%j is not an array.(pomelo-admin whitelist).",d);if(a&&a.ip&&a.id){for(var e in d){var f=new RegExp(d[e]);if(f.test(a.ip))return}var g=b.sockets[a.id];g&&(g.disconnect("unauthorized"),i.error("%s is rejected(pomelo-admin whitelist).",a.ip))}})}};m.prototype.close=function(){this.state>k||(this.state=l,this.server.server.close())},m.prototype.set=function(a,b){this.consoleService.set(a,b)},m.prototype.get=function(a){return this.consoleService.get(a)},m.prototype.getClientById=function(a){return this.clients[a]},m.prototype.request=function(a,b,c,d){if(!(this.state>k)){var e=this.idMap[a];if(!e)return void g.invokeCallback(d,new Error("unknown server id:"+a));var f=this.reqId++;this.callbacks[f]=d,s(e.socket,f,b,c)}},m.prototype.requestServer=function(a,b,c,d,e){if(!(this.state>k)){var f=this.idMap[a];if(!f)return void g.invokeCallback(e,new Error("unknown server id:"+a));var h=this.reqId++;if(this.callbacks[h]=e,g.compareServer(f,b))s(f.socket,h,c,d);else for(var i=this.slaveMap[a],j=0,l=i.length;l>j;j++)if(g.compareServer(i[j],b)){s(i[j].socket,h,c,d);break}}},m.prototype.notifyById=function(a,b,c){if(!(this.state>k)){var d=this.idMap[a];return d?(s(d.socket,null,b,c),!0):(i.error("fail to notifyById for unknown server id:"+a),!1)}},m.prototype.notifyByServer=function(a,b,c,d){if(!(this.state>k)){var e=this.idMap[a];if(!e)return i.error("fail to notifyByServer for unknown server id:"+a),!1;if(g.compareServer(e,b))s(e.socket,null,c,d);else for(var f=this.slaveMap[a],h=0,j=f.length;j>h;h++)if(g.compareServer(f[h],b)){s(f[h].socket,null,c,d);break}return!0}},m.prototype.notifySlavesById=function(a,b,c){if(!(this.state>k)){var d=this.slaveMap[a];return d&&0!==d.length?(u(d,b,c),!0):(i.error("fail to notifySlavesById for unknown server id:"+a),!1)}},m.prototype.notifyByType=function(a,b,c){if(!(this.state>k)){var d=this.typeMap[a];return d&&0!==d.length?(u(d,b,c),!0):(i.error("fail to notifyByType for unknown server type:"+a),!1)}},m.prototype.notifyAll=function(a,b){return this.state>k?void 0:(u(this.idMap,a,b),!0)},m.prototype.notifyClient=function(a,b,c){if(!(this.state>k)){var d=this.clients[a];return d?void t(d.socket,null,b,c):(i.error("fail to notifyClient for unknown client id:"+a),!1)}},m.prototype.notifyCommand=function(a,b,c){return this.state>k?void 0:(v(this.idMap,a,b,c),!0)};var q=function(a,b,c,d,e,f){var g={id:b,type:c,pid:d,info:e,socket:f};if("client"===c)a.clients[b]=g;else if(a.idMap[b]){var h=a.slaveMap[b]=a.slaveMap[b]||[];h.push(g)}else{a.idMap[b]=g;var i=a.typeMap[c]=a.typeMap[c]||[];i.push(g)}return g},r=function(a,b,c,d){if("client"===c)delete a.clients[b];else{var e=a.idMap[b],f=e.info;if(g.compareServer(f,d)){delete a.idMap[b];var h=a.typeMap[c];if(h){for(var i=0,j=h.length;j>i;i++)if(h[i].id===b){h.splice(i,1);break}0===h.length&&delete a.typeMap[c]}}else{var k=a.slaveMap[b];if(k){for(var i=0,j=k.length;j>i;i++)if(g.compareServer(k[i].info,d)){k.splice(i,1);break}0===k.length&&delete a.slaveMap[b]}}}},s=function(a,b,c,d){a.emit("monitor",h.composeRequest(b,c,d))},t=function(a,b,c,d){a.emit("client",h.composeRequest(b,c,d))},u=function(a,b,c){if(c=h.composeRequest(null,b,c),a instanceof Array)for(var d=0,e=a.length;e>d;d++)a[d].socket.emit("monitor",c);else for(var f in a)a[f].socket.emit("monitor",c)},v=function(a,b,c,d){if(d=h.composeCommand(null,b,c,d),a instanceof Array)for(var e=0,f=a.length;f>e;e++)a[e].socket.emit("monitor",d);else for(var g in a)a[g].socket.emit("monitor",d)},w=function(a,b,c,d){if(!a.id)return void d(new Error("client should has a client id"));var e=a.username;if(!e)return b.emit("register",{code:h.PRO_FAIL,msg:"client should auth with username"}),void d(new Error("client should auth with username"));var f=c.consoleService.authUser,g=c.consoleService.env;f(a,g,function(f){return f?c.clients[a.id]?(b.emit("register",{code:h.PRO_FAIL,msg:"id has been registered. id:"+a.id}),void d(new Error("id has been registered. id:"+a.id))):(i.info("client user : "+e+" login to master"),q(c,a.id,a.type,null,f,b),b.emit("register",{code:h.PRO_OK,msg:"ok"}),void d(null)):(b.emit("register",{code:h.PRO_FAIL,msg:"client auth failed with username or password error"}),void d(new Error("client auth failed with username or password error")))})},x=function(a,b,c,d){var e=c.consoleService.authServer,f=c.consoleService.env;e(a,f,function(e){if("ok"!==e)return b.emit("register",{code:h.PRO_FAIL,msg:"server auth failed"}),void d(new Error("server auth failed"));q(c,a.id,a.serverType,a.pid,a.info,b);b.emit("register",{code:h.PRO_OK,msg:"ok"}),a.info.pid=a.pid,c.emit("register",a.info),d(null)})}}).call(this,"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/lib/masterAgent.js")},{"./util/protocol":175,"./util/utils":176,events:115,"pomelo-logger":177,"socket.io":198,util:146}],174:[function(a,b){(function(c,d){var e=a("socket.io-client"),f=a("events").EventEmitter,g=a("util"),h=a("./util/utils"),i=a("./util/protocol"),j=a("pomelo-logger").getLogger("pomelo-admin",d),k=1,l=2,m=3,n=4,o=function(a){f.call(this),this.consoleService=a.consoleService,this.id=a.id,this.type=a.type,this.info=a.info,this.socket=null,this.reqId=1,this.callbacks={},this.state=k};g.inherits(o,f),b.exports=o,o.prototype.connect=function(a,b,d){if(this.state>k)return void j.error("monitor client has connected or closed.");this.socket=e.connect(b+":"+a,{"force new connection":!0,reconnect:!0,"max reconnection attempts":20});var f=this;this.socket.on("register",function(a){a&&a.code===i.PRO_OK?(f.state=m,h.invokeCallback(d)):(f.emit("close"),j.error("server %j %j register master failed",f.id,f.type))}),this.socket.on("monitor",function(a){if(f.state===m)if(a=i.parse(a),a.command)f.consoleService.command(a.command,a.moduleId,a.body,function(){});else{if(a.respId){var b=f.callbacks[a.respId];return b?(delete f.callbacks[a.respId],void h.invokeCallback(b,a.error,a.body)):void j.warn("unknown resp id:"+a.respId)}f.consoleService.execute(a.moduleId,"monitorHandler",a.body,function(b,c){if(i.isRequest(a)){var d=i.composeResponse(a,b,c);d&&f.socket.emit("monitor",d)}else j.error("notify should not have a callback.")})}}),this.socket.on("connect",function(){if(!(f.state>k)){f.state=l;var a={id:f.id,type:"monitor",serverType:f.type,pid:c.pid,info:f.info},b=f.consoleService.authServer,d=f.consoleService.env;b(a,d,function(b){a.token=b,f.socket.emit("register",a)})}}),this.socket.on("error",function(a){f.state<l?h.invokeCallback(d,a):f.emit("error",a)}),this.socket.on("disconnect",function(){f.state=n,f.emit("close")}),this.socket.on("reconnect",function(){f.state=l;var a={id:f.id,type:"monitor",serverType:f.type,pid:c.pid,info:f.info};f.socket.emit("reconnect",a,c.pid)}),this.socket.on("reconnect_ok",function(a){a&&a.code===i.PRO_OK&&(f.state=m)
})},o.prototype.close=function(){this.state>=n||(this.state=n,this.socket.disconnect())},o.prototype.set=function(a,b){this.consoleService.set(a,b)},o.prototype.get=function(a){return this.consoleService.get(a)},o.prototype.notify=function(a,b){return this.state!==m?void j.error("agent can not notify now, state:"+this.state):void this.socket.emit("monitor",i.composeRequest(null,a,b))},o.prototype.request=function(a,b,c){if(this.state!==m)return void j.error("agent can not request now, state:"+this.state);var d=this.reqId++;this.callbacks[d]=c,this.socket.emit("monitor",i.composeRequest(d,a,b))}}).call(this,a("_process"),"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/lib/monitorAgent.js")},{"./util/protocol":175,"./util/utils":176,_process:125,events:115,"pomelo-logger":177,"socket.io-client":197,util:146}],175:[function(a,b,c){c.composeRequest=function(a,b,c){return a?JSON.stringify({reqId:a,moduleId:b,body:c}):{moduleId:b,body:c}},c.composeResponse=function(a,b,c){return a.reqId?JSON.stringify({respId:a.reqId,error:d(b),body:c}):null},c.composeCommand=function(a,b,c,d){return JSON.stringify(a?{reqId:a,command:b,moduleId:c,body:d}:{command:b,moduleId:c,body:d})},c.parse=function(a){return"string"==typeof a?JSON.parse(a):a},c.isRequest=function(a){return a&&a.reqId};var d=function(a){if(!(a instanceof Error))return a;var b={message:a.message,stack:a.stack};return b};c.PRO_OK=1,c.PRO_FAIL=-1},{}],176:[function(a,b){var c=(a("util"),a("crypto")),d=a("path"),e=a("fs"),f=b.exports;f.invokeCallback=function(a){a&&"function"==typeof a&&a.apply(null,Array.prototype.slice.call(arguments,1))},f.format=function(a,b){b=b||"MM-dd-hhmm";var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1===RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},f.compareServer=function(a,b){return a.host===b.host&&a.port===b.port},f.size=function(a,b){var c=0;for(var d in a)if(a.hasOwnProperty(d)&&"function"!=typeof a[d]){if(!b){c++;continue}b&&b===a[d].type&&c++}return c},f.md5=function(a){var b=c.createHash("md5");return b.update(a),a=b.digest("hex")},f.defaultAuthUser=function(b,c,g){var h=null,i=d.dirname(a.main.filename),j=d.join(i,"/config/adminUser.json"),k=d.join(i,"config",c,"adminUser.json");if(e.existsSync(j))h=a(j);else{if(!e.existsSync(k))return void g(null);h=a(k)}var l=b.username,m=b.password,n=b.md5,o=h.length;if(n)for(var p=0;o>p;p++){var q=h[p],r="";if(q.username===l&&(r=f.md5(q.password),m===r))return void g(q)}else for(var p=0;o>p;p++){var q=h[p];if(q.username===l&&q.password===m)return void g(q)}g(null)},f.defaultAuthServerMaster=function(b,c,f){var g=(b.id,b.serverType),h=b.token;if("master"===g)return void f("ok");var i=null,j=d.dirname(a.main.filename),k=d.join(j,"/config/adminServer.json"),l=d.join(j,"config",c,"adminServer.json");if(e.existsSync(k))i=a(k);else{if(!e.existsSync(l))return void f("ok");i=a(l)}for(var m=i.length,n=0;m>n;n++){var o=i[n];if(o.type===g&&o.token===h)return void f("ok")}f("bad")},f.defaultAuthServerMonitor=function(b,c,f){var g=(b.id,b.serverType),h=null,i=d.dirname(a.main.filename),j=d.join(i,"/config/adminServer.json"),k=d.join(i,"config",c,"adminServer.json");if(e.existsSync(j))h=a(j);else{if(!e.existsSync(k))return void f("ok");h=a(k)}for(var l=h.length,m=0;l>m;m++){var n=h[m];if(n.type===g)return void f(n.token)}f(null)}},{crypto:11,fs:1,path:124,util:146}],177:[function(a,b){b.exports=a("./lib/logger")},{"./lib/logger":178}],178:[function(a,b){(function(c){function d(a){for(var b=arguments,d="",e=1;e<b.length;e++)e!==b.length-1?d=d+b[e]+"] [":d+=b[e];"string"==typeof a&&(a=a.replace(c.cwd(),""));var f=u.getLogger(a),g={};for(var h in f)g[h]=f[h];return["log","debug","info","warn","error","trace","fatal"].forEach(function(a){g[a]=function(){var e="";b.length>1&&(e="["+d+"] "),b.length&&c.env.LOGGER_LINE&&(e=q()+": "+e),e=t(e,A[a]),b.length&&(arguments[0]=e+arguments[0]),f[a].apply(f,arguments)}}),g}function e(a,b){y.timerId&&(clearInterval(y.timerId),delete y.timerId),y.filename=a,y.lastMTime=f(a),y.timerId=setInterval(h,1e3*b)}function f(a){var b;try{b=v.statSync(a).mtime}catch(c){throw new Error("Cannot find file with given path: "+a)}return b}function g(a){return a?JSON.parse(v.readFileSync(a,"utf8")):void 0}function h(){var a=f(y.filename);a&&(y.lastMTime&&a.getTime()>y.lastMTime.getTime()&&i(g(y.filename)),y.lastMTime=a)}function i(a){if(a)try{j(a.levels),a.replaceConsole?u.replaceConsole():u.restoreConsole()}catch(b){throw new Error("Problem reading log4js config "+w.inspect(a)+'. Error was "'+b.message+'" ('+b.stack+")")}}function j(a){if(a)for(var b in a)a.hasOwnProperty(b)&&u.getLogger(b).setLevel(a[b])}function k(a,b){var d=a;a=a||c.env.LOG4JS_CONFIG,b=b||{},"string"==typeof a&&(a=JSON.parse(v.readFileSync(a,"utf8"))),a&&(a=l(a,b)),a&&a.lineDebug&&(c.env.LOGGER_LINE=!0),d&&a&&a.reloadSecs&&e(d,a.reloadSecs),u.configure(a,b)}function l(a,b){if(a instanceof Array)for(var c=0,d=a.length;d>c;c++)a[c]=l(a[c],b);else if("object"==typeof a){var e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],"string"==typeof e?a[f]=m(e,b):"object"==typeof e&&(a[f]=l(e,b)))}return a}function m(a,b){if(!a)return a;for(var c,d,e,f,g,h,i,j=/\$\{(.*?)\}/g,k="",l=0;c=j.exec(a);)d=c[1],e=d.split(":"),2===e.length||3===e.length?(f=e[0],g=e[1],3===e.length&&(h=e[2]),i=x[f],i||"function"==typeof i?(k+=a.substring(l,c.index),l=j.lastIndex,k+=i(g,b)||h):k+=d):k+=d;return l<a.length&&(k+=a.substring(l)),k}function n(a){return c.env[a]}function o(a){return c.argv[a]}function p(a,b){return b?b[a]:void 0}function q(){var a=new Error,b=a.stack.split("\n")[3].split(":")[1];return b}function r(a){return a?"["+z[a][0]+"m":""}function s(a){return a?"["+z[a][1]+"m":""}function t(a,b){return r(b)+a+s(b)}var u=a("log4js"),v=a("fs"),w=a("util"),x={env:n,args:o,opts:p},y={},z={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},A={all:"grey",trace:"blue",debug:"cyan",info:"green",warn:"yellow",error:"red",fatal:"magenta",off:"grey"};b.exports={getLogger:d,getDefaultLogger:u.getDefaultLogger,addAppender:u.addAppender,loadAppender:u.loadAppender,clearAppenders:u.clearAppenders,configure:k,replaceConsole:u.replaceConsole,restoreConsole:u.restoreConsole,levels:u.levels,setGlobalLogLevel:u.setGlobalLogLevel,layouts:u.layouts,appenders:u.appenders}}).call(this,a("_process"))},{_process:125,fs:1,log4js:183,util:146}],179:[function(a,b,c){"use strict";function d(a,b){b="object"==typeof b?b||{}:b?{format:b}:{};var c=a,d=g.toLevel(b.level,g.INFO),i=b.format||h,j=b.nolog?f(b.nolog):null;return function(a,f,h){if(a._logging)return h();if(j&&j.test(a.originalUrl))return h();if(c.isLevelEnabled(d)||"auto"===b.level){{var k,l=new Date,m=f.writeHead,n=f.end;a.originalUrl}a._logging=!0,f.writeHead=function(a,c){f.writeHead=m,f.writeHead(a,c),f.__statusCode=k=a,f.__headers=c||{},"auto"===b.level?(d=g.INFO,a>=300&&(d=g.WARN),a>=400&&(d=g.ERROR)):d=g.toLevel(b.level,g.INFO)},f.end=function(b,g){if(f.end=n,f.end(b,g),f.responseTime=new Date-l,c.isLevelEnabled(d))if("function"==typeof i){var h=i(a,f,function(b){return e(b,a,f)});h&&c.log(d,h)}else c.log(d,e(i,a,f))}}h()}}function e(a,b,c){return a.replace(":url",b.originalUrl).replace(":method",b.method).replace(":status",c.__statusCode||c.statusCode).replace(":response-time",c.responseTime).replace(":date",(new Date).toUTCString()).replace(":referrer",b.headers.referer||b.headers.referrer||"").replace(":http-version",b.httpVersionMajor+"."+b.httpVersionMinor).replace(":remote-addr",b.socket&&(b.socket.remoteAddress||b.socket.socket&&b.socket.socket.remoteAddress)).replace(":user-agent",b.headers["user-agent"]||"").replace(":content-length",c._headers&&c._headers["content-length"]||c.__headers&&c.__headers["Content-Length"]||"-").replace(/:req\[([^\]]+)\]/g,function(a,c){return b.headers[c.toLowerCase()]}).replace(/:res\[([^\]]+)\]/g,function(a,b){return c._headers?c._headers[b.toLowerCase()]||c.__headers[b]:c.__headers&&c.__headers[b]})}function f(a){var b=null;if(a&&(a instanceof RegExp&&(b=a),"string"==typeof a&&(b=new RegExp(a)),Array.isArray(a))){var c=a.map(function(a){return a.source?a.source:a});b=new RegExp(c.join("|"))}return b}var g=a("./levels"),h=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';c.connectLogger=d},{"./levels":182}],180:[function(a,b,c){"use strict";function d(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function e(a){return d(a,2)}function f(a){var b=Math.abs(a.getTimezoneOffset()),c=String(Math.floor(b/60)),d=String(b%60);return 1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),a.getTimezoneOffset()<0?"+"+c+d:"-"+c+d}c.ISO8601_FORMAT="yyyy-MM-dd hh:mm:ss.SSS",c.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ssO",c.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",c.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS",c.asString=function(a){var b=c.ISO8601_FORMAT;"string"==typeof a&&(b=arguments[0],a=arguments[1]);var g=e(a.getDate()),h=e(a.getMonth()+1),i=e(a.getFullYear()),j=e(a.getFullYear().toString().substring(3,4)),k=b.indexOf("yyyy")>-1?i:j,l=e(a.getHours()),m=e(a.getMinutes()),n=e(a.getSeconds()),o=d(a.getMilliseconds(),3),p=f(a),q=b.replace(/dd/g,g).replace(/MM/g,h).replace(/y{1,4}/g,k).replace(/hh/g,l).replace(/mm/g,m).replace(/ss/g,n).replace(/SSS/g,o).replace(/O/g,p);return q}},{}],181:[function(a,b){"use strict";function c(a){return a.map(function(a){return a instanceof Error&&a.stack?{inspect:function(){return p.format(a)+"\n"+a.stack}}:a})}function d(a){var b=Array.isArray(a)?a:Array.prototype.slice.call(arguments);return p.format.apply(p,c(b))}function e(a){return a?"["+s[a][0]+"m":""}function f(a){return a?"["+s[a][1]+"m":""}function g(a,b){return e(b)+a+f(b)}function h(a,b){var c=g(d("[%s] [%s] %s - ",m.asString(a.startTime),a.level,a.categoryName),b);return c}function i(a){return h(a)+d(a.data)}function j(a){return h(a,r[a.level.toString()])+d(a.data)}function k(a){return d(a.data)}function l(a,b){function c(a,b){var c=a.categoryName;if(b){var d=parseInt(b,10),e=c.split(".");d<e.length&&(c=e.slice(e.length-d).join("."))}return c}function g(a,b){var c=m.ISO8601_FORMAT;return b&&(c=b,"ISO8601"==c?c=m.ISO8601_FORMAT:"ABSOLUTE"==c?c=m.ABSOLUTETIME_FORMAT:"DATE"==c&&(c=m.DATETIME_FORMAT)),m.asString(c,a.startTime)}function h(a){return d(a.data)}function i(){return o}function j(a){return a.level.toString()}function k(a){return""+a.startTime.toLocaleTimeString()}function l(a){return e(r[a.level.toString()])}function n(a){return f(r[a.level.toString()])}function p(){return"%"}function q(a,c){return"undefined"!=typeof b[c]?"function"==typeof b[c]?b[c](a):b[c]:null}function s(a,b,c){return x[a](b,c)}function t(a,b){var c;return a?(c=parseInt(a.substr(1),10),b.substring(0,c)):b}function u(a,b){var c;if(a)if("-"==a.charAt(0))for(c=parseInt(a.substr(1),10);b.length<c;)b+=" ";else for(c=parseInt(a,10);b.length<c;)b=" "+b;return b}var v="%r %p %c - %m%n",w=/%(-?[0-9]+)?(\.?[0-9]+)?([\[\]cdmnprx%])(\{([^\}]+)\})?|([^%]+)/;a=a||v;var x={c:c,d:g,m:h,n:i,p:j,r:k,"[":l,"]":n,"%":p,x:q};return function(b){for(var c,d="",e=a;c=w.exec(e);){var f=c[0],g=c[1],h=c[2],i=c[3],j=c[5],k=c[6];if(k)d+=""+k;else{var l=s(i,b,j)||f;l=t(h,l),l=u(g,l),d+=l}e=e.substr(c.index+c[0].length)}return d}}var m=a("./date_format"),n=a("os"),o=n.EOL||"\n",p=a("util"),q={messagePassThrough:function(){return k},basic:function(){return i},colored:function(){return j},coloured:function(){return j},pattern:function(a){return l(a&&a.pattern,a&&a.tokens)}},r={ALL:"grey",TRACE:"blue",DEBUG:"cyan",INFO:"green",WARN:"yellow",ERROR:"red",FATAL:"magenta",OFF:"grey"},s={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};b.exports={basicLayout:i,messagePassThroughLayout:k,patternLayout:l,colouredLayout:j,coloredLayout:j,layout:function(a,b){return q[a]&&q[a](b)}}},{"./date_format":180,os:123,util:146}],182:[function(a,b){"use strict";function c(a,b){this.level=a,this.levelStr=b}function d(a,c){if(!a)return c;if("string"==typeof a){var e=a.toUpperCase();return b.exports[e]?b.exports[e]:c}return d(a.toString())}c.prototype.toString=function(){return this.levelStr},c.prototype.isLessThanOrEqualTo=function(a){return"string"==typeof a&&(a=d(a)),this.level<=a.level},c.prototype.isGreaterThanOrEqualTo=function(a){return"string"==typeof a&&(a=d(a)),this.level>=a.level},c.prototype.isEqualTo=function(a){return"string"==typeof a&&(a=d(a)),this.level===a.level},b.exports={ALL:new c(Number.MIN_VALUE,"ALL"),TRACE:new c(5e3,"TRACE"),DEBUG:new c(1e4,"DEBUG"),INFO:new c(2e4,"INFO"),WARN:new c(3e4,"WARN"),ERROR:new c(4e4,"ERROR"),FATAL:new c(5e4,"FATAL"),OFF:new c(Number.MAX_VALUE,"OFF"),toLevel:d}},{}],183:[function(a,b){(function(c){"use strict";function d(a){"string"!=typeof a&&(a=z.DEFAULT_CATEGORY);var b;return C[a]||(C[a]=new z(a),B[a]&&(b=B[a],b.forEach(function(b){C[a].addListener("log",b)})),B[A]&&(b=B[A],b.forEach(function(b){C[a].addListener("log",b)}))),C[a]}function e(){var a=Array.prototype.slice.call(arguments),b=a.shift();(0===a.length||void 0===a[0])&&(a=[A]),Array.isArray(a[0])&&(a=a[0]),a.forEach(function(a){g(b,a),a===A?f(b):C[a]&&C[a].addListener("log",b)})}function f(a){for(var b in C)C.hasOwnProperty(b)&&C[b].addListener("log",a)}function g(a,b){B[b]||(B[b]=[]),B[b].push(a)}function h(){B={};for(var a in C)C.hasOwnProperty(a)&&C[a].removeAllListeners("log")}function i(a,b){h(),a&&a.forEach(function(a){u(a.type);var c;a.makers=D;try{c=D[a.type](a,b),e(c,a.category)}catch(d){throw new Error("log4js configuration problem for "+w.inspect(a),d)}})}function j(a){if(a)for(var b in a)a.hasOwnProperty(b)&&d(b).setLevel(a[b])}function k(a){z.prototype.level=y.toLevel(a,y.TRACE)}function l(){return d(z.DEFAULT_CATEGORY)}function m(a){return a?JSON.parse(v.readFileSync(a,"utf8")):void 0}function n(a,b){if(a)try{i(a.appenders,b),j(a.levels),a.replaceConsole?s():t()}catch(c){throw new Error("Problem reading log4js config "+w.inspect(a)+'. Error was "'+c.message+'" ('+c.stack+")")}}function o(){var a=p(F.filename);a&&(F.lastMTime&&a.getTime()>F.lastMTime.getTime()&&n(m(F.filename)),F.lastMTime=a)}function p(a){var b;try{b=v.statSync(F.filename).mtime}catch(c){d("log4js").warn("Failed to load configuration file "+a)}return b}function q(a,b){F.timerId&&(clearInterval(F.timerId),delete F.timerId),F.filename=a,F.lastMTime=p(a),F.timerId=setInterval(o,1e3*b.reloadSecs)}function r(a,b){var e=a;e=e||c.env.LOG4JS_CONFIG,b=b||{},void 0===e||null===e||"string"==typeof e?(b.reloadSecs&&q(e,b),e=m(e)||E):b.reloadSecs&&d("log4js").warn('Ignoring configuration reload parameter for "object" configuration.'),n(e,b)}function s(a){function b(b){return function(){b.apply(a,arguments)}}a=a||d("console"),["log","debug","info","warn","error"].forEach(function(c){console[c]=b("log"===c?a.info:a[c])})}function t(){["log","debug","info","warn","error"].forEach(function(a){console[a]=G[a]})}function u(c){var d;try{d=a("./appenders/"+c)}catch(e){d=a(c)}b.exports.appenders[c]=d.appender.bind(d),D[c]=d.configure.bind(d)}var v=(a("events"),a("fs")),w=(a("path"),a("util")),x=a("./layouts"),y=a("./levels"),z=(a("./logger").LoggingEvent,a("./logger").Logger),A="[all]",B={},C={},D={},E={appenders:[{type:"console"}],replaceConsole:!1},F={},G={log:console.log,debug:console.debug,info:console.info,warn:console.warn,error:console.error};b.exports={getLogger:d,getDefaultLogger:l,addAppender:e,loadAppender:u,clearAppenders:h,configure:r,replaceConsole:s,restoreConsole:t,levels:y,setGlobalLogLevel:k,layouts:x,appenders:{},appenderMakers:D,connectLogger:a("./connect-logger").connectLogger},r()}).call(this,a("_process"))},{"./connect-logger":179,"./layouts":181,"./levels":182,"./logger":184,_process:125,events:115,fs:1,path:124,util:146}],184:[function(a,b,c){"use strict";function d(a,b,c,d){this.startTime=new Date,this.categoryName=a,this.data=c,this.level=b,this.logger=d}function e(a,b){this.category=a||i,b&&this.setLevel(b)}var f=a("./levels"),g=a("util"),h=a("events"),i="[default]";g.inherits(e,h.EventEmitter),e.DEFAULT_CATEGORY=i,e.prototype.level=f.TRACE,e.prototype.setLevel=function(a){this.level=f.toLevel(a,this.level||f.TRACE)},e.prototype.removeLevel=function(){delete this.level},e.prototype.log=function(){var a=Array.prototype.slice.call(arguments),b=a.shift(),c=new d(this.category,b,a,this);this.emit("log",c)},e.prototype.isLevelEnabled=function(a){return this.level.isLessThanOrEqualTo(a)},["Trace","Debug","Info","Warn","Error","Fatal"].forEach(function(a){var b=f.toLevel(a);e.prototype["is"+a+"Enabled"]=function(){return this.isLevelEnabled(b)},e.prototype[a.toLowerCase()]=function(){if(this.isLevelEnabled(b)){var a=Array.prototype.slice.call(arguments);a.unshift(b),e.prototype.log.apply(this,a)}}}),c.LoggingEvent=d,c.Logger=e},{"./levels":182,events:115,util:146}],185:[function(a,b){(function(c){function d(a,b){if(a+=1,"number"==typeof b)return-1==b?a:b;if("object"==typeof b&&b instanceof Array){if(a<=b[0]||a>b[b.length-1])return b[0];for(var c=0;c<b.length;c++)if(a<=b[c])return b[c]}return k.warn("Compute next Time error! value :"+a+" cronTime : "+b),null}function e(a,b){if("number"==typeof b)return-1==b?!0:a==b?!0:!1;if("object"==typeof b&&b instanceof Array){if(a<b[0]||a>b[b.length-1])return!1;for(var c=0;c<b.length;c++)if(a==b[c])return!0;return!1}return null}function f(a,b){var c=b.split("-");if(c[0]=Number(c[0]),c[1]=Number(c[1]),c[0]>c[1])return console.log("Error time range"),null;for(var d=c[0];d<=c[1];d++)a[d]=d}function g(a,b,c){var d=b.split("/"),e=r[c][0],f=r[c][1],g=Number(d[0]),h=Number(d[1]);if(0!=h)for(var i=e;f>=i;i++)i%h==g&&(a[i]=i)}function h(a,b,c){if(null==a)return!1;if(-1==a)return!0;for(var d=0;d<a.length;d++)if(a[d]<b||a[d]>c)return!1;return!0}function i(a,b){var c=new Date(a,b+1,0);return c.getDate()}function j(a,b){return new s(a,b)}var k=a("log4js").getLogger(c),l=0,m=1,n=2,o=3,p=4,q=5,r=[[0,59],[0,59],[0,24],[1,31],[0,11],[0,6]],s=function(a,b){this.trigger=this.decodeTrigger(a),this.nextTime=this.nextExcuteTime(Date.now()),this.job=b},t=s.prototype;t.excuteTime=function(){return this.nextTime},t.nextExcuteTime=function(a){a=a?a:this.nextTime,a+=1e3;var b=this.trigger,c=new Date(a);c.setMilliseconds(0);a:for(;;){if(c.getFullYear()>2999)return k.error("Can't compute the next time, exceed the limit"),null;if(!e(c.getMonth(),b[p])){var f=d(c.getMonth(),b[p]);if(null==f)return null;if(f<=c.getMonth()){c.setYear(c.getFullYear()+1),c.setMonth(0),c.setDate(1),c.setHours(0),c.setMinutes(0),c.setSeconds(0);continue}c.setMonth(f),c.setDate(1),c.setHours(0),c.setMinutes(0),c.setSeconds(0)}if(!e(c.getDate(),b[o])||!e(c.getDay(),b[q])){var g=i(c.getFullYear(),c.getMonth());do{var h=d(c.getDate(),b[o]);if(null==h)return null;if(h<=c.getDate()||h>g){c.setMonth(c.getMonth()+1),c.setDate(1),c.setHours(0),c.setMinutes(0),c.setSeconds(0);continue a}c.setDate(h)}while(!e(c.getDay(),b[q]));c.setHours(0),c.setMinutes(0),c.setSeconds(0)}if(!e(c.getHours(),b[n])){var j=d(c.getHours(),b[n]);if(j<=c.getHours()){c.setDate(c.getDate()+1),c.setHours(j),c.setMinutes(0),c.setSeconds(0);continue}c.setHours(j),c.setMinutes(0),c.setSeconds(0)}if(!e(c.getMinutes(),b[m])){var r=d(c.getMinutes(),b[m]);if(r<=c.getMinutes()){c.setHours(c.getHours()+1),c.setMinutes(r),c.setSeconds(0);continue}c.setMinutes(r),c.setSeconds(0)}if(!e(c.getSeconds(),b[l])){var s=d(c.getSeconds(),b[l]);if(s<=c.getSeconds()){c.setMinutes(c.getMinutes()+1),c.setSeconds(s);continue}c.setSeconds(s)}break}return this.nextTime=c.getTime(),this.nextTime},t.decodeTrigger=function(a){var b=a.split(/\s+/);if(6!=b.length)return console.log("error"),null;for(var c=0;c<b.length;c++)if(b[c]=this.decodeTimeStr(b[c],c),!h(b[c],r[c][0],r[c][1]))return k.error("Decode crontime error, value exceed limit!"+JSON.stringify({cronTime:b[c],limit:r[c]})),null;return b},t.decodeTimeStr=function(a,b){var c={},d=[];if("*"==a)return-1;if(a.search(",")>0)for(var e=a.split(","),h=0;h<e.length;h++){var i=e[h];if(i.match(/^\d+-\d+$/))f(c,i);else if(i.match(/^\d+\/\d+/))g(c,i,b);else{if(isNaN(i))return null;var j=Number(i);c[j]=j}}else if(a.match(/^\d+-\d+$/))f(c,a);else if(a.match(/^\d+\/\d+/))g(c,a,b);else{if(isNaN(a))return null;var j=Number(a);c[j]=j}for(var k in c)d.push(c[k]);return d.sort(function(a,b){return a-b}),d},b.exports.createTrigger=j}).call(this,"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-scheduler/lib/cronTrigger.js")},{log4js:194}],186:[function(a,b){(function(c){function d(a,b,c){return new n(a,b,c)}var e=a("./cronTrigger"),f=a("./simpleTrigger"),g=1,h=1,i=2,j=0,k=500,l=a("log4js").getLogger(c),m=0,n=function(a,b,c){this.data=c?c:null,this.func=b,"string"==typeof a?(this.type=i,this.trigger=e.createTrigger(a,this)):"object"==typeof a&&(this.type=h,this.trigger=f.createTrigger(a,this)),this.id=g++,this.runTime=0},o=n.prototype;o.run=function(){try{j++,this.runTime++;var a=Date.now()-this.excuteTime();a>k&&l.warn("run Job count "+j+" late :"+a+" lateCount "+ ++m),this.func(this.data)}catch(b){l.error("Job run error for exception ! "+b.stack)}},o.nextTime=function(){return this.trigger.nextExcuteTime()},o.excuteTime=function(){return this.trigger.excuteTime()},b.exports.createJob=d}).call(this,"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-scheduler/lib/job.js")},{"./cronTrigger":185,"./simpleTrigger":189,log4js:194}],187:[function(a,b){var c=function(a){this.init(a)},d=c.prototype;d.init=function(a){this._comparator="function"==typeof a?a:this._defaultComparator,this._queue=[],this._tailPos=0},d.size=function(){return this._tailPos},d.offer=function(a){var b=this._queue,c=this._comparator;b[this._tailPos++]=a;for(var d=this._tailPos-1;d>0;){var e=d%2==0?d/2-1:(d-1)/2;if(!c(b[e],a))break;b[d]=b[e],b[e]=a,d=e}},d.pop=function(){var a=this._queue,b=this._comparator;if(0==this._tailPos)return null;var c=a[0],d=a[this._tailPos-1],e=0,f=2*e+1,g=f+1;for(a[e]=d,this._tailPos--;f<this._tailPos;){if(g<this._tailPos&&b(a[f],a[g])&&b(a[e],a[g]))a[e]=a[g],a[g]=d,e=g;else{if(!b(a[e],a[f]))break;a[e]=a[f],a[f]=d,e=f}f=2*e+1,g=f+1}return c},d.peek=function(){return 0==this._tailPos?null:this._queue[0]},d._defaultComparator=function(a,b){return a>b},b.exports.createPriorityQueue=function(a){return new c(a)}},{}],188:[function(a,b){(function(c){function d(a,b,c){var d=l.createJob(a,b,c),e=d.excuteTime(),g=d.id;m[g]=d;var h={id:g,time:e},i=n.peek();return!i||e<i.time?(n.offer(h),f(d),d.id):(n.offer(h),d.id)}function e(a){var b=n.peek();return b&&a===b.id&&(n.pop(),delete m[a],clearTimeout(j),g()),delete m[a],!0}function f(a){clearTimeout(j),j=setTimeout(g,a.excuteTime()-Date.now())}function g(){for(var a=h();a&&a.excuteTime()-Date.now()<o;){a.run(),n.pop();var b=a.nextTime();null===b?delete m[a.id]:n.offer({id:a.id,time:b}),a=h()}a&&f(a)}function h(){if(n.size()<=0)return null;var a=null;do a=m[n.peek().id],a||n.pop();while(!a&&n.size()>0);return a?a:null}function i(a,b){return a.time>b.time}var j,k=a("./priorityQueue"),l=a("./job.js"),m=(a("log4js").getLogger(c),{}),n=k.createPriorityQueue(i),o=10;b.exports.scheduleJob=d,b.exports.cancelJob=e}).call(this,"/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-scheduler/lib/schedule.js")},{"./job.js":186,"./priorityQueue":187,log4js:194}],189:[function(a,b){function c(a,b){return new e(a,b)}var d=!1,e=function(a,b){this.nextTime=a.start?a.start:Date.now(),this.period=a.period?a.period:-1,this.count=a.count?a.count:-1,this.job=b},f=e.prototype;f.excuteTime=function(){return this.nextTime},f.nextExcuteTime=function(){var a=this.period;return this.count>0&&this.count<=this.job.runTime||0>=a?null:(this.nextTime+=a,d&&this.nextTime<Date.now()&&(this.nextTime+=Math.floor((Date.now()-this.nextTime)/a)*a),this.nextTime)},b.exports.createTrigger=c},{}],190:[function(a,b,c){"use strict";function d(a,b){b="object"==typeof b?b||{}:b?{format:b}:{};var c=a,d=g.toLevel(b.level,g.INFO),i=b.format||h,j=b.nolog?f(b.nolog):null;return function(a,f,h){if(a._logging)return h();if(j&&j.test(a.originalUrl))return h();if(c.isLevelEnabled(d)||"auto"===b.level){{var k,l=new Date,m=f.writeHead,n=f.end;a.originalUrl}a._logging=!0,f.writeHead=function(a,c){f.writeHead=m,f.writeHead(a,c),f.__statusCode=k=a,f.__headers=c||{},"auto"===b.level?(d=g.INFO,a>=300&&(d=g.WARN),a>=400&&(d=g.ERROR)):d=g.toLevel(b.level,g.INFO)},f.end=function(h,j){if(f.end=n,f.end(h,j),f.responseTime=new Date-l,f.statusCode&&"auto"===b.level&&(d=g.INFO,f.statusCode>=300&&(d=g.WARN),f.statusCode>=400&&(d=g.ERROR)),c.isLevelEnabled(d))if("function"==typeof i){var k=i(a,f,function(b){return e(b,a,f)});k&&c.log(d,k)}else c.log(d,e(i,a,f))}}h()}}function e(a,b,c){return a.replace(":url",b.originalUrl).replace(":method",b.method).replace(":status",c.__statusCode||c.statusCode).replace(":response-time",c.responseTime).replace(":date",(new Date).toUTCString()).replace(":referrer",b.headers.referer||b.headers.referrer||"").replace(":http-version",b.httpVersionMajor+"."+b.httpVersionMinor).replace(":remote-addr",b.ip||b._remoteAddress||b.socket&&(b.socket.remoteAddress||b.socket.socket&&b.socket.socket.remoteAddress)).replace(":user-agent",b.headers["user-agent"]||"").replace(":content-length",c._headers&&c._headers["content-length"]||c.__headers&&c.__headers["Content-Length"]||"-").replace(/:req\[([^\]]+)\]/g,function(a,c){return b.headers[c.toLowerCase()]}).replace(/:res\[([^\]]+)\]/g,function(a,b){return c._headers?c._headers[b.toLowerCase()]||c.__headers[b]:c.__headers&&c.__headers[b]})}function f(a){var b=null;if(a&&(a instanceof RegExp&&(b=a),"string"==typeof a&&(b=new RegExp(a)),Array.isArray(a))){var c=a.map(function(a){return a.source?a.source:a});b=new RegExp(c.join("|"))}return b}var g=a("./levels"),h=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';c.connectLogger=d},{"./levels":193}],191:[function(a,b,c){"use strict";function d(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function e(a){return d(a,2)}function f(a){var b=Math.abs(a.getTimezoneOffset()),c=String(Math.floor(b/60)),d=String(b%60);return 1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),a.getTimezoneOffset()<0?"+"+c+d:"-"+c+d}c.ISO8601_FORMAT="yyyy-MM-dd hh:mm:ss.SSS",c.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ssO",c.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",c.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS",c.asString=function(a){var b=c.ISO8601_FORMAT;"string"==typeof a&&(b=arguments[0],a=arguments[1]);var g=e(a.getDate()),h=e(a.getMonth()+1),i=e(a.getFullYear()),j=e(a.getFullYear().toString().substring(2,4)),k=b.indexOf("yyyy")>-1?i:j,l=e(a.getHours()),m=e(a.getMinutes()),n=e(a.getSeconds()),o=d(a.getMilliseconds(),3),p=f(a),q=b.replace(/dd/g,g).replace(/MM/g,h).replace(/y{1,4}/g,k).replace(/hh/g,l).replace(/mm/g,m).replace(/ss/g,n).replace(/SSS/g,o).replace(/O/g,p);return q}},{}],192:[function(a,b){(function(c){"use strict";function d(a){return a.map(function(a){return a instanceof Error&&a.stack?{inspect:function(){return q.format(a)+"\n"+a.stack}}:a})}function e(a){var b=Array.isArray(a)?a:Array.prototype.slice.call(arguments);return q.format.apply(q,d(b))}function f(a){return a?"["+t[a][0]+"m":""}function g(a){return a?"["+t[a][1]+"m":""}function h(a,b){return f(b)+a+g(b)}function i(a,b){var c=h(e("[%s] [%s] %s - ",n.asString(a.startTime),a.level,a.categoryName),b);return c}function j(a){return i(a)+e(a.data)}function k(a){return i(a,s[a.level.toString()])+e(a.data)}function l(a){return e(a.data)}function m(a,b){function d(a,b){var c=a.categoryName;if(b){var d=parseInt(b,10),e=c.split(".");d<e.length&&(c=e.slice(e.length-d).join("."))}return c}function h(a,b){var c=n.ISO8601_FORMAT;return b&&(c=b,"ISO8601"==c?c=n.ISO8601_FORMAT:"ISO8601_WITH_TZ_OFFSET"==c?c=n.ISO8601_WITH_TZ_OFFSET_FORMAT:"ABSOLUTE"==c?c=n.ABSOLUTETIME_FORMAT:"DATE"==c&&(c=n.DATETIME_FORMAT)),n.asString(c,a.startTime)}function i(){return o.hostname().toString()}function j(a){return e(a.data)}function k(){return p}function l(a){return a.level.toString()}function m(a){return""+a.startTime.toLocaleTimeString()}function q(a){return f(s[a.level.toString()])}function r(a){return g(s[a.level.toString()])}function t(){return"%"}function u(){return c.pid}function v(a,c){return"undefined"!=typeof b[c]?"function"==typeof b[c]?b[c](a):b[c]:null}function w(a,b,c){return B[a](b,c)}function x(a,b){var c;return a?(c=parseInt(a.substr(1),10),b.substring(0,c)):b}function y(a,b){var c;if(a)if("-"==a.charAt(0))for(c=parseInt(a.substr(1),10);b.length<c;)b+=" ";else for(c=parseInt(a,10);b.length<c;)b=" "+b;return b}var z="%r %p %c - %m%n",A=/%(-?[0-9]+)?(\.?[0-9]+)?([\[\]cdhmnprzx%])(\{([^\}]+)\})?|([^%]+)/;a=a||z;var B={c:d,d:h,h:i,m:j,n:k,p:l,r:m,"[":q,"]":r,z:u,"%":t,x:v};return function(b){for(var c,d="",e=a;c=A.exec(e);){var f=c[0],g=c[1],h=c[2],i=c[3],j=c[5],k=c[6];if(k)d+=""+k;else{var l=w(i,b,j)||f;l=x(h,l),l=y(g,l),d+=l}e=e.substr(c.index+c[0].length)}return d}}var n=a("./date_format"),o=a("os"),p=o.EOL||"\n",q=a("util"),r={messagePassThrough:function(){return l},basic:function(){return j},colored:function(){return k},coloured:function(){return k},pattern:function(a){return m(a&&a.pattern,a&&a.tokens)}},s={ALL:"grey",TRACE:"blue",DEBUG:"cyan",INFO:"green",WARN:"yellow",ERROR:"red",FATAL:"magenta",OFF:"grey"},t={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};b.exports={basicLayout:j,messagePassThroughLayout:l,patternLayout:m,colouredLayout:k,coloredLayout:k,layout:function(a,b){return r[a]&&r[a](b)}}}).call(this,a("_process"))},{"./date_format":191,_process:125,os:3,util:146}],193:[function(a,b){b.exports=a(182)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-logger/node_modules/log4js/lib/levels.js":182}],194:[function(a,b){(function(c){"use strict";function d(a){return I.hasOwnProperty(a)}function e(a){var b=f(a),c={};return c.temp=[],c.target=b,c.flush=function(){for(var a=0;a<c.temp.length;a++){var b=c.temp[a];c.target[b.level](b.message),delete c.temp[a]}},c.trace=function(a){c.temp.push({level:"trace",message:a})},c.debug=function(a){c.temp.push({level:"debug",message:a})},c.info=function(a){c.temp.push({level:"info",message:a})},c.warn=function(a){c.temp.push({level:"warn",message:a})},c.error=function(a){c.temp.push({level:"error",message:a})},c.fatal=function(a){c.temp.push({level:"fatal",message:a})},c}function f(a){"string"!=typeof a&&(a=F.DEFAULT_CATEGORY);var b;return d(a)||(I[a]=new F(a),H[a]&&(b=H[a],b.forEach(function(b){I[a].addListener("log",b)})),H[G]&&(b=H[G],b.forEach(function(b){I[a].addListener("log",b)}))),I[a]}function g(){var a=Array.prototype.slice.call(arguments),b=a.shift();(0===a.length||void 0===a[0])&&(a=[G]),Array.isArray(a[0])&&(a=a[0]),a.forEach(function(a){i(b,a),a===G?h(b):d(a)&&I[a].addListener("log",b)})}function h(a){for(var b in I)d(b)&&I[b].addListener("log",a)}function i(a,b){H[b]||(H[b]=[]),H[b].push(a)}function j(){H={};for(var a in I)d(a)&&I[a].removeAllListeners("log")}function k(a,b){j(),a&&a.forEach(function(a){x(a.type);var c;a.makers=J;try{c=J[a.type](a,b),g(c,a.category)}catch(d){throw new Error("log4js configuration problem for "+B.inspect(a),d)}})}function l(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(b===G&&m(a[b]),f(b).setLevel(a[b]))}function m(a){F.prototype.level=D.toLevel(a,D.TRACE)}function n(){return f(F.DEFAULT_CATEGORY)
}function o(a){return a?JSON.parse(A.readFileSync(a,"utf8")):void 0}function p(a,b){if(a)try{k(a.appenders,b),l(a.levels),a.replaceConsole?u():v()}catch(c){throw new Error("Problem reading log4js config "+B.inspect(a)+'. Error was "'+c.message+'" ('+c.stack+")")}}function q(){var a=r(M.filename);a&&(M.lastMTime&&a.getTime()>M.lastMTime.getTime()&&p(o(M.filename)),M.lastMTime=a)}function r(a){var b;try{b=A.statSync(M.filename).mtime}catch(c){f("log4js").warn("Failed to load configuration file "+a)}return b}function s(a,b){M.timerId&&(clearInterval(M.timerId),delete M.timerId),M.filename=a,M.lastMTime=r(a),M.timerId=setInterval(q,1e3*b.reloadSecs)}function t(a,b){var d=a;d=d||c.env.LOG4JS_CONFIG,b=b||{},void 0===d||null===d||"string"==typeof d?(b.reloadSecs&&s(d,b),d=o(d)||L):b.reloadSecs&&f("log4js").warn('Ignoring configuration reload parameter for "object" configuration.'),p(d,b)}function u(a){function b(b){return function(){b.apply(a,arguments)}}a=a||f("console"),["log","debug","info","warn","error"].forEach(function(c){console[c]=b("log"===c?a.info:a[c])})}function v(){["log","debug","info","warn","error"].forEach(function(a){console[a]=N[a]})}function w(b){var c;try{c=a("./appenders/"+b)}catch(d){c=a(b)}return c}function x(a,c){if(c=c||w(a),!c)throw new Error("Invalid log4js appender: "+B.inspect(a));b.exports.appenders[a]=c.appender.bind(c),c.shutdown&&(K[a]=c.shutdown.bind(c)),J[a]=c.configure.bind(c)}function y(a){E.disableAllLogWrites();var b=Object.keys(K).reduce(function(a,b){return a.concat(K[b])},[]);z.each(b,function(a,b){a(b)},a)}var z=(a("events"),a("async")),A=a("fs"),B=(a("path"),a("util")),C=a("./layouts"),D=a("./levels"),E=a("./logger"),F=(E.LoggingEvent,E.Logger),G="[all]",H={},I={},J={},K={},L={appenders:[{type:"console"}],replaceConsole:!1},M={},N={log:console.log,debug:console.debug,info:console.info,warn:console.warn,error:console.error};b.exports={getBufferedLogger:e,getLogger:f,getDefaultLogger:n,hasLogger:d,addAppender:g,loadAppender:x,clearAppenders:j,configure:t,shutdown:y,replaceConsole:u,restoreConsole:v,levels:D,setGlobalLogLevel:m,layouts:C,appenders:{},appenderMakers:J,connectLogger:a("./connect-logger").connectLogger},t()}).call(this,a("_process"))},{"./connect-logger":190,"./layouts":192,"./levels":193,"./logger":195,_process:125,async:196,events:115,fs:1,path:124,util:146}],195:[function(a,b,c){"use strict";function d(a,b,c,d){this.startTime=new Date,this.categoryName=a,this.data=c,this.level=b,this.logger=d}function e(a,b){this.category=a||k,b&&this.setLevel(b)}function f(){l=!1}function g(){l=!0}var h=a("./levels"),i=a("util"),j=a("events"),k="[default]",l=!0;i.inherits(e,j.EventEmitter),e.DEFAULT_CATEGORY=k,e.prototype.level=h.TRACE,e.prototype.setLevel=function(a){this.level=h.toLevel(a,this.level||h.TRACE)},e.prototype.removeLevel=function(){delete this.level},e.prototype.log=function(){var a,b=Array.prototype.slice.call(arguments),c=h.toLevel(b.shift());this.isLevelEnabled(c)&&(a=new d(this.category,c,b,this),this.emit("log",a))},e.prototype.isLevelEnabled=function(a){return this.level.isLessThanOrEqualTo(a)},["Trace","Debug","Info","Warn","Error","Fatal"].forEach(function(a){var b=h.toLevel(a);e.prototype["is"+a+"Enabled"]=function(){return this.isLevelEnabled(b)},e.prototype[a.toLowerCase()]=function(){if(l&&this.isLevelEnabled(b)){var a=Array.prototype.slice.call(arguments);a.unshift(b),e.prototype.log.apply(this,a)}}}),c.LoggingEvent=d,c.Logger=e,c.disableAllLogWrites=f,c.enableAllLogWrites=g},{"./levels":193,events:115,util:146}],196:[function(a,b){(function(a){!function(){function c(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(d,arguments)}}var d,e,f={};d=this,null!=d&&(e=d.async),f.noConflict=function(){return d.async=e,f};var g=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},h=function(a,b){if(a.map)return a.map(b);var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},i=function(a,b,c){return a.reduce?a.reduce(b,c):(g(a,function(a,d,e){c=b(c,a,d,e)}),c)},j=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof a&&a.nextTick?(f.nextTick=a.nextTick,f.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:f.nextTick):"function"==typeof setImmediate?(f.nextTick=function(a){setImmediate(a)},f.setImmediate=f.nextTick):(f.nextTick=function(a){setTimeout(a,0)},f.setImmediate=f.nextTick),f.each=function(a,b,d){if(d=d||function(){},!a.length)return d();var e=0;g(a,function(f){b(f,c(function(b){b?(d(b),d=function(){}):(e+=1,e>=a.length&&d(null))}))})},f.forEach=f.each,f.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},f.forEachSeries=f.eachSeries,f.eachLimit=function(a,b,c,d){var e=k(b);e.apply(null,[a,c,d])},f.forEachLimit=f.eachLimit;var k=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.each].concat(b))}},m=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[k(a)].concat(c))}},n=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[f.eachSeries].concat(b))}},o=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};f.map=l(o),f.mapSeries=n(o),f.mapLimit=function(a,b,c,d){return p(b)(a,c,d)};var p=function(a){return m(a,o)};f.reduce=function(a,b,c,d){f.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},f.inject=f.reduce,f.foldl=f.reduce,f.reduceRight=function(a,b,c,d){var e=h(a,function(a){return a}).reverse();f.reduce(e,b,c,d)},f.foldr=f.reduceRight;var q=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.filter=l(q),f.filterSeries=n(q),f.select=f.filter,f.selectSeries=f.filterSeries;var r=function(a,b,c,d){var e=[];b=h(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(h(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};f.reject=l(r),f.rejectSeries=n(r);var s=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};f.detect=l(s),f.detectSeries=n(s),f.some=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},f.any=f.some,f.every=function(a,b,c){f.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},f.all=f.every,f.sortBy=function(a,b,c){f.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,h(b.sort(d),function(a){return a.value}))})},f.auto=function(a,b){b=b||function(){};var c=j(a);if(!c.length)return b(null);var d={},e=[],h=function(a){e.unshift(a)},k=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},l=function(){g(e.slice(0),function(a){a()})};h(function(){j(d).length===c.length&&(b(null,d),b=function(){})}),g(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var e=Array.prototype.slice.call(arguments,1);if(e.length<=1&&(e=e[0]),a){var h={};g(j(d),function(a){h[a]=d[a]}),h[c]=e,b(a,h),b=function(){}}else d[c]=e,f.setImmediate(l)},n=e.slice(0,Math.abs(e.length-1))||[],o=function(){return i(n,function(a,b){return a&&d.hasOwnProperty(b)},!0)&&!d.hasOwnProperty(c)};if(o())e[e.length-1](m,d);else{var p=function(){o()&&(k(p),e[e.length-1](m,d))};h(p)}})},f.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var d=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var e=Array.prototype.slice.call(arguments,1),g=a.next();e.push(g?d(g):b),f.setImmediate(function(){a.apply(null,e)})}}};d(f.iterator(a))()};var t=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(j(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};f.parallel=function(a,b){t({map:f.map,each:f.each},a,b)},f.parallelLimit=function(a,b,c){t({map:p(b),each:k(b)},a,c)},f.series=function(a,b){if(b=b||function(){},a.constructor===Array)f.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};f.eachSeries(j(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},f.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},f.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var u=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};f.concat=l(u),f.concatSeries=n(u),f.whilst=function(a,b,c){a()?b(function(d){return d?c(d):void f.whilst(a,b,c)}):c()},f.doWhilst=function(a,b,c){a(function(d){return d?c(d):void(b()?f.doWhilst(a,b,c):c())})},f.until=function(a,b,c){a()?c():b(function(d){return d?c(d):void f.until(a,b,c)})},f.doUntil=function(a,b,c){a(function(d){return d?c(d):void(b()?c():f.doUntil(a,b,c))})},f.queue=function(a,b){function d(a,c,d,e){c.constructor!==Array&&(c=[c]),g(c,function(c){var g={data:c,callback:"function"==typeof e?e:null};d?a.tasks.unshift(g):a.tasks.push(g),a.saturated&&a.tasks.length===b&&a.saturated(),f.setImmediate(a.process)})}void 0===b&&(b=1);var e=0,h={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,b){d(h,a,!1,b)},unshift:function(a,b){d(h,a,!0,b)},process:function(){if(e<h.concurrency&&h.tasks.length){var b=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),e+=1;var d=function(){e-=1,b.callback&&b.callback.apply(b,arguments),h.drain&&h.tasks.length+e===0&&h.drain(),h.process()},f=c(d);a(b.data,f)}},length:function(){return h.tasks.length},running:function(){return e}};return h},f.cargo=function(a,b){var c=!1,d=[],e={tasks:d,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),g(a,function(a){d.push({data:a,callback:"function"==typeof c?c:null}),e.saturated&&d.length===b&&e.saturated()}),f.setImmediate(e.process)},process:function i(){if(!c){if(0===d.length)return void(e.drain&&e.drain());var f="number"==typeof b?d.splice(0,b):d.splice(0),j=h(f,function(a){return a.data});e.empty&&e.empty(),c=!0,a(j,function(){c=!1;var a=arguments;g(f,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return d.length},running:function(){return c}};return e};var v=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&g(c,function(b){console[a](b)}))}]))}};f.log=v("log"),f.dir=v("dir"),f.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},f.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},f.times=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.map(d,b,c)},f.timesSeries=function(a,b,c){for(var d=[],e=0;a>e;e++)d.push(e);return f.mapSeries(d,b,c)},f.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();f.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};var w=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};f.applyEach=l(w),f.applyEachSeries=n(w),f.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:d.async=f}()}).call(this,a("_process"))},{_process:125}],197:[function(require,module,exports){var io="undefined"==typeof module?{}:module.exports;!function(){if(function(a,b){var c=a;c.version="0.9.16",c.protocol=1,c.transports=[],c.j=[],c.sockets={},c.connect=function(a,d){var e,f,g=c.util.parseUri(a);b&&b.location&&(g.protocol=g.protocol||b.location.protocol.slice(0,-1),g.host=g.host||(b.document?b.document.domain:b.location.hostname),g.port=g.port||b.location.port),e=c.util.uniqueUri(g);var h={host:g.host,secure:"https"==g.protocol,port:g.port||("https"==g.protocol?443:80),query:g.query||""};return c.util.merge(h,d),(h["force new connection"]||!c.sockets[e])&&(f=new c.Socket(h)),!h["force new connection"]&&f&&(c.sockets[e]=f),f=f||c.sockets[e],f.of(g.path.length>1?g.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(a,b){var c=a.util={},d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];c.parseUri=function(a){for(var b=d.exec(a||""),c={},f=14;f--;)c[e[f]]=b[f]||"";return c},c.uniqueUri=function(a){var c=a.protocol,d=a.host,e=a.port;return"document"in b?(d=d||document.domain,e=e||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(d=d||"localhost",e||"https"!=c||(e=443)),(c||"http")+"://"+d+":"+(e||80)},c.query=function(a,b){var d=c.chunkQuery(a||""),e=[];c.merge(d,c.chunkQuery(b||""));for(var f in d)d.hasOwnProperty(f)&&e.push(f+"="+d[f]);return e.length?"?"+e.join("&"):""},c.chunkQuery=function(a){for(var b,c={},d=a.split("&"),e=0,f=d.length;f>e;++e)b=d[e].split("="),b[0]&&(c[b[0]]=b[1]);return c};var f=!1;c.load=function(a){return"document"in b&&"complete"===document.readyState||f?a():void c.on(b,"load",a,!1)},c.on=function(a,b,c,d){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,d)},c.request=function(a){if(a&&"undefined"!=typeof XDomainRequest&&!c.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!a||c.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(b){}return null},"undefined"!=typeof window&&c.load(function(){f=!0}),c.defer=function(a){return c.ua.webkit&&"undefined"==typeof importScripts?void c.load(function(){setTimeout(a,100)}):a()},c.merge=function(a,b,d,e){var f,g=e||[],h="undefined"==typeof d?2:d;for(f in b)b.hasOwnProperty(f)&&c.indexOf(g,f)<0&&("object"==typeof a[f]&&h?c.merge(a[f],b[f],h-1,g):(a[f]=b[f],g.push(b[f])));return a},c.mixin=function(a,b){c.merge(a.prototype,b.prototype)},c.inherit=function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c},c.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},c.intersect=function(a,b){for(var d=[],e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=0,h=f.length;h>g;g++)~c.indexOf(e,f[g])&&d.push(f[g]);return d},c.indexOf=function(a,b,c){for(var d=a.length,c=0>c?0>c+d?0:c+d:c||0;d>c&&a[c]!==b;c++);return c>=d?-1:c},c.toArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},c.ua={},c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=new XMLHttpRequest}catch(b){return!1}return void 0!=a.withCredentials}(),c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),c.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(a,b){function c(){}a.EventEmitter=c,c.prototype.on=function(a,c){return this.$events||(this.$events={}),this.$events[a]?b.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c,this},c.prototype.addListener=c.prototype.on,c.prototype.once=function(a,b){function c(){d.removeListener(a,c),b.apply(this,arguments)}var d=this;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=this.$events[a];if(b.util.isArray(d)){for(var e=-1,f=0,g=d.length;g>f;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){e=f;break}if(0>e)return this;d.splice(e,1),d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this},c.prototype.removeAllListeners=function(a){return void 0===a?(this.$events={},this):(this.$events&&this.$events[a]&&(this.$events[a]=null),this)},c.prototype.listeners=function(a){return this.$events||(this.$events={}),this.$events[a]||(this.$events[a]=[]),b.util.isArray(this.$events[a])||(this.$events[a]=[this.$events[a]]),this.$events[a]},c.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else{if(!b.util.isArray(c))return!1;for(var e=c.slice(),f=0,g=e.length;g>f;f++)e[f].apply(this,d)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(a){return 10>a?"0"+a:a}function date(a){return isFinite(a.valueOf())?a.getUTCFullYear()+"-"+f(a.getUTCMonth()+1)+"-"+f(a.getUTCDate())+"T"+f(a.getUTCHours())+":"+f(a.getUTCMinutes())+":"+f(a.getUTCSeconds())+"Z":null}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i instanceof Date&&(i=date(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})},JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(a,b){var c=a.parser={},d=c.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],e=c.reasons=["transport not supported","client not handshaken","unauthorized"],f=c.advice=["reconnect"],g=b.JSON,h=b.util.indexOf;c.encodePacket=function(a){var b=h(d,a.type),c=a.id||"",i=a.endpoint||"",j=a.ack,k=null;switch(a.type){case"error":var l=a.reason?h(e,a.reason):"",m=a.advice?h(f,a.advice):"";(""!==l||""!==m)&&(k=l+(""!==m?"+"+m:""));break;case"message":""!==a.data&&(k=a.data);break;case"event":var n={name:a.name};a.args&&a.args.length&&(n.args=a.args),k=g.stringify(n);break;case"json":k=g.stringify(a.data);break;case"connect":a.qs&&(k=a.qs);break;case"ack":k=a.ackId+(a.args&&a.args.length?"+"+g.stringify(a.args):"")}var o=[b,c+("data"==j?"+":""),i];return null!==k&&void 0!==k&&o.push(k),o.join(":")},c.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;d>c;c++){var e=a[c];b+=""+e.length+""+a[c]}return b};var i=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;c.decodePacket=function(a){var b=a.match(i);if(!b)return{};var c=b[2]||"",a=b[5]||"",h={type:d[b[1]],endpoint:b[4]||""};switch(c&&(h.id=c,h.ack=b[3]?"data":!0),h.type){case"error":var b=a.split("+");h.reason=e[b[0]]||"",h.advice=f[b[1]]||"";break;case"message":h.data=a||"";break;case"event":try{var j=g.parse(a);h.name=j.name,h.args=j.args}catch(k){}h.args=h.args||[];break;case"json":try{h.data=g.parse(a)}catch(k){}break;case"connect":h.qs=a||"";break;case"ack":var b=a.match(/^([0-9]+)(\+)?(.*)/);if(b&&(h.ackId=b[1],h.args=[],b[3]))try{h.args=b[3]?g.parse(b[3]):[]}catch(k){}break;case"disconnect":case"heartbeat":}return h},c.decodePayload=function(a){if(""==a.charAt(0)){for(var b=[],d=1,e="";d<a.length;d++)""==a.charAt(d)?(b.push(c.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return b}return[c.decodePacket(a)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b){function c(a,b){this.socket=a,this.sessid=b}a.Transport=c,b.util.mixin(c,b.EventEmitter),c.prototype.heartbeats=function(){return!0},c.prototype.onData=function(a){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==a){var c=b.parser.decodePayload(a);if(c&&c.length)for(var d=0,e=c.length;e>d;d++)this.onPacket(c[d])}return this},c.prototype.onPacket=function(a){return this.socket.setHeartbeatTimeout(),"heartbeat"==a.type?this.onHeartbeat():("connect"==a.type&&""==a.endpoint&&this.onConnect(),"error"==a.type&&"reconnect"==a.advice&&(this.isOpen=!1),this.socket.onPacket(a),this)},c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}},c.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},c.prototype.onConnect=function(){return this.socket.onConnect(),this},c.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},c.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},c.prototype.packet=function(a){this.send(b.parser.encodePacket(a))},c.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},c.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},c.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},c.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+"://"+a.host+":"+a.port+"/"+a.resource+"/"+b.protocol+"/"+this.name+"/"+this.sessid},c.prototype.ready=function(a,b){b.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(a){if(this.options={port:80,secure:!1,document:"document"in c?document:!1,resource:"socket.io",transports:b.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},b.util.merge(this.options,a),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||b.util.ua.hasCORS)){var d=this;b.util.on(c,"beforeunload",function(){d.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function e(){}a.Socket=d,b.util.mixin(d,b.EventEmitter),d.prototype.of=function(a){return this.namespaces[a]||(this.namespaces[a]=new b.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"})),this.namespaces[a]},d.prototype.publish=function(){this.emit.apply(this,arguments);var a;for(var b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(a=this.of(b),a.$emit.apply(a,arguments))},d.prototype.handshake=function(a){function c(b){b instanceof Error?(d.connecting=!1,d.onError(b.message)):a.apply(null,b.split(":"))}var d=this,f=this.options,g=["http"+(f.secure?"s":"")+":/",f.host+":"+f.port,f.resource,b.protocol,b.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!b.util.ua.hasCORS){var h=document.getElementsByTagName("script")[0],i=document.createElement("script");i.src=g+"&jsonp="+b.j.length,h.parentNode.insertBefore(i,h),b.j.push(function(a){c(a),i.parentNode.removeChild(i)})}else{var j=b.util.request();j.open("GET",g,!0),this.isXDomain()&&(j.withCredentials=!0),j.onreadystatechange=function(){4==j.readyState&&(j.onreadystatechange=e,200==j.status?c(j.responseText):403==j.status?d.onError(j.responseText):(d.connecting=!1,!d.reconnecting&&d.onError(j.responseText)))},j.send(null)}},d.prototype.getTransport=function(a){for(var c,d=a||this.transports,e=0;c=d[e];e++)if(b.Transport[c]&&b.Transport[c].check(this)&&(!this.isXDomain()||b.Transport[c].xdomainCheck(this)))return new b.Transport[c](this,this.sessionid);return null},d.prototype.connect=function(a){if(this.connecting)return this;var c=this;return c.connecting=!0,this.handshake(function(d,e,f,g){function h(a){return c.transport&&c.transport.clearTimeouts(),c.transport=c.getTransport(a),c.transport?void c.transport.ready(c,function(){c.connecting=!0,c.publish("connecting",c.transport.name),c.transport.open(),c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){for(var a=c.transports;a.length>0&&a.splice(0,1)[0]!=c.transport.name;);a.length?h(a):c.publish("connect_failed")}},c.options["connect timeout"]))}):c.publish("connect_failed")}c.sessionid=d,c.closeTimeout=1e3*f,c.heartbeatTimeout=1e3*e,c.transports||(c.transports=c.origTransports=g?b.util.intersect(g.split(","),c.options.transports):c.options.transports),c.setHeartbeatTimeout(),h(c.transports),c.once("connect",function(){clearTimeout(c.connectTimeoutTimer),a&&"function"==typeof a&&a()})}),this},d.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)}},d.prototype.packet=function(a){return this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a),this},d.prototype.setBuffer=function(a){this.doBuffer=a,!a&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},d.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},d.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},d.prototype.disconnectSync=function(){var a=b.util.request(),c=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,b.protocol,"",this.sessionid].join("/")+"/?disconnect=1";a.open("GET",c,!1),a.send(null),this.onDisconnect("booted")},d.prototype.isXDomain=function(){var a=c.location.port||("https:"==c.location.protocol?443:80);return this.options.host!==c.location.hostname||this.options.port!=a},d.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},d.prototype.onOpen=function(){this.open=!0},d.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},d.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)},d.prototype.onError=function(a){a&&a.advice&&"reconnect"===a.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",a&&a.reason?a.reason:a)},d.prototype.onDisconnect=function(a){var b=this.connected,c=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(b||c)&&(this.transport.close(),this.transport.clearTimeouts(),b&&(this.publish("disconnect",a),"booted"!=a&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},d.prototype.reconnect=function(){function a(){if(c.connected){for(var a in c.namespaces)c.namespaces.hasOwnProperty(a)&&""!==a&&c.namespaces[a].packet({type:"connect"});c.publish("reconnect",c.transport.name,c.reconnectionAttempts)}clearTimeout(c.reconnectionTimer),c.removeListener("connect_failed",b),c.removeListener("connect",b),c.reconnecting=!1,delete c.reconnectionAttempts,delete c.reconnectionDelay,delete c.reconnectionTimer,delete c.redoTransports,c.options["try multiple transports"]=e}function b(){return c.reconnecting?c.connected?a():c.connecting&&c.reconnecting?c.reconnectionTimer=setTimeout(b,1e3):void(c.reconnectionAttempts++>=d?c.redoTransports?(c.publish("reconnect_failed"),a()):(c.on("connect_failed",b),c.options["try multiple transports"]=!0,c.transports=c.origTransports,c.transport=c.getTransport(),c.redoTransports=!0,c.connect()):(c.reconnectionDelay<f&&(c.reconnectionDelay*=2),c.connect(),c.publish("reconnecting",c.reconnectionDelay,c.reconnectionAttempts),c.reconnectionTimer=setTimeout(b,c.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var c=this,d=this.options["max reconnection attempts"],e=this.options["try multiple transports"],f=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(b,this.reconnectionDelay),this.on("connect",b)
}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(a,b){this.socket=a,this.name=b||"",this.flags={},this.json=new d(this,"json"),this.ackPackets=0,this.acks={}}function d(a,b){this.namespace=a,this.name=b}a.SocketNamespace=c,b.util.mixin(c,b.EventEmitter),c.prototype.$emit=b.EventEmitter.prototype.emit,c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},c.prototype.packet=function(a){return a.endpoint=this.name,this.socket.packet(a),this.flags={},this},c.prototype.send=function(a,b){var c={type:this.flags.json?"json":"message",data:a};return"function"==typeof b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b),this.packet(c)},c.prototype.emit=function(a){var b=Array.prototype.slice.call(arguments,1),c=b[b.length-1],d={type:"event",name:a};return"function"==typeof c&&(d.id=++this.ackPackets,d.ack="data",this.acks[d.id]=c,b=b.slice(0,b.length-1)),d.args=b,this.packet(d)},c.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},c.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:b.util.toArray(arguments),ackId:a.id})}var d=this;switch(a.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(a.reason||"booted"):this.$emit("disconnect",a.reason);break;case"message":case"json":var e=["message",a.data];"data"==a.ack?e.push(c):a.ack&&this.packet({type:"ack",ackId:a.id}),this.$emit.apply(this,e);break;case"event":var e=[a.name].concat(a.args);"data"==a.ack&&e.push(c),this.$emit.apply(this,e);break;case"ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,a.args),delete this.acks[a.ackId]);break;case"error":a.advice?this.socket.onError(a):"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}},d.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},d.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(){b.Transport.apply(this,arguments)}a.websocket=d,b.util.inherit(d,b.Transport),d.prototype.name="websocket",d.prototype.open=function(){var a,d=b.util.query(this.socket.options.query),e=this;return a||(a=c.MozWebSocket||c.WebSocket),this.websocket=new a(this.prepareUrl()+d),this.websocket.onopen=function(){e.onOpen(),e.socket.setBuffer(!1)},this.websocket.onmessage=function(a){e.onData(a.data)},this.websocket.onclose=function(){e.onClose(),e.socket.setBuffer(!0)},this.websocket.onerror=function(a){e.onError(a)},this},d.prototype.send=b.util.ua.iDevice?function(a){var b=this;return setTimeout(function(){b.websocket.send(a)},0),this}:function(a){return this.websocket.send(a),this},d.prototype.payload=function(a){for(var b=0,c=a.length;c>b;b++)this.packet(a[b]);return this},d.prototype.close=function(){return this.websocket.close(),this},d.prototype.onError=function(a){this.socket.onError(a)},d.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},d.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c},d.xdomainCheck=function(){return!0},b.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(){b.Transport.websocket.apply(this,arguments)}a.flashsocket=c,b.util.inherit(c,b.Transport.websocket),c.prototype.name="flashsocket",c.prototype.open=function(){var a=this,c=arguments;return WebSocket.__addTask(function(){b.Transport.websocket.prototype.open.apply(a,c)}),this},c.prototype.send=function(){var a=this,c=arguments;return WebSocket.__addTask(function(){b.Transport.websocket.prototype.send.apply(a,c)}),this},c.prototype.close=function(){return WebSocket.__tasks.length=0,b.Transport.websocket.prototype.close.call(this),this},c.prototype.ready=function(a,d){function e(){var b=a.options,e=b["flash policy port"],g=["http"+(b.secure?"s":"")+":/",b.host+":"+b.port,b.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];c.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=g.join("/")),843!==e&&WebSocket.loadFlashPolicyFile("xmlsocket://"+b.host+":"+e),WebSocket.__initialize(),c.loaded=!0),d.call(f)}var f=this;return document.body?e():void b.util.load(e)},c.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},c.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),b.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?["Active"].concat("").join("X"):"PlugIn",g="MMredirectURL="+J.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}{var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J[["Active"].concat("Object").join("X")]!=C)try{var j=new(window[["Active"].concat("Object").join("X")])(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}()}return{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var a=window.console;if(a&&a.log&&a.error||(a={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void a.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,b,c,d,e){var f=this;f.__id=WebSocket.__nextId++,WebSocket.__instances[f.__id]=f,f.readyState=WebSocket.CONNECTING,f.bufferedAmount=0,f.__events={},b?"string"==typeof b&&(b=[b]):b=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(f.__id,a,b,c||null,d||0,e||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var b=WebSocket.__flash.send(this.__id,encodeURIComponent(a));return 0>b?!0:(this.bufferedAmount+=b,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,b){a in this.__events||(this.__events[a]=[]),this.__events[a].push(b)},WebSocket.prototype.removeEventListener=function(a,b){if(a in this.__events)for(var c=this.__events[a],d=c.length-1;d>=0;--d)if(c[d]===b){c.splice(d,1);break}},WebSocket.prototype.dispatchEvent=function(a){for(var b=this.__events[a.type]||[],c=0;c<b.length;++c)b[c](a);var d=this["on"+a.type];d&&d(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState),"protocol"in a&&(this.protocol=a.protocol);var b;if("open"==a.type||"error"==a.type)b=this.__createSimpleEvent(a.type);else if("close"==a.type)b=this.__createSimpleEvent("close");else{if("message"!=a.type)throw"unknown event type: "+a.type;var c=decodeURIComponent(a.message);b=this.__createMessageEvent("message",c)}this.dispatchEvent(b)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var b=document.createEvent("Event");return b.initEvent(a,!1,!1),b}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,b){if(document.createEvent&&window.MessageEvent&&!window.opera){var c=document.createEvent("MessageEvent");return c.initMessageEvent("message",!1,!1,b,null,null,window,null),c}return{type:a,data:b,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var b=document.createElement("div");b.id="webSocketContainer",b.style.position="absolute",WebSocket.__isFlashLite()?(b.style.left="0px",b.style.top="0px"):(b.style.left="-100px",b.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash",b.appendChild(c),document.body.appendChild(b),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(b){b.success||a.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var b=WebSocket.__flash.receiveEvents(),c=0;c<b.length;++c)WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c])}catch(d){a.error(d)}},0),!0},WebSocket.__log=function(b){a.log(decodeURIComponent(b))},WebSocket.__error=function(b){a.error(decodeURIComponent(b))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return a&&a.enabledPlugin&&a.enabledPlugin.filename&&a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(a,b,c){function d(a){a&&(b.Transport.apply(this,arguments),this.sendBuffer=[])}function e(){}a.XHR=d,b.util.inherit(d,b.Transport),d.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},d.prototype.payload=function(a){for(var c=[],d=0,e=a.length;e>d;d++)c.push(b.parser.encodePacket(a[d]));this.send(b.parser.encodePayload(c))},d.prototype.send=function(a){return this.post(a),this},d.prototype.post=function(a){function b(){4==this.readyState&&(this.onreadystatechange=e,f.posting=!1,200==this.status?f.socket.setBuffer(!1):f.onClose())}function d(){this.onload=e,f.socket.setBuffer(!1)}var f=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=b,this.sendXHR.send(a)},d.prototype.close=function(){return this.onClose(),this},d.prototype.request=function(a){var c=b.util.request(this.socket.isXDomain()),d=b.util.query(this.socket.options.query,"t="+ +new Date);if(c.open(a||"GET",this.prepareUrl()+d,!0),"POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):c.contentType="text/plain"}catch(e){}return c},d.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},d.check=function(a,d){try{var e=b.util.request(d),f=c.XDomainRequest&&e instanceof XDomainRequest,g=a&&a.options&&a.options.secure?"https:":"http:",h=c.location&&g!=c.location.protocol;if(e&&(!f||!h))return!0}catch(i){}return!1},d.xdomainCheck=function(a){return d.check(a,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b){function c(){b.Transport.XHR.apply(this,arguments)}a.htmlfile=c,b.util.inherit(c,b.Transport.XHR),c.prototype.name="htmlfile",c.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio",this.doc.body.appendChild(a),this.iframe=this.doc.createElement("iframe"),a.appendChild(this.iframe);var c=this,d=b.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+d,b.util.on(window,"unload",function(){c.destroy()})},c.prototype._=function(a,b){a=a.replace(/\\\//g,"/"),this.onData(a);try{var c=b.getElementsByTagName("script")[0];c.parentNode.removeChild(c)}catch(d){}},c.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},c.prototype.close=function(){return this.destroy(),b.Transport.XHR.prototype.close.call(this)},c.check=function(a){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{var c=new(window[["Active"].concat("Object").join("X")])("htmlfile");return c&&b.Transport.XHR.check(a)}catch(d){}return!1},c.xdomainCheck=function(){return!1},b.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(a,b,c){function d(){b.Transport.XHR.apply(this,arguments)}function e(){}a["xhr-polling"]=d,b.util.inherit(d,b.Transport.XHR),b.util.merge(d,b.Transport.XHR),d.prototype.name="xhr-polling",d.prototype.heartbeats=function(){return!1},d.prototype.open=function(){var a=this;return b.Transport.XHR.prototype.open.call(a),!1},d.prototype.get=function(){function a(){4==this.readyState&&(this.onreadystatechange=e,200==this.status?(f.onData(this.responseText),f.get()):f.onClose())}function b(){this.onload=e,this.onerror=e,f.retryCounter=1,f.onData(this.responseText),f.get()}function d(){f.retryCounter++,!f.retryCounter||f.retryCounter>3?f.onClose():f.get()}if(this.isOpen){var f=this;this.xhr=this.request(),c.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=d):this.xhr.onreadystatechange=a,this.xhr.send(null)}},d.prototype.onClose=function(){if(b.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=e;try{this.xhr.abort()}catch(a){}this.xhr=null}},d.prototype.ready=function(a,c){var d=this;b.util.defer(function(){c.call(d)})},b.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(a,b,c){function d(){b.Transport["xhr-polling"].apply(this,arguments),this.index=b.j.length;var a=this;b.j.push(function(b){a._(b)})}var e=c.document&&"MozAppearance"in c.document.documentElement.style;a["jsonp-polling"]=d,b.util.inherit(d,b.Transport["xhr-polling"]),d.prototype.name="jsonp-polling",d.prototype.post=function(a){function c(){d(),e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{g=document.createElement('<iframe name="'+e.iframeId+'">')}catch(a){g=document.createElement("iframe"),g.name=e.iframeId}g.id=e.iframeId,e.form.appendChild(g),e.iframe=g}var e=this,f=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var g,h=document.createElement("form"),i=document.createElement("textarea"),j=this.iframeId="socketio_iframe_"+this.index;h.className="socketio",h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.display="none",h.target=j,h.method="POST",h.setAttribute("accept-charset","utf-8"),i.name="d",h.appendChild(i),document.body.appendChild(h),this.form=h,this.area=i}this.form.action=this.prepareUrl()+f,d(),this.area.value=b.JSON.stringify(a);try{this.form.submit()}catch(k){}this.iframe.attachEvent?g.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c,this.socket.setBuffer(!0)},d.prototype.get=function(){var a=this,c=document.createElement("script"),d=b.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),c.async=!0,c.src=this.prepareUrl()+d,c.onerror=function(){a.onClose()};var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(c,f),this.script=c,e&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},d.prototype._=function(a){return this.onData(a),this.isOpen&&this.get(),this},d.prototype.ready=function(a,c){var d=this;return e?void b.util.load(function(){c.call(d)}):c.call(this)},d.check=function(){return"document"in c},d.xdomainCheck=function(){return!0},b.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}()},{}],198:[function(a,b){b.exports=a("./lib/socket.io")},{"./lib/socket.io":203}],199:[function(a,b){function c(a){for(var b=0,c=0,d=f.length;d>c;c++)b=Math.max(b,f[c].length);return a.length<b?a+new Array(b-a.length+1).join(" "):a}var d=a("./util"),e=d.toArray,f=["error","warn","info","debug"],g=[31,33,36,90],h=b.exports=function(a){a=a||{},this.colors=!1!==a.colors,this.level=3,this.enabled=!0};h.prototype.log=function(a){var b=f.indexOf(a);return b>this.level||!this.enabled?this:(console.log.apply(console,[this.colors?"   ["+g[b]+"m"+c(a)+" -[39m":a+":"].concat(e(arguments).slice(1))),this)},f.forEach(function(a){h.prototype[a]=function(){this.log.apply(this,[a].concat(e(arguments)))}})},{"./util":218}],200:[function(a,b,c){(function(d,e){function f(a,b){this.server=a,this.namespaces={},this.sockets=this.of(""),this.settings={origins:"*:*",log:!0,store:new l,logger:new k,"static":new n(this),heartbeats:!0,resource:"/socket.io",transports:p,authorization:!1,blacklist:["disconnect"],"log level":3,"log colors":h.isatty(d.stdout.fd),"close timeout":60,"heartbeat interval":25,"heartbeat timeout":60,"polling duration":20,"flash policy server":!0,"flash policy port":10843,"destroy upgrade":!0,"destroy buffer size":1e8,"browser client":!0,"browser client cache":!0,"browser client minification":!1,"browser client etag":!1,"browser client expires":31536e4,"browser client gzip":!1,"browser client handler":!1,"client store expiration":15,"match origin protocol":!1};for(var c in b)b.hasOwnProperty(c)&&(this.settings[c]=b[c]);var e=this;a.on("error",function(a){e.log.warn("error raised: "+a)}),this.initStore(),this.on("set:store",function(){e.initStore()}),this.oldListeners=a.listeners("request").splice(0),a.removeAllListeners("request"),a.on("request",function(a,b){e.handleRequest(a,b)}),a.on("upgrade",function(a,b,c){e.handleUpgrade(a,b,c)}),a.on("close",function(){clearInterval(e.gc)}),a.once("listening",function(){e.gc=setInterval(e.garbageCollection.bind(e),1e4)});for(var c in j)j.hasOwnProperty(c)&&j[c].init&&j[c].init(this);var e=this;this.sockets.on("connection",function(a){e.emit("connection",a)}),this.sequenceNumber=0|Date.now(),this.log.info("socket.io started")}var g=(a("fs"),a("url")),h=a("tty"),i=a("crypto"),j=(a("./util"),a("./store"),a("socket.io-client"),a("./transports")),k=a("./logger"),l=(a("./socket"),a("./stores/memory")),m=a("./namespace"),n=a("./static"),o=d.EventEmitter;c=b.exports=f;var p=c.defaultTransports=["websocket","htmlfile","xhr-polling","jsonp-polling"],q=b.parent.exports,r=q.protocol,s=/^\d+$/;f.prototype.__proto__=o.prototype,f.prototype.__defineGetter__("store",function(){var a=this.get("store");return a.manager=this,a}),f.prototype.__defineGetter__("log",function(){var a=this.get("logger");return a.level=this.get("log level")||-1,a.colors=this.get("log colors"),a.enabled=this.enabled("log"),a}),f.prototype.__defineGetter__("static",function(){return this.get("static")}),f.prototype.get=function(a){return this.settings[a]},f.prototype.set=function(a,b){return 1==arguments.length?this.get(a):(this.settings[a]=b,this.emit("set:"+a,this.settings[a],a),this)},f.prototype.enable=function(a){return this.settings[a]=!0,this.emit("set:"+a,this.settings[a],a),this},f.prototype.disable=function(a){return this.settings[a]=!1,this.emit("set:"+a,this.settings[a],a),this},f.prototype.enabled=function(a){return!!this.settings[a]},f.prototype.disabled=function(a){return!this.settings[a]},f.prototype.configure=function(a,b){return"function"==typeof a?a.call(this):a==(d.env.NODE_ENV||"development")&&b.call(this),this},f.prototype.initStore=function(){this.handshaken={},this.connected={},this.open={},this.closed={},this.rooms={},this.roomClients={};var a=this;this.store.subscribe("handshake",function(b,c){a.onHandshake(b,c)}),this.store.subscribe("connect",function(b){a.onConnect(b)}),this.store.subscribe("open",function(b){a.onOpen(b)}),this.store.subscribe("join",function(b,c){a.onJoin(b,c)}),this.store.subscribe("leave",function(b,c){a.onLeave(b,c)}),this.store.subscribe("close",function(b){a.onClose(b)}),this.store.subscribe("dispatch",function(b,c,d,e){a.onDispatch(b,c,d,e)}),this.store.subscribe("disconnect",function(b){a.onDisconnect(b)})},f.prototype.onHandshake=function(a,b){this.handshaken[a]=b},f.prototype.onConnect=function(a){this.connected[a]=!0},f.prototype.onOpen=function(a){if(this.open[a]=!0,this.closed[a]){var b=this;this.store.unsubscribe("dispatch:"+a,function(){var c=b.transports[a];b.closed[a]&&b.closed[a].length&&c&&c.open&&(c.payload(b.closed[a]),b.closed[a]=[])})}this.transports[a]&&(this.transports[a].discard(),this.transports[a]=null)},f.prototype.onDispatch=function(a,b,c,d){if(this.rooms[a])for(var e=0,f=this.rooms[a].length;f>e;e++){var g=this.rooms[a][e];~d.indexOf(g)||(this.transports[g]&&this.transports[g].open?this.transports[g].onDispatch(b,c):c||this.onClientDispatch(g,b))}},f.prototype.onJoin=function(a,b){this.roomClients[a]||(this.roomClients[a]={}),this.rooms[b]||(this.rooms[b]=[]),~this.rooms[b].indexOf(a)||(this.rooms[b].push(a),this.roomClients[a][b]=!0)},f.prototype.onLeave=function(a,b){if(this.rooms[b]){var c=this.rooms[b].indexOf(a);c>=0&&this.rooms[b].splice(c,1),this.rooms[b].length||delete this.rooms[b],this.roomClients[a]&&delete this.roomClients[a][b]}},f.prototype.onClose=function(a){this.open[a]&&delete this.open[a],this.closed[a]=[];var b=this;this.store.subscribe("dispatch:"+a,function(c,d){d||b.onClientDispatch(a,c)})},f.prototype.onClientDispatch=function(a,b){this.closed[a]&&this.closed[a].push(b)},f.prototype.onClientMessage=function(a,b){this.namespaces[b.endpoint]&&this.namespaces[b.endpoint].handlePacket(a,b)},f.prototype.onClientDisconnect=function(a,b){for(var c in this.namespaces)this.namespaces.hasOwnProperty(c)&&this.namespaces[c].handleDisconnect(a,b,"undefined"!=typeof this.roomClients[a]&&"undefined"!=typeof this.roomClients[a][c]);this.onDisconnect(a)},f.prototype.onDisconnect=function(a,b){if(delete this.handshaken[a],this.open[a]&&delete this.open[a],this.connected[a]&&delete this.connected[a],this.transports[a]&&(this.transports[a].discard(),delete this.transports[a]),this.closed[a]&&delete this.closed[a],this.roomClients[a]){for(var c in this.roomClients[a])this.roomClients[a].hasOwnProperty(c)&&this.onLeave(a,c);
delete this.roomClients[a]}this.store.destroyClient(a,this.get("client store expiration")),this.store.unsubscribe("dispatch:"+a),b&&(this.store.unsubscribe("message:"+a),this.store.unsubscribe("disconnect:"+a))},f.prototype.handleRequest=function(a,b){var c=this.checkRequest(a);{if(c)return c.static||!c.transport&&!c.protocol?void(c.static&&this.enabled("browser client")?this.static.write(c.path,a,b):(b.writeHead(200),b.end("Welcome to socket.io."),this.log.info("unhandled socket.io url"))):void(c.protocol!=r?(b.writeHead(500),b.end("Protocol version not supported."),this.log.info("client protocol version unsupported")):c.id?this.handleHTTPRequest(c,a,b):this.handleHandshake(c,a,b));for(var d=0,e=this.oldListeners.length;e>d;d++)this.oldListeners[d].call(this.server,a,b)}},f.prototype.handleUpgrade=function(a,b,c){var d=this.checkRequest(a);return d?(a.head=c,this.handleClient(d,a),void(a.head=null)):void(this.enabled("destroy upgrade")&&(b.end(),this.log.debug("destroying non-socket.io upgrade")))},f.prototype.handleHTTPRequest=function(a,b,c){b.res=c,this.handleClient(a,b)},f.prototype.handleClient=function(a,b){var c=(b.socket,this.store,this);if(void 0!=a.query.disconnect)return this.transports[a.id]&&this.transports[a.id].open?this.transports[a.id].onForcedDisconnect():this.store.publish("disconnect-force:"+a.id),b.res.writeHead(200),void b.res.end();if(!~this.get("transports").indexOf(a.transport))return this.log.warn('unknown transport: "'+a.transport+'"'),void b.connection.end();var d=new j[a.transport](this,a,b),e=this.handshaken[a.id];if(d.disconnected)return void b.connection.end();if(e){if(d.open&&(this.closed[a.id]&&this.closed[a.id].length&&(d.payload(this.closed[a.id]),this.closed[a.id]=[]),this.onOpen(a.id),this.store.publish("open",a.id),this.transports[a.id]=d),!this.connected[a.id]){this.onConnect(a.id),this.store.publish("connect",a.id),delete e.issued,this.onHandshake(a.id,e),this.store.publish("handshake",a.id,e);for(var f in this.namespaces)if(this.namespaces.hasOwnProperty(f)){{this.namespaces[f].socket(a.id,!0)}""===f&&this.namespaces[f].handlePacket(a.id,{type:"connect"})}this.store.subscribe("message:"+a.id,function(b){c.onClientMessage(a.id,b)}),this.store.subscribe("disconnect:"+a.id,function(b){c.onClientDisconnect(a.id,b)})}}else d.open&&d.error("client not handshaken","reconnect"),d.discard()},f.prototype.generateId=function(){var a=new e(15);return a.writeInt32BE?(this.sequenceNumber=this.sequenceNumber+1|0,a.writeInt32BE(this.sequenceNumber,11),i.randomBytes?i.randomBytes(12).copy(a):[0,4,8].forEach(function(b){a.writeInt32BE(Math.random()*Math.pow(2,32)|0,b)}),a.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")):Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()},f.prototype.handleHandshake=function(a,b,c){function d(b,d){a.query.jsonp&&s.test(a.query.jsonp)?(c.writeHead(200,{"Content-Type":"application/javascript"}),c.end("io.j["+a.query.jsonp+'](new Error("'+d+'"));')):(c.writeHead(b,h),c.end(d))}function e(a){d(500,"handshake error"),f.log.warn("handshake error "+a)}var f=this,g=b.headers.origin,h={"Content-Type":"text/plain"};if(!this.verifyOrigin(b))return void d(403,"handshake bad origin");var i=this.handshakeData(a);g&&(h["Access-Control-Allow-Origin"]=g,h["Access-Control-Allow-Credentials"]="true"),this.authorize(i,function(b,g,j){if(b)return e(b);if(g){var k=f.generateId(),l=[k,f.enabled("heartbeats")?f.get("heartbeat timeout")||"":"",f.get("close timeout")||"",f.transports(a).join(",")].join(":");a.query.jsonp&&s.test(a.query.jsonp)?(l="io.j["+a.query.jsonp+"]("+JSON.stringify(l)+");",c.writeHead(200,{"Content-Type":"application/javascript"})):c.writeHead(200,h),c.end(l),f.onHandshake(k,j||i),f.store.publish("handshake",k,j||i),f.log.info("handshake authorized",k)}else d(403,"handshake unauthorized"),f.log.info("handshake unauthorized")})},f.prototype.handshakeData=function(a){var b,c=a.request.connection,d=new Date;return c.remoteAddress?b={address:c.remoteAddress,port:c.remotePort}:c.socket&&c.socket.remoteAddress&&(b={address:c.socket.remoteAddress,port:c.socket.remotePort}),{headers:a.headers,address:b,time:d.toString(),query:a.query,url:a.request.url,xdomain:!!a.request.headers.origin,secure:a.request.connection.secure,issued:+d}},f.prototype.verifyOrigin=function(a){var b=a.headers.origin||a.headers.referer,c=this.get("origins");if("null"===b&&(b="*"),-1!==c.indexOf("*:*"))return!0;if(b)try{var d=g.parse(b);d.port=d.port||80;var e=~c.indexOf(d.hostname+":"+d.port)||~c.indexOf(d.hostname+":*")||~c.indexOf("*:"+d.port);return e||this.log.warn("illegal origin: "+b),e}catch(f){this.log.warn("error parsing origin")}else this.log.warn("origin missing from handshake, yet required by config");return!1},f.prototype.handlePacket=function(a,b){this.of(b.endpoint||"").handlePacket(a,b)},f.prototype.authorize=function(a,b){if(this.get("authorization")){var c=this;this.get("authorization").call(this,a,function(a,d){c.log.debug("authorized"),b(a,d)})}else this.log.debug("client authorized"),b(null,!0);return this},f.prototype.transports=function(a){for(var b=this.get("transports"),c=[],d=0,e=b.length;e>d;d++){var f=b[d];f&&(!f.checkClient||f.checkClient(a))&&c.push(f)}return c};var t=/^\/([^\/]+)\/?([^\/]+)?\/?([^\/]+)?\/?$/;f.prototype.checkRequest=function(a){var b,c=this.get("resource");if("string"==typeof c?(b=a.url.substr(0,c.length),b!==c&&(b=null)):(b=c.exec(a.url),b&&(b=b[0])),b){var d=g.parse(a.url.substr(b.length),!0),e=d.pathname||"",f=e.match(t),h={query:d.query||{},headers:a.headers,request:a,path:e};return f&&(h.protocol=Number(f[1]),h.transport=f[2],h.id=f[3],h.static=!!this.static.has(e)),h}return!1},f.prototype.of=function(a){return this.namespaces[a]?this.namespaces[a]:this.namespaces[a]=new m(this,a)},f.prototype.garbageCollection=function(){for(var a,b=Object.keys(this.handshaken),c=b.length,d=Date.now();c--;)a=this.handshaken[b[c]],"issued"in a&&d-a.issued>=3e4&&this.onDisconnect(b[c])}}).call(this,a("_process"),a("buffer").Buffer)},{"./logger":199,"./namespace":201,"./socket":204,"./static":205,"./store":206,"./stores/memory":207,"./transports":214,"./util":218,_process:125,buffer:4,crypto:11,fs:1,"socket.io-client":228,tty:143,url:144}],201:[function(a,b,c){(function(d){function e(a,b){this.manager=a,this.name=b||"",this.sockets={},this.auth=!1,this.setFlags()}var f=a("./socket"),g=d.EventEmitter,h=a("./parser"),i=a("./util");c=b.exports=e,e.prototype.__proto__=g.prototype,e.prototype.$emit=g.prototype.emit,e.prototype.clients=function(a){var a=this.name+(void 0!==a?"/"+a:"");return this.manager.rooms[a]?this.manager.rooms[a].map(function(a){return this.socket(a)},this):[]},e.prototype.__defineGetter__("log",function(){return this.manager.log}),e.prototype.__defineGetter__("store",function(){return this.manager.store}),e.prototype.__defineGetter__("json",function(){return this.flags.json=!0,this}),e.prototype.__defineGetter__("volatile",function(){return this.flags.volatile=!0,this}),e.prototype.in=e.prototype.to=function(a){return this.flags.endpoint=this.name+(a?"/"+a:""),this},e.prototype.except=function(a){return this.flags.exceptions.push(a),this},e.prototype.setFlags=function(){return this.flags={endpoint:this.name,exceptions:[]},this},e.prototype.packet=function(a){a.endpoint=this.name;var b=(this.store,this.log,this.flags.volatile),c=this.flags.exceptions,a=h.encodePacket(a);return this.manager.onDispatch(this.flags.endpoint,a,b,c),this.store.publish("dispatch",this.flags.endpoint,a,b,c),this.setFlags(),this},e.prototype.send=function(a){return this.packet({type:this.flags.json?"json":"message",data:a})},e.prototype.emit=function(a){return"newListener"==a?this.$emit.apply(this,arguments):this.packet({type:"event",name:a,args:i.toArray(arguments).slice(1)})},e.prototype.socket=function(a,b){return this.sockets[a]||(this.sockets[a]=new f(this.manager,a,this,b)),this.sockets[a]},e.prototype.authorization=function(a){return this.auth=a,this},e.prototype.handleDisconnect=function(a,b,c){this.sockets[a]&&this.sockets[a].readable&&(c&&this.sockets[a].onDisconnect(b),delete this.sockets[a])},e.prototype.authorize=function(a,b){if(this.auth){var c=this;this.auth.call(this,a,function(a,d){c.log.debug("client "+(d?"":"un")+"authorized for "+c.name),b(a,d)})}else this.log.debug("client authorized for "+this.name),b(null,!0);return this},e.prototype.handlePacket=function(a,b){function c(){j.log.debug("sending data ack packet"),f.packet({type:"ack",args:i.toArray(arguments),ackId:b.id})}function d(a){j.log.warn("handshake error "+a+" for "+j.name),f.packet({type:"error",reason:a})}function e(){j.manager.onJoin(a,j.name),j.store.publish("join",a,j.name),f.packet({type:"connect"}),j.$emit("connection",f)}var f=this.socket(a),g="data"==b.ack,h=this.manager,j=this;switch(b.type){case"connect":if(""==b.endpoint)e();else{var k=h.handshaken[a];this.authorize(k,function(b,c,f){return b?d(b):void(c?(h.onHandshake(a,f||k),j.store.publish("handshake",a,f||k),e()):d("unauthorized"))})}break;case"ack":f.acks[b.ackId]?f.acks[b.ackId].apply(f,b.args):this.log.info("unknown ack packet");break;case"event":if(-~h.get("blacklist").indexOf(b.name))this.log.debug("ignoring blacklisted event `"+b.name+"`");else{var l=[b.name].concat(b.args);g&&l.push(c),f.$emit.apply(f,l)}break;case"disconnect":this.manager.onLeave(a,this.name),this.store.publish("leave",a,this.name),f.$emit("disconnect",b.reason||"packet");break;case"json":case"message":var l=["message",b.data];g&&l.push(c),f.$emit.apply(f,l)}}}).call(this,a("_process"))},{"./parser":202,"./socket":204,"./util":218,_process:125}],202:[function(a,b,c){function d(a){try{return JSON.parse(a)}catch(b){return!1}}var e=c.packets={disconnect:0,connect:1,heartbeat:2,message:3,json:4,event:5,ack:6,error:7,noop:8},f=Object.keys(e),g=c.reasons={"transport not supported":0,"client not handshaken":1,unauthorized:2},h=Object.keys(g),i=c.advice={reconnect:0},j=Object.keys(i);c.encodePacket=function(a){var b=e[a.type],c=a.id||"",d=a.endpoint||"",f=a.ack,h=null;switch(a.type){case"message":""!==a.data&&(h=a.data);break;case"event":var j={name:a.name};a.args&&a.args.length&&(j.args=a.args),h=JSON.stringify(j);break;case"json":h=JSON.stringify(a.data);break;case"ack":h=a.ackId+(a.args&&a.args.length?"+"+JSON.stringify(a.args):"");break;case"connect":a.qs&&(h=a.qs);break;case"error":var k=a.reason?g[a.reason]:"",l=a.advice?i[a.advice]:"";(""!==k||""!==l)&&(h=k+(""!==l?"+"+l:""))}var m=b+":"+c+("data"==f?"+":"")+":"+d;return null!==h&&void 0!==h&&(m+=":"+h),m},c.encodePayload=function(a){var b="";if(1==a.length)return a[0];for(var c=0,d=a.length;d>c;c++){var e=a[c];b+=""+e.length+""+a[c]}return b};var k=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;c.decodePacket=function(a){var b=a.match(k);if(!b)return{};var c=b[2]||"",a=b[5]||"",e={type:f[b[1]],endpoint:b[4]||""};switch(c&&(e.id=c,e.ack=b[3]?"data":!0),e.type){case"message":e.data=a||"";break;case"event":b=d(a),b&&(e.name=b.name,e.args=b.args),e.args=e.args||[];break;case"json":e.data=d(a);break;case"connect":e.qs=a||"";break;case"ack":b=a.match(/^([0-9]+)(\+)?(.*)/),b&&(e.ackId=b[1],e.args=[],b[3]&&(e.args=d(b[3])||[]));break;case"error":b=a.split("+"),e.reason=h[b[0]]||"",e.advice=j[b[1]]||""}return e},c.decodePayload=function(a){if(void 0==a||null==a)return[];if(""==a[0]){for(var b=[],d=1,e="";d<a.length;d++)""==a[d]?(b.push(c.decodePacket(a.substr(d+1,e))),d+=Number(e)+1,e=""):e+=a[d];return b}return[c.decodePacket(a)]}},{}],203:[function(a,b,c){var d=a("socket.io-client");c.version="0.9.16",c.protocol=1,c.clientVersion=d.version,c.listen=function(b,d,e){if("function"==typeof b&&console.warn('Socket.IO\'s `listen()` method expects an `http.Server` instance\nas its first parameter. Are you migrating from Express 2.x to 3.x?\nIf so, check out the "Socket.IO compatibility" section at:\nhttps://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x'),"function"==typeof d&&(e=d,d={}),"undefined"==typeof b&&(b=80),"number"==typeof b){var f=b;b=d&&d.key?a("https").createServer(d):a("http").createServer(),b.on("request",function(a,b){b.writeHead(200),b.end("Welcome to socket.io.")}),b.listen(f,e)}return new c.Manager(b,d)},c.Manager=a("./manager"),c.Transport=a("./transport"),c.Socket=a("./socket"),c.Static=a("./static"),c.Store=a("./store"),c.MemoryStore=a("./stores/memory"),c.RedisStore=a("./stores/redis"),c.parser=a("./parser")},{"./manager":200,"./parser":202,"./socket":204,"./static":205,"./store":206,"./stores/memory":207,"./stores/redis":208,"./transport":209,http:116,https:120,"socket.io-client":228}],204:[function(a,b,c){(function(d){function e(a,b,c,d){this.id=b,this.namespace=c,this.manager=a,this.disconnected=!1,this.ackPackets=0,this.acks={},this.setFlags(),this.readable=d,this.store=this.manager.store.client(this.id),this.on("error",i)}var f=a("./parser"),g=a("./util"),h=d.EventEmitter;c=b.exports=e;var i=function(){};e.prototype.__proto__=h.prototype,e.prototype.__defineGetter__("handshake",function(){return this.manager.handshaken[this.id]}),e.prototype.__defineGetter__("transport",function(){return this.manager.transports[this.id].name}),e.prototype.__defineGetter__("log",function(){return this.manager.log}),e.prototype.__defineGetter__("json",function(){return this.flags.json=!0,this}),e.prototype.__defineGetter__("volatile",function(){return this.flags.volatile=!0,this}),e.prototype.__defineGetter__("broadcast",function(){return this.flags.broadcast=!0,this}),e.prototype.to=e.prototype.in=function(a){return this.flags.room=a,this},e.prototype.setFlags=function(){return this.flags={endpoint:this.namespace.name,room:""},this},e.prototype.onDisconnect=function(a){this.disconnected||(this.$emit("disconnect",a),this.disconnected=!0)},e.prototype.join=function(a,b){var c=this.namespace.name,a=c+"/"+a;return this.manager.onJoin(this.id,a),this.manager.store.publish("join",this.id,a),b&&(this.log.warn("Client#join callback is deprecated"),b()),this},e.prototype.leave=function(a,b){var c=this.namespace.name,a=c+"/"+a;return this.manager.onLeave(this.id,a),this.manager.store.publish("leave",this.id,a),b&&(this.log.warn("Client#leave callback is deprecated"),b()),this},e.prototype.packet=function(a){return this.flags.broadcast?(this.log.debug("broadcasting packet"),this.namespace.in(this.flags.room).except(this.id).packet(a)):(a.endpoint=this.flags.endpoint,a=f.encodePacket(a),this.dispatch(a,this.flags.volatile)),this.setFlags(),this},e.prototype.dispatch=function(a,b){this.manager.transports[this.id]&&this.manager.transports[this.id].open?this.manager.transports[this.id].onDispatch(a,b):(b||this.manager.onClientDispatch(this.id,a,b),this.manager.store.publish("dispatch:"+this.id,a,b))},e.prototype.set=function(a,b,c){return this.store.set(a,b,c),this},e.prototype.get=function(a,b){return this.store.get(a,b),this},e.prototype.has=function(a,b){return this.store.has(a,b),this},e.prototype.del=function(a,b){return this.store.del(a,b),this},e.prototype.disconnect=function(){return this.disconnected||(this.log.info("booting client"),""===this.namespace.name?this.manager.transports[this.id]&&this.manager.transports[this.id].open?this.manager.transports[this.id].onForcedDisconnect():(this.manager.onClientDisconnect(this.id),this.manager.store.publish("disconnect:"+this.id)):(this.packet({type:"disconnect"}),this.manager.onLeave(this.id,this.namespace.name),this.$emit("disconnect","booted"))),this},e.prototype.send=function(a,b){var c={type:this.flags.json?"json":"message",data:a};return b&&(c.id=++this.ackPackets,c.ack=!0,this.acks[c.id]=b),this.packet(c)},e.prototype.$emit=h.prototype.emit,e.prototype.emit=function(a){if("newListener"==a)return this.$emit.apply(this,arguments);var b=g.toArray(arguments).slice(1),c=b[b.length-1],d={type:"event",name:a};return"function"==typeof c&&(d.id=++this.ackPackets,d.ack=c.length?"data":!0,this.acks[d.id]=c,b=b.slice(0,b.length-1)),d.args=b,this.packet(d)}}).call(this,a("_process"))},{"./parser":202,"./util":218,_process:125}],205:[function(a,b,c){(function(d){function e(a){this.manager=a,this.cache={},this.paths={},this.init()}var f=a("socket.io-client"),g=a("child_process"),h=a("fs"),i=(a("./util"),{js:{type:"application/javascript",encoding:"utf8",gzip:!0},swf:{type:"application/x-shockwave-flash",encoding:"binary",gzip:!1}}),j=/\+((?:\+)?[\w\-]+)*(?:\.v\d+\.\d+\.\d+)?(?:\.js)$/,k=/\.v\d+\.\d+\.\d+(?:\.js)$/;c=b.exports=e,e.prototype.init=function(){function a(a){var b=a.join("").split("").map(function(a){return(""+a.charCodeAt(0)).split("").pop()}).reduce(function(a,b){return a+b});return f.version+":"+b}function b(b,e){f.builder(b,{minify:c.manager.enabled("browser client minification")},function(c,f){e(c,f?new d(f):null,a(b))})}var c=this;this.add("/static/flashsocket/WebSocketMain.swf",{file:f.dist+"/WebSocketMain.swf"}),this.add("/static/flashsocket/WebSocketMainInsecure.swf",{file:f.dist+"/WebSocketMainInsecure.swf"}),this.add("/socket.io.js",function(a,d){b(c.manager.get("transports"),d)}),this.add("/socket.io.v",{mime:i.js},function(a,d){b(c.manager.get("transports"),d)}),this.add("/socket.io+",{mime:i.js},function(a,d){var e=c.manager.get("transports"),f=a.match(j),g=[];return f?(f[0].split(".")[0].split("+").slice(1).forEach(function(a){~e.indexOf(a)&&g.push(a)}),g.length?void b(g,d):d("No valid transports")):d("No valid transports")}),this.manager.on("set:transports",function(){delete c.cache["/socket.io.js"],Object.keys(c.cache).forEach(function(a){j.test(a)&&delete c.cache[a]})})},e.prototype.gzip=function(a,b){var c,e=g.spawn("gzip",["-9","-c","-f","-n"]),f=d.isBuffer(a)?"binary":"utf8",h=[];e.stdout.on("data",function(a){h.push(a)}),e.stderr.on("data",function(a){c=a+"",h.length=0}),e.on("close",function(){if(c)return b(c);for(var a,e=0,f=0,g=h.length;g--;)e+=h[g].length;a=new d(e),g=h.length,h.forEach(function(b){var c=b.length;b.copy(a,f,0,c),f+=c}),h.length=0,b(null,a)}),e.stdin.end(a,f)},e.prototype.has=function(a){if(this.paths[a])return this.paths[a];for(var b=Object.keys(this.paths),c=b.length;c--;)if(-~a.indexOf(b[c]))return this.paths[b[c]];return!1},e.prototype.add=function(a,b,c){var d=/(?:\.(\w{1,4}))$/.exec(a);return c||"function"!=typeof b||(c=b,b={}),b.mime=b.mime||(d?i[d[1]]:!1),c&&(b.callback=c),(b.file||b.callback)&&b.mime?(this.paths[a]=b,!0):!1},e.prototype.write=function(a,b,c){function d(a,d,e,f){try{c.writeHead(a,d||void 0),c.end("HEAD"!==b.method&&e?e:"",f||void 0)}catch(g){}}function e(c){var e=b.headers["if-none-match"]===c.etag;if(e&&j.manager.enabled("browser client etag"))return d(304);var f=b.headers["accept-encoding"]||"",g=!!~f.toLowerCase().indexOf("gzip"),h=c.mime,i=c.versioned,k={"Content-Type":h.type};if(j.manager.enabled("browser client etag")&&c.etag&&!i&&(k.Etag=c.etag),i){var l=j.manager.get("browser client expires");k["Cache-Control"]='private, x-gzip-ok="", max-age='+l,k.Date=(new Date).toUTCString(),k.Expires=new Date(Date.now()+1e3*l).toUTCString()}g&&c.gzip?(k["Content-Length"]=c.gzip.length,k["Content-Encoding"]="gzip",k.Vary="Accept-Encoding",d(200,k,c.gzip.content,h.encoding)):(k["Content-Length"]=c.length,d(200,k,c.content,h.encoding)),j.manager.log.debug("served static content "+a)}function g(b,c,g){if(b)return j.manager.log.warn("Unable to serve file. "+(b.message||b)),d(500,null,"Error serving static "+a);var h=j.cache[a]={content:c,length:c.length,mime:i.mime,etag:g||f.version,versioned:k.test(a)};i.mime.gzip&&j.manager.enabled("browser client gzip")?j.gzip(c,function(a,b){a||(h.gzip={content:b,length:b.length}),e(h)}):e(h)}var i,j=this;return this.manager.enabled("browser client cache")&&this.cache[a]?e(this.cache[a]):this.manager.get("browser client handler")?this.manager.get("browser client handler").call(this,b,c):void((i=this.has(a))?i.file?h.readFile(i.file,g):i.callback?i.callback.call(this,a,g):d(404,null,"File handle not found"):d(404,null,"File not found"))}}).call(this,a("buffer").Buffer)},{"./util":218,buffer:4,child_process:1,fs:1,"socket.io-client":228}],206:[function(a,b,c){(function(a){function d(a){this.options=a,this.clients={}}c=b.exports=d;var e=a.EventEmitter;d.prototype.__proto__=e.prototype,d.prototype.client=function(a){return this.clients[a]||(this.clients[a]=new this.constructor.Client(this,a)),this.clients[a]},d.prototype.destroyClient=function(a,b){return this.clients[a]&&(this.clients[a].destroy(b),delete this.clients[a]),this},d.prototype.destroy=function(a){for(var b=Object.keys(this.clients),c=b.length,d=0,e=c;e>d;d++)this.destroyClient(b[d],a);return this.clients={},this},d.Client=function(a,b){this.store=a,this.id=b}}).call(this,a("_process"))},{_process:125}],207:[function(a,b,c){function d(a){f.call(this,a)}function e(){f.Client.apply(this,arguments),this.data={}}var f=(a("crypto"),a("../store"));c=b.exports=d,d.Client=e,d.prototype.__proto__=f.prototype,d.prototype.publish=function(){},d.prototype.subscribe=function(){},d.prototype.unsubscribe=function(){},e.prototype.__proto__=f.Client,e.prototype.get=function(a,b){return b(null,void 0===this.data[a]?null:this.data[a]),this},e.prototype.set=function(a,b,c){return this.data[a]=b,c&&c(null),this},e.prototype.has=function(a,b){b(null,a in this.data)},e.prototype.del=function(a,b){return delete this.data[a],b&&b(null),this},e.prototype.destroy=function(a){if("number"!=typeof a)this.data={};else{var b=this;setTimeout(function(){b.data={}},1e3*a)}return this}},{"../store":206,crypto:11}],208:[function(a,b,c){function d(b){b=b||{};var c=b.nodeId||function(){return Math.abs(Math.random()*Math.random()*Date.now()|0)};if(this.nodeId=c(),b.pack)this.pack=b.pack,this.unpack=b.unpack;else try{var d=a("msgpack");this.pack=d.pack,this.unpack=d.unpack}catch(e){this.pack=JSON.stringify,this.unpack=JSON.parse}var g=b.redis||a("redis"),h=g.RedisClient;b.redisPub instanceof h?this.pub=b.redisPub:(b.redisPub||(b.redisPub={}),this.pub=g.createClient(b.redisPub.port,b.redisPub.host,b.redisPub)),b.redisSub instanceof h?this.sub=b.redisSub:(b.redisSub||(b.redisSub={}),this.sub=g.createClient(b.redisSub.port,b.redisSub.host,b.redisSub)),b.redisClient instanceof h?this.cmd=b.redisClient:(b.redisClient||(b.redisClient={}),this.cmd=g.createClient(b.redisClient.port,b.redisClient.host,b.redisClient)),f.call(this,b),this.sub.setMaxListeners(0),this.setMaxListeners(0)}function e(a,b){f.Client.call(this,a,b)}{var f=(a("crypto"),a("../store"));a("assert")}c=b.exports=d,d.Client=e,d.prototype.__proto__=f.prototype,d.prototype.publish=function(a){var b=Array.prototype.slice.call(arguments,1);this.pub.publish(a,this.pack({nodeId:this.nodeId,args:b})),this.emit.apply(this,["publish",a].concat(b))},d.prototype.subscribe=function(a,b,c){if(this.sub.subscribe(a),b||c){var d=this;d.sub.on("subscribe",function e(f){function g(c,e){a==c&&(e=d.unpack(e),d.nodeId!=e.nodeId&&b.apply(null,e.args))}a==f&&(d.sub.on("message",g),d.on("unsubscribe",function h(b){a==b&&(d.sub.removeListener("message",g),d.removeListener("unsubscribe",h))}),d.sub.removeListener("subscribe",e),c&&c())})}this.emit("subscribe",a,b,c)},d.prototype.unsubscribe=function(a,b){if(this.sub.unsubscribe(a),b){var c=this.sub;c.on("unsubscribe",function d(e){a==e&&(b(),c.removeListener("unsubscribe",d))})}this.emit("unsubscribe",a,b)},d.prototype.destroy=function(){f.prototype.destroy.call(this),this.pub.end(),this.sub.end(),this.cmd.end()},e.prototype.__proto__=f.Client,e.prototype.get=function(a,b){return this.store.cmd.hget(this.id,a,b),this},e.prototype.set=function(a,b,c){return this.store.cmd.hset(this.id,a,b,c),this},e.prototype.del=function(a,b){return this.store.cmd.hdel(this.id,a,b),this},e.prototype.has=function(a,b){return this.store.cmd.hexists(this.id,a,function(a,c){return a?b(a):void b(null,!!c)}),this},e.prototype.destroy=function(a){return"number"!=typeof a?this.store.cmd.del(this.id):this.store.cmd.expire(this.id,a),this}},{"../store":206,assert:2,crypto:11,msgpack:151,redis:221}],209:[function(a,b,c){function d(a,b,c){this.manager=a,this.id=b.id,this.disconnected=!1,this.drained=!0,this.handleRequest(c)}var e=a("./parser");c=b.exports=d,d.prototype.__defineGetter__("log",function(){return this.manager.log}),d.prototype.__defineGetter__("store",function(){return this.manager.store}),d.prototype.handleRequest=function(a){this.log.debug("setting request",a.method,a.url),this.req=a,"GET"==a.method&&(this.socket=a.socket,this.open=!0,this.drained=!0,this.setHeartbeatInterval(),this.setHandlers(),this.onSocketConnect())},d.prototype.onSocketConnect=function(){},d.prototype.setHandlers=function(){var a=this;this.store.subscribe("heartbeat-clear:"+this.id,function(){a.onHeartbeatClear()}),this.store.subscribe("disconnect-force:"+this.id,function(){a.onForcedDisconnect()}),this.store.subscribe("dispatch:"+this.id,function(b,c){a.onDispatch(b,c)}),this.bound={end:this.onSocketEnd.bind(this),close:this.onSocketClose.bind(this),error:this.onSocketError.bind(this),drain:this.onSocketDrain.bind(this)},this.socket.on("end",this.bound.end),this.socket.on("close",this.bound.close),this.socket.on("error",this.bound.error),this.socket.on("drain",this.bound.drain),this.handlersSet=!0},d.prototype.clearHandlers=function(){this.handlersSet&&(this.store.unsubscribe("disconnect-force:"+this.id),this.store.unsubscribe("heartbeat-clear:"+this.id),this.store.unsubscribe("dispatch:"+this.id),this.socket.removeListener("end",this.bound.end),this.socket.removeListener("close",this.bound.close),this.socket.removeListener("error",this.bound.error),this.socket.removeListener("drain",this.bound.drain))},d.prototype.onSocketEnd=function(){this.end("socket end")},d.prototype.onSocketClose=function(a){this.end(a?"socket error":"socket close")},d.prototype.onSocketError=function(a){this.open&&(this.socket.destroy(),this.onClose()),this.log.info("socket error "+a.stack)},d.prototype.onSocketDrain=function(){this.drained=!0},d.prototype.onHeartbeatClear=function(){this.clearHeartbeatTimeout(),this.setHeartbeatInterval()},d.prototype.onForcedDisconnect=function(){this.disconnected||(this.log.info("transport end by forced client disconnection"),this.open&&this.packet({type:"disconnect"}),this.end("booted"))},d.prototype.onDispatch=function(a,b){b?this.writeVolatile(a):this.write(a)},d.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.log.debug("fired close timeout for client",a.id),a.closeTimeout=null,a.end("close timeout")},1e3*this.manager.get("close timeout")),this.log.debug("set close timeout for client",this.id)}},d.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null,this.log.debug("cleared close timeout for client",this.id))},d.prototype.setHeartbeatTimeout=function(){if(!this.heartbeatTimeout&&this.manager.enabled("heartbeats")){var a=this;this.heartbeatTimeout=setTimeout(function(){a.log.debug("fired heartbeat timeout for client",a.id),a.heartbeatTimeout=null,a.end("heartbeat timeout")},1e3*this.manager.get("heartbeat timeout")),this.log.debug("set heartbeat timeout for client",this.id)}},d.prototype.clearHeartbeatTimeout=function(){this.heartbeatTimeout&&this.manager.enabled("heartbeats")&&(clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=null,this.log.debug("cleared heartbeat timeout for client",this.id))},d.prototype.setHeartbeatInterval=function(){if(!this.heartbeatInterval&&this.manager.enabled("heartbeats")){var a=this;this.heartbeatInterval=setTimeout(function(){a.heartbeat(),a.heartbeatInterval=null},1e3*this.manager.get("heartbeat interval")),this.log.debug("set heartbeat interval for client",this.id)}},d.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.clearHeartbeatTimeout(),this.clearHeartbeatInterval()},d.prototype.heartbeat=function(){return this.open&&(this.log.debug("emitting heartbeat for client",this.id),this.packet({type:"heartbeat"}),this.setHeartbeatTimeout()),this},d.prototype.onMessage=function(a){var b=this.manager.transports[this.id];if("heartbeat"==a.type)this.log.debug("got heartbeat packet"),b&&b.open?b.onHeartbeatClear():this.store.publish("heartbeat-clear:"+this.id);else{if("disconnect"==a.type&&""==a.endpoint)return this.log.debug("got disconnection packet"),void(b?b.onForcedDisconnect():this.store.publish("disconnect-force:"+this.id));if(a.id&&"data"!=a.ack){this.log.debug("acknowledging packet automatically");var c=e.encodePacket({type:"ack",ackId:a.id,endpoint:a.endpoint||""});b&&b.open?b.onDispatch(c):(this.manager.onClientDispatch(this.id,c),this.store.publish("dispatch:"+this.id,c))}b?this.manager.onClientMessage(this.id,a):this.store.publish("message:"+this.id,a)}},d.prototype.clearHeartbeatInterval=function(){this.heartbeatInterval&&this.manager.enabled("heartbeats")&&(clearTimeout(this.heartbeatInterval),this.heartbeatInterval=null,this.log.debug("cleared heartbeat interval for client",this.id))},d.prototype.disconnect=function(a){return this.packet({type:"disconnect"}),this.end(a),this},d.prototype.close=function(){this.open&&(this.doClose(),this.onClose())},d.prototype.onClose=function(){this.open&&(this.setCloseTimeout(),this.clearHandlers(),this.open=!1,this.manager.onClose(this.id),this.store.publish("close",this.id))},d.prototype.end=function(a){if(!this.disconnected){this.log.info("transport end ("+a+")");var b=this.manager.transports[this.id];this.close(),this.clearTimeouts(),this.disconnected=!0,b?this.manager.onClientDisconnect(this.id,a,!0):this.store.publish("disconnect:"+this.id,a)}},d.prototype.discard=function(){return this.log.debug("discarding transport"),this.discarded=!0,this.clearTimeouts(),this.clearHandlers(),this},d.prototype.error=function(a,b){this.packet({type:"error",reason:a,advice:b}),this.log.warn(a,b?"client should "+b:""),this.end("error")},d.prototype.packet=function(a){return this.write(e.encodePacket(a))},d.prototype.writeVolatile=function(a){this.open?this.drained?this.write(a):this.log.debug("ignoring volatile packet, buffer not drained"):this.log.debug("ignoring volatile packet, transport not open")}},{"./parser":202}],210:[function(a,b,c){function d(a,b,c){return e.call(this,a,b,c)}var e=a("./websocket");c=b.exports=d,d.prototype.__proto__=e.prototype,d.prototype.name="flashsocket",d.init=function(b){function c(){b.get("flash policy server")&&(d=a("policyfile").createServer({log:function(a){b.log.info(a)}},b.get("origins")),d.on("close",function(){d=null}),d.listen(b.get("flash policy port"),b.server),b.flashPolicyServer=d)}var d;b.on("set:origins",function(a){d&&(d.origins=Array.isArray(a)?a:[a],d.compile())}),b.on("set:flash policy port",function(a){var e=b.get("transports");if(~e.indexOf("flashsocket")){if(d){if(d.port===a)return;try{d.close()}catch(f){}}c()}}),b.on("set:flash policy server",function(a){var e=b.get("transports");if(~e.indexOf("flashsocket")){if(d&&!a)try{d.close()}catch(f){}}else!d&&a&&c()}),b.on("set:transports",function(){!d&&~b.get("transports").indexOf("flashsocket")&&c()}),~b.get("transports").indexOf("flashsocket")&&c()}},{"./websocket":216,policyfile:219}],211:[function(a,b,c){function d(a,b,c){e.call(this,a,b,c)}var e=a("./http");c=b.exports=d,d.prototype.__proto__=e.prototype,d.prototype.name="htmlfile",d.prototype.handleRequest=function(a){e.prototype.handleRequest.call(this,a),"GET"==a.method&&(a.res.writeHead(200,{"Content-Type":"text/html; charset=UTF-8",Connection:"keep-alive","Transfer-Encoding":"chunked"}),a.res.write("<html><body><script>var _ = function (msg) { parent.s._(msg, document); };</script>"+new Array(174).join(" ")))},d.prototype.write=function(a){a="<script>_("+JSON.stringify(a).replace(/\//g,"\\/")+");</script>",this.response.write(a)&&(this.drained=!0),this.log.debug(this.name+" writing",a)}},{"./http":213}],212:[function(a,b,c){function d(a,b,c){e.call(this,a,b,c)}var e=a("./http");c=b.exports=d,d.prototype.__proto__=e.prototype,d.prototype.name="httppolling",d.prototype.setHandlers=function(){e.prototype.setHandlers.call(this),this.socket.removeListener("end",this.bound.end),this.socket.removeListener("close",this.bound.close)
},d.prototype.setHeartbeatInterval=function(){return this},d.prototype.handleRequest=function(a){if(e.prototype.handleRequest.call(this,a),"GET"==a.method){var b=this;this.pollTimeout=setTimeout(function(){b.packet({type:"noop"}),b.log.debug(b.name+" closed due to exceeded duration")},1e3*this.manager.get("polling duration")),this.log.debug("setting poll timeout")}},d.prototype.clearPollTimeout=function(){return this.pollTimeout&&(clearTimeout(this.pollTimeout),this.pollTimeout=null,this.log.debug("clearing poll timeout")),this},d.prototype.clearTimeouts=function(){e.prototype.clearTimeouts.call(this),this.clearPollTimeout()},d.prototype.doWrite=function(){this.clearPollTimeout()},d.prototype.write=function(a){this.doWrite(a),this.response.end(),this.onClose()},d.prototype.end=function(a){return this.clearPollTimeout(),e.prototype.end.call(this,a)}},{"./http":213}],213:[function(a,b,c){(function(d){function e(a,b,c){f.call(this,a,b,c)}var f=a("../transport"),g=a("../parser"),h=a("querystring");c=b.exports=e,e.prototype.__proto__=f.prototype,e.prototype.handleRequest=function(a){if(this.response=a.res,"POST"==a.method){var b="",c=a.res,e=a.headers.origin,g={"Content-Length":1,"Content-Type":"text/plain; charset=UTF-8"},i=this;a.on("data",function(c){b+=c,d.byteLength(b)>=i.manager.get("destroy buffer size")&&(b="",a.connection.destroy())}),a.on("end",function(){c.writeHead(200,g),c.end("1"),i.onData(i.postEncoded?h.parse(b).d:b)}),a.on("close",function(){b="",i.onClose()}),e&&(g["Access-Control-Allow-Origin"]=e,g["Access-Control-Allow-Credentials"]="true")}else f.prototype.handleRequest.call(this,a)},e.prototype.onData=function(a){var b=g.decodePayload(a);this.log.debug(this.name+" received data packet",a);for(var c=0,d=b.length;d>c;c++)this.onMessage(b[c])},e.prototype.doClose=function(){this.response.end()},e.prototype.payload=function(a){this.write(g.encodePayload(a))}}).call(this,a("buffer").Buffer)},{"../parser":202,"../transport":209,buffer:4,querystring:129}],214:[function(a,b){b.exports={websocket:a("./websocket"),flashsocket:a("./flashsocket"),htmlfile:a("./htmlfile"),"xhr-polling":a("./xhr-polling"),"jsonp-polling":a("./jsonp-polling")}},{"./flashsocket":210,"./htmlfile":211,"./jsonp-polling":215,"./websocket":216,"./xhr-polling":217}],215:[function(a,b,c){(function(d){function e(a,b,c){f.call(this,a,b,c),this.head="io.j[0](",this.foot=");",b.query.i&&g.test(b.query.i)&&(this.head="io.j["+b.query.i+"](")}var f=a("./http-polling"),g=/^\d+$/;c=b.exports=e,e.prototype.__proto__=f.prototype,e.prototype.name="jsonppolling",e.prototype.postEncoded=!0,e.prototype.onData=function(a){try{a=JSON.parse(a)}catch(b){return void this.error("parse","reconnect")}f.prototype.onData.call(this,a)},e.prototype.doWrite=function(a){f.prototype.doWrite.call(this);var a=void 0===a?"":this.head+JSON.stringify(a)+this.foot;this.response.writeHead(200,{"Content-Type":"text/javascript; charset=UTF-8","Content-Length":d.byteLength(a),Connection:"Keep-Alive","X-XSS-Protection":"0"}),this.response.write(a),this.log.debug(this.name+" writing",a)}}).call(this,a("buffer").Buffer)},{"./http-polling":212,buffer:4}],216:[function(a,b,c){function d(a,b,c){var d,f=c.headers["sec-websocket-version"];return d="undefined"!=typeof f&&"undefined"!=typeof e[f]?new e[f](a,b,c):new e["default"](a,b,c),"undefined"!=typeof this.name&&(d.name=this.name),d}var e=a("./websocket/");c=b.exports=d},{"./websocket/":216}],217:[function(a,b,c){(function(d){function e(a,b,c){f.call(this,a,b,c)}var f=a("./http-polling");c=b.exports=e,e.prototype.__proto__=f.prototype,e.prototype.name="xhr-polling",e.prototype.doWrite=function(a){f.prototype.doWrite.call(this);var b=this.req.headers.origin,c={"Content-Type":"text/plain; charset=UTF-8","Content-Length":void 0===a?0:d.byteLength(a),Connection:"Keep-Alive"};b&&(c["Access-Control-Allow-Origin"]=b,c["Access-Control-Allow-Credentials"]="true"),this.response.writeHead(200,c),this.response.write(a),this.log.debug(this.name+" writing",a)}}).call(this,a("buffer").Buffer)},{"./http-polling":212,buffer:4}],218:[function(a,b,c){c.toArray=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},c.unpack=function(a){for(var b=0,c=0;c<a.length;++c)b=0==c?a[c]:256*b+a[c];return b},c.padl=function(a,b,c){return new Array(1+b-a.length).join(c)+a}},{}],219:[function(a,b){b.exports=a("./lib/server.js")},{"./lib/server.js":220}],220:[function(a,b,c){(function(b,d){function e(a,b){var c=this;this.origins=b||["*:*"],this.port=843,this.log=console.log,Object.keys(a).forEach(function(b){c[b]&&(c[b]=a[b])}),this.socket=g.createServer(function(a){a.on("error",function(){c.responder.call(c,a)}),c.responder.call(c,a)}),this.socket.on("error",function(a){13==a.errno?(c.log&&c.log("Unable to listen to port `"+c.port+"` as your Node.js instance does not have root privileges. "+(c.server?"The Flash Policy File requests will only be served inline over the supplied HTTP server. Inline serving is slower than a dedicated server instance.":"No fallback server supplied, we will be unable to answer Flash Policy File requests.")),c.emit("connect_failed",a),c.socket.removeAllListeners(),delete c.socket):c.log&&c.log("FlashPolicyFileServer received an error event:\n"+(a.message?a.message:a))}),this.socket.on("timeout",function(){}),this.socket.on("close",function(a){a&&c.log&&c.log("Server closing due to an error: \n"+(a.message?a.message:a)),c.server&&(c.server["@"]&&c.server.online&&c.server.removeListener("connection",c.server["@"]),delete c.server.online)}),this.compile()}var f=Array.prototype.slice,g=a("net");e.prototype.listen=function(){var a,b=this,c=f.call(arguments,0);return c.forEach(function(c){var d=typeof c;"number"===d&&(b.port=c),"function"===d&&(a=c),"object"===d&&(b.server=c)}),this.server&&(this.server["@"]=function(a){a.once("data",function(c){if(c&&60===c[0]&&"<policy-file-request/>\x00"===c.toString()&&a&&("open"===a.readyState||"writeOnly"===a.readyState))try{a.end(b.buffer)}catch(d){}})},this.server.on("connection",this.server["@"])),this.port>=0&&this.socket.listen(this.port,function(){b.socket.online=!0,a&&(a.call(b),a=void 0)}),this},e.prototype.responder=function(a){if(a&&"open"==a.readyState&&a.end)try{a.end(this.buffer)}catch(b){}},e.prototype.compile=function(){var a=['<?xml version="1.0"?>','<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">',"<cross-domain-policy>"];return this.origins.forEach(function b(b){var c=b.split(":");a.push('<allow-access-from domain="'+c[0]+'" to-ports="'+c[1]+'"/>')}),a.push("</cross-domain-policy>"),this.buffer=new d(a.join(""),"utf8"),this},e.prototype.add=function(){for(var a=f.call(arguments,0),b=a.length;b--;)this.origins.indexOf(a[b])>=0&&(a[b]=null);return Array.prototype.push.apply(this.origins,a.filter(function(a){return!!a})),this.compile(),this},e.prototype.remove=function(a){var b=this.origins.indexOf(a);return b>0&&(this.origins.splice(b,1),this.compile()),this},e.prototype.close=function(){return this.socket.removeAllListeners(),this.socket.close(),this},Object.keys(b.EventEmitter.prototype).forEach(function(a){e.prototype[a]=e.prototype[a]||function(){return this.socket&&this.socket[a].apply(this.socket,arguments),this}}),c.createServer=function(a,b){return b=Array.isArray(b)?b:Array.isArray(a)?a:!1,a=!Array.isArray(a)&&a?a:{},new e(a,b)},c.Server=e,c.version="0.0.4"}).call(this,a("_process"),a("buffer").Buffer)},{_process:125,buffer:4,net:1}],221:[function(a,b,c){(function(b,d){function e(a,b){this.stream=a,this.options=b=b||{},this.connection_id=++t,this.connected=!1,this.ready=!1,this.connections=0,void 0===this.options.socket_nodelay&&(this.options.socket_nodelay=!0),this.should_buffer=!1,this.command_queue_high_water=this.options.command_queue_high_water||1e3,this.command_queue_low_water=this.options.command_queue_low_water||0,this.max_attempts=null,b.max_attempts&&!isNaN(b.max_attempts)&&b.max_attempts>0&&(this.max_attempts=+b.max_attempts),this.command_queue=new o,this.offline_queue=new o,this.commands_sent=0,this.connect_timeout=!1,b.connect_timeout&&!isNaN(b.connect_timeout)&&b.connect_timeout>0&&(this.connect_timeout=+b.connect_timeout),this.enable_offline_queue=!0,"boolean"==typeof this.options.enable_offline_queue&&(this.enable_offline_queue=this.options.enable_offline_queue),this.initialize_retry_vars(),this.pub_sub_mode=!1,this.subscription_set={},this.monitoring=!1,this.closing=!1,this.server_info={},this.auth_pass=null,this.parser_module=null,this.selected_db=null,this.old_state=null;var c=this;this.stream.on("connect",function(){c.on_connect()}),this.stream.on("data",function(a){c.on_data(a)}),this.stream.on("error",function(a){c.on_error(a.message)}),this.stream.on("close",function(){c.connection_gone("close")}),this.stream.on("end",function(){c.connection_gone("end")}),this.stream.on("drain",function(){c.should_buffer=!1,c.emit("drain")}),q.EventEmitter.call(this)}function f(a,c){try{a(null,c)}catch(d){b.nextTick(function(){throw d})}}function g(a){var b,c,d,e,f={};if(0===a.length)return null;for(b=0,c=a.length;c>b;b+=2)d=a[b].toString(),e=a[b+1],f[d]=e;return f}function h(a){var b;if(d.isBuffer(a))return a.toString();if(Array.isArray(a)){for(b=0;b<a.length;b++)a[b]=a[b].toString();return a}return a}function i(a,b,c,d,e){this.command=a,this.args=b,this.sub_command=c,this.buffer_args=d,this.callback=e}function j(a,b){this.client=a,this.queue=[["MULTI"]],Array.isArray(b)&&(this.queue=this.queue.concat(b))}function k(a,b){var c={};return a.forEach(function(a){c[a]=!0}),b.forEach(function(a){c[a]=!0}),Object.keys(c)}var l,m=a("net"),n=a("./lib/util"),o=a("./lib/queue"),p=a("./lib/to_array"),q=a("events"),r=a("crypto"),s=[],t=0,u=6379,v="127.0.0.1";c.debug_mode=!1;try{a("./lib/parser/hiredis"),s.push(a("./lib/parser/hiredis"))}catch(w){c.debug_mode&&console.warn("hiredis parser not installed.")}s.push(a("./lib/parser/javascript")),n.inherits(e,q.EventEmitter),c.RedisClient=e,e.prototype.initialize_retry_vars=function(){this.retry_timer=null,this.retry_totaltime=0,this.retry_delay=150,this.retry_backoff=1.7,this.attempts=1},e.prototype.flush_and_error=function(a){for(var b;this.offline_queue.length>0;)b=this.offline_queue.shift(),"function"==typeof b.callback&&b.callback(a);for(this.offline_queue=new o;this.command_queue.length>0;)b=this.command_queue.shift(),"function"==typeof b.callback&&b.callback(a);this.command_queue=new o},e.prototype.on_error=function(a){var b="Redis connection to "+this.host+":"+this.port+" failed - "+a;this.closing||(c.debug_mode&&console.warn(b),this.flush_and_error(b),this.connected=!1,this.ready=!1,this.emit("error",new Error(b)),this.connection_gone("error"))},e.prototype.do_auth=function(){var a=this;c.debug_mode&&console.log("Sending auth to "+a.host+":"+a.port+" id "+a.connection_id),a.send_anyway=!0,a.send_command("auth",[this.auth_pass],function(b,d){return b?b.toString().match("LOADING")?(console.log("Redis still loading, trying to authenticate later"),void setTimeout(function(){a.do_auth()},2e3)):a.emit("error",new Error("Auth error: "+b.message)):"OK"!==d.toString()?a.emit("error",new Error("Auth failed: "+d.toString())):(c.debug_mode&&console.log("Auth succeeded "+a.host+":"+a.port+" id "+a.connection_id),a.auth_callback&&(a.auth_callback(b,d),a.auth_callback=null),a.emit("connect"),void(a.options.no_ready_check?a.on_ready():a.ready_check()))}),a.send_anyway=!1},e.prototype.on_connect=function(){c.debug_mode&&console.log("Stream connected "+this.host+":"+this.port+" id "+this.connection_id);this.connected=!0,this.ready=!1,this.attempts=0,this.connections+=1,this.command_queue=new o,this.emitted_end=!1,this.initialize_retry_vars(),this.options.socket_nodelay&&this.stream.setNoDelay(),this.stream.setTimeout(0),this.init_parser(),this.auth_pass?this.do_auth():(this.emit("connect"),this.options.no_ready_check?this.on_ready():this.ready_check())},e.prototype.init_parser=function(){var a=this;if(this.options.parser){if(!s.some(function(b){return b.name===a.options.parser?(a.parser_module=b,c.debug_mode&&console.log("Using parser module: "+a.parser_module.name),!0):void 0}))throw new Error("Couldn't find named parser "+a.options.parser+" on this system")}else c.debug_mode&&console.log("Using default parser module: "+s[0].name),this.parser_module=s[0];this.parser_module.debug_mode=c.debug_mode,this.reply_parser=new this.parser_module.Parser({return_buffers:a.options.return_buffers||a.options.detect_buffers||!1}),this.reply_parser.on("reply error",function(b){a.return_error(new Error(b))}),this.reply_parser.on("reply",function(b){a.return_reply(b)}),this.reply_parser.on("error",function(b){a.emit("error",new Error("Redis reply parser error: "+b.stack))})},e.prototype.on_ready=function(){var a=this;if(this.ready=!0,null!==this.old_state&&(this.monitoring=this.old_state.monitoring,this.pub_sub_mode=this.old_state.pub_sub_mode,this.selected_db=this.old_state.selected_db,this.old_state=null),null!==this.selected_db&&this.send_command("select",[this.selected_db]),this.pub_sub_mode===!0){var b=0,d=function(){b--,0==b&&a.emit("ready")};return void Object.keys(this.subscription_set).forEach(function(e){var f=e.split(" ");c.debug_mode&&console.warn("sending pub/sub on_ready "+f[0]+", "+f[1]),b++,a.send_command(f[0]+"scribe",[f[1]],d)})}this.monitoring?this.send_command("monitor"):this.send_offline_queue(),this.emit("ready")},e.prototype.on_info_cmd=function(a,b){var d,e,f=this,g={};return a?f.emit("error",new Error("Ready check failed: "+a.message)):(d=b.toString().split("\r\n"),d.forEach(function(a){var b=a.split(":");b[1]&&(g[b[0]]=b[1])}),g.versions=[],g.redis_version.split(".").forEach(function(a){g.versions.push(+a)}),this.server_info=g,void(!g.loading||g.loading&&"0"===g.loading?(c.debug_mode&&console.log("Redis server ready."),this.on_ready()):(e=1e3*g.loading_eta_seconds,e>1e3&&(e=1e3),c.debug_mode&&console.log("Redis server still loading, trying again in "+e),setTimeout(function(){f.ready_check()},e))))},e.prototype.ready_check=function(){var a=this;c.debug_mode&&console.log("checking server ready state..."),this.send_anyway=!0,this.info(function(b,c){a.on_info_cmd(b,c)}),this.send_anyway=!1},e.prototype.send_offline_queue=function(){for(var a,b=0;this.offline_queue.length>0;)a=this.offline_queue.shift(),c.debug_mode&&console.log("Sending offline command: "+a.command),b+=!this.send_command(a.command,a.args,a.callback);this.offline_queue=new o,b||(this.should_buffer=!1,this.emit("drain"))},e.prototype.connection_gone=function(a){var b=this;if(!this.retry_timer){if(c.debug_mode&&console.warn("Redis connection is gone from "+a+" event."),this.connected=!1,this.ready=!1,null===this.old_state){var d={monitoring:this.monitoring,pub_sub_mode:this.pub_sub_mode,selected_db:this.selected_db};this.old_state=d,this.monitoring=!1,this.pub_sub_mode=!1,this.selected_db=null}if(this.emitted_end||(this.emit("end"),this.emitted_end=!0),this.flush_and_error("Redis connection gone from "+a+" event."),this.closing)return this.retry_timer=null,void(c.debug_mode&&console.warn("connection ended from quit command, not retrying."));if(this.retry_delay=Math.floor(this.retry_delay*this.retry_backoff),c.debug_mode&&console.log("Retry connection in "+this.current_retry_delay+" ms"),this.max_attempts&&this.attempts>=this.max_attempts)return this.retry_timer=null,void console.error("node_redis: Couldn't get Redis connection after "+this.max_attempts+" attempts.");this.attempts+=1,this.emit("reconnecting",{delay:b.retry_delay,attempt:b.attempts}),this.retry_timer=setTimeout(function(){return c.debug_mode&&console.log("Retrying connection..."),b.retry_totaltime+=b.current_retry_delay,b.connect_timeout&&b.retry_totaltime>=b.connect_timeout?(b.retry_timer=null,void console.error("node_redis: Couldn't get Redis connection after "+b.retry_totaltime+"ms.")):(b.stream.connect(b.port,b.host),void(b.retry_timer=null))},this.retry_delay)}},e.prototype.on_data=function(a){c.debug_mode&&console.log("net read "+this.host+":"+this.port+" id "+this.connection_id+": "+a.toString());try{this.reply_parser.execute(a)}catch(b){this.emit("error",b)}},e.prototype.return_error=function(a){var c=this.command_queue.shift(),d=this.command_queue.getLength();if(this.pub_sub_mode===!1&&0===d&&(this.emit("idle"),this.command_queue=new o),this.should_buffer&&d<=this.command_queue_low_water&&(this.emit("drain"),this.should_buffer=!1),c&&"function"==typeof c.callback)try{c.callback(a)}catch(e){b.nextTick(function(){throw e})}else console.log("node_redis: no callback to send error: "+a.message),b.nextTick(function(){throw a})},e.prototype.return_reply=function(a){var b,d,e,i,j,k,l;if(b=this.command_queue.shift(),l=this.command_queue.getLength(),this.pub_sub_mode===!1&&0===l&&(this.emit("idle"),this.command_queue=new o),this.should_buffer&&l<=this.command_queue_low_water&&(this.emit("drain"),this.should_buffer=!1),b&&!b.sub_command)"function"==typeof b.callback?(this.options.detect_buffers&&b.buffer_args===!1&&(a=h(a)),a&&"hgetall"===b.command.toLowerCase()&&(a=g(a)),f(b.callback,a)):c.debug_mode&&console.log("no callback for reply: "+(a&&a.toString&&a.toString()));else if(this.pub_sub_mode||b&&b.sub_command){if(Array.isArray(a))if(e=a[0].toString(),"message"===e)this.emit("message",a[1].toString(),a[2]);else if("pmessage"===e)this.emit("pmessage",a[1].toString(),a[2].toString(),a[3]);else{if("subscribe"!==e&&"unsubscribe"!==e&&"psubscribe"!==e&&"punsubscribe"!==e)throw new Error("subscriptions are active but got unknown reply type "+e);0===a[2]?(this.pub_sub_mode=!1,this.debug_mode&&console.log("All subscriptions removed, exiting pub/sub mode")):this.pub_sub_mode=!0,b&&"function"==typeof b.callback&&f(b.callback,a[1].toString()),this.emit(e,a[1].toString(),a[2])}else if(!this.closing)throw new Error("subscriptions are active but got an invalid reply: "+a)}else{if(!this.monitoring)throw new Error("node_redis command queue state error. If you can reproduce this, please report it.");d=a.indexOf(" "),i=a.slice(0,d),j=a.indexOf('"'),k=a.slice(j+1,-1).split('" "').map(function(a){return a.replace(/\\"/g,'"')}),this.emit("monitor",i,k)}},e.prototype.send_command=function(a,b,e){var f,g,h,j,k,l,m,n=this.stream,o="",p=0;if("string"!=typeof a)throw new Error("First argument to send_command must be the command name string, not "+typeof a);if(!Array.isArray(b))throw new Error("send_command: second argument must be an array");if("function"==typeof e);else{if(e)throw new Error("send_command: last argument must be a callback or undefined");m=typeof b[b.length-1],("function"===m||"undefined"===m)&&(e=b.pop())}for(("sadd"===a||"SADD"===a)&&b.length>0&&Array.isArray(b[b.length-1])&&(b=b.slice(0,-1).concat(b[b.length-1])),l=!1,h=0,j=b.length,f;j>h;h+=1)d.isBuffer(b[h])&&(l=!0);if(g=new i(a,b,!1,l,e),!this.ready&&!this.send_anyway||!n.writable){if(c.debug_mode&&(n.writable||console.log("send command: stream is not writeable.")),this.enable_offline_queue)c.debug_mode&&console.log("Queueing "+a+" for next server connection."),this.offline_queue.push(g),this.should_buffer=!0;else{var q=new Error("send_command: stream not writeable. enable_offline_queue is false");if(!g.callback)throw q;g.callback(q)}return!1}if("subscribe"===a||"psubscribe"===a||"unsubscribe"===a||"punsubscribe"===a)this.pub_sub_command(g);else if("monitor"===a)this.monitoring=!0;else if("quit"===a)this.closing=!0;else if(this.pub_sub_mode===!0)throw new Error("Connection in pub/sub mode, only pub/sub commands may be used");if(this.command_queue.push(g),this.commands_sent+=1,k=b.length+1,o="*"+k+"\r\n$"+a.length+"\r\n"+a+"\r\n",l)for(c.debug_mode&&console.log("send command ("+o+") has Buffer arguments"),p+=!n.write(o),h=0,j=b.length,f;j>h;h+=1)f=b[h],d.isBuffer(f)||f instanceof String||(f=String(f)),d.isBuffer(f)?0===f.length?(c.debug_mode&&console.log("send_command: using empty string for 0 length buffer"),p+=!n.write("$0\r\n\r\n")):(p+=!n.write("$"+f.length+"\r\n"),p+=!n.write(f),p+=!n.write("\r\n"),c.debug_mode&&console.log("send_command: buffer send "+f.length+" bytes")):(c.debug_mode&&console.log("send_command: string send "+d.byteLength(f)+" bytes: "+f),p+=!n.write("$"+d.byteLength(f)+"\r\n"+f+"\r\n"));else{for(h=0,j=b.length,f;j>h;h+=1)f=b[h],"string"!=typeof f&&(f=String(f)),o+="$"+d.byteLength(f)+"\r\n"+f+"\r\n";c.debug_mode&&console.log("send "+this.host+":"+this.port+" id "+this.connection_id+": "+o),p+=!n.write(o)}return c.debug_mode&&console.log("send_command buffered_writes: "+p," should_buffer: "+this.should_buffer),(p||this.command_queue.getLength()>=this.command_queue_high_water)&&(this.should_buffer=!0),!this.should_buffer},e.prototype.pub_sub_command=function(a){var b,d,e,f;if(this.pub_sub_mode===!1&&c.debug_mode&&console.log("Entering pub/sub mode from "+a.command),this.pub_sub_mode=!0,a.sub_command=!0,e=a.command,f=a.args,"subscribe"===e||"psubscribe"===e)for(d="subscribe"===e?"sub":"psub",b=0;b<f.length;b++)this.subscription_set[d+" "+f[b]]=!0;else for(d="unsubscribe"===e?"sub":"psub",b=0;b<f.length;b++)delete this.subscription_set[d+" "+f[b]]},e.prototype.end=function(){return this.stream._events={},this.connected=!1,this.ready=!1,this.stream.end()},c.Multi=j,l=k(["get","set","setnx","setex","append","strlen","del","exists","setbit","getbit","setrange","getrange","substr","incr","decr","mget","rpush","lpush","rpushx","lpushx","linsert","rpop","lpop","brpop","brpoplpush","blpop","llen","lindex","lset","lrange","ltrim","lrem","rpoplpush","sadd","srem","smove","sismember","scard","spop","srandmember","sinter","sinterstore","sunion","sunionstore","sdiff","sdiffstore","smembers","zadd","zincrby","zrem","zremrangebyscore","zremrangebyrank","zunionstore","zinterstore","zrange","zrangebyscore","zrevrangebyscore","zcount","zrevrange","zcard","zscore","zrank","zrevrank","hset","hsetnx","hget","hmset","hmget","hincrby","hdel","hlen","hkeys","hvals","hgetall","hexists","incrby","decrby","getset","mset","msetnx","randomkey","select","move","rename","renamenx","expire","expireat","keys","dbsize","auth","ping","echo","save","bgsave","bgrewriteaof","shutdown","lastsave","type","multi","exec","discard","sync","flushdb","flushall","sort","info","monitor","ttl","persist","slaveof","debug","config","subscribe","unsubscribe","psubscribe","punsubscribe","publish","watch","unwatch","cluster","restore","migrate","dump","object","client","eval","evalsha"],a("./lib/commands")),l.forEach(function(a){e.prototype[a]=function(b,c){return Array.isArray(b)&&"function"==typeof c?this.send_command(a,b,c):this.send_command(a,p(arguments))},e.prototype[a.toUpperCase()]=e.prototype[a],j.prototype[a]=function(){return this.queue.push([a].concat(p(arguments))),this},j.prototype[a.toUpperCase()]=j.prototype[a]}),e.prototype.select=function(a,b){var c=this;this.send_command("select",[a],function(d,e){null===d&&(c.selected_db=a),"function"==typeof b&&b(d,e)})},e.prototype.SELECT=e.prototype.select,e.prototype.auth=function(){var a=p(arguments);this.auth_pass=a[0],this.auth_callback=a[1],c.debug_mode&&console.log("Saving auth as "+this.auth_pass),this.connected&&this.send_command("auth",a)},e.prototype.AUTH=e.prototype.auth,e.prototype.hmget=function(a,b,c){return Array.isArray(b)&&"function"==typeof c?this.send_command("hmget",[a].concat(b),c):Array.isArray(a)&&"function"==typeof b?this.send_command("hmget",a,b):this.send_command("hmget",p(arguments))},e.prototype.HMGET=e.prototype.hmget,e.prototype.hmset=function(a,b){var c,d,e,f,g;if(Array.isArray(a)&&"function"==typeof b)return this.send_command("hmset",a,b);if(a=p(arguments),"function"==typeof a[a.length-1]?(b=a[a.length-1],a.length-=1):b=null,2===a.length&&"string"==typeof a[0]&&"object"==typeof a[1]){for(c=[a[0]],d=Object.keys(a[1]),e=0,f=d.length;f>e;e++){if(g=d[e],c.push(g),"string"!=typeof a[1][g]){var h=new Error("hmset expected value to be a string",g,":",a[1][g]);if(b)return b(h);throw h}c.push(a[1][g])}a=c}return this.send_command("hmset",a,b)},e.prototype.HMSET=e.prototype.hmset,j.prototype.hmset=function(){var a,b=p(arguments);return b.length>=2&&"string"==typeof b[0]&&"object"==typeof b[1]?(a=["hmset",b[0]],Object.keys(b[1]).map(function(c){a.push(c),a.push(b[1][c])}),b[2]&&a.push(b[2]),b=a):b.unshift("hmset"),this.queue.push(b),this},j.prototype.HMSET=j.prototype.hmset,j.prototype.exec=function(a){var b=this;return this.queue.forEach(function(a,c){var d,e=a[0];a="function"==typeof a[a.length-1]?a.slice(1,-1):a.slice(1),1===a.length&&Array.isArray(a[0])&&(a=a[0]),"hmset"===e.toLowerCase()&&"object"==typeof a[1]&&(d=a.pop(),Object.keys(d).forEach(function(b){a.push(b),a.push(d[b])})),this.client.send_command(e,a,function(a){if(a){var d=b.queue[c];if("function"!=typeof d[d.length-1])throw new Error(a);d[d.length-1](a),b.queue.splice(c,1)}})},this),this.client.send_command("EXEC",[],function(c,d){if(c){if(a)return void a(new Error(c));throw new Error(c)}var e,f,h,i;if(d)for(e=1,f=b.queue.length;f>e;e+=1)h=d[e-1],i=b.queue[e],h&&"hgetall"===i[0].toLowerCase()&&(d[e-1]=h=g(h)),"function"==typeof i[i.length-1]&&i[i.length-1](null,h);a&&a(null,d)})},j.prototype.EXEC=j.prototype.exec,e.prototype.multi=function(a){return new j(this,a)},e.prototype.MULTI=function(a){return new j(this,a)};var x=e.prototype.eval;e.prototype.eval=e.prototype.EVAL=function(){var a,b=this,c=p(arguments);"function"==typeof c[c.length-1]&&(a=c.pop());var d=c[0];c[0]=r.createHash("sha1").update(d).digest("hex"),b.evalsha(c,function(e,f){e&&/NOSCRIPT/.test(e.message)?(c[0]=d,x.call(b,c,a)):a&&a(e,f)})},c.createClient=function(a,b,c){var d,f,g=a||u,h=b||v;return f=m.createConnection(g,h),d=new e(f,c),d.port=g,d.host=h,d},c.print=function(a,b){console.log(a?"Error: "+a:"Reply: "+b)}}).call(this,a("_process"),a("buffer").Buffer)},{"./lib/commands":222,"./lib/parser/hiredis":223,"./lib/parser/javascript":224,"./lib/queue":225,"./lib/to_array":226,"./lib/util":227,_process:125,buffer:4,crypto:11,events:115,net:1}],222:[function(a,b){b.exports=["append","auth","bgrewriteaof","bgsave","bitcount","bitop","blpop","brpop","brpoplpush","client kill","client list","config get","config set","config resetstat","dbsize","debug object","debug segfault","decr","decrby","del","discard","dump","echo","eval","evalsha","exec","exists","expire","expireat","flushall","flushdb","get","getbit","getrange","getset","hdel","hexists","hget","hgetall","hincrby","hincrbyfloat","hkeys","hlen","hmget","hmset","hset","hsetnx","hvals","incr","incrby","incrbyfloat","info","keys","lastsave","lindex","linsert","llen","lpop","lpush","lpushx","lrange","lrem","lset","ltrim","mget","migrate","monitor","move","mset","msetnx","multi","object","persist","pexpire","pexpireat","ping","psetex","psubscribe","pttl","publish","punsubscribe","quit","randomkey","rename","renamenx","restore","rpop","rpoplpush","rpush","rpushx","sadd","save","scard","script exists","script flush","script kill","script load","sdiff","sdiffstore","select","set","setbit","setex","setnx","setrange","shutdown","sinter","sinterstore","sismember","slaveof","slowlog","smembers","smove","sort","spop","srandmember","srem","strlen","subscribe","sunion","sunionstore","sync","time","ttl","type","unsubscribe","unwatch","watch","zadd","zcard","zcount","zincrby","zinterstore","zrange","zrangebyscore","zrank","zrem","zremrangebyrank","zremrangebyscore","zrevrange","zrevrangebyscore","zrevrank","zscore","zunionstore"]},{}],223:[function(a,b,c){function d(a){this.name=c.name,this.options=a||{},this.reset(),e.EventEmitter.call(this)}var e=a("events"),f=a("../util"),g=a("hiredis");c.debug_mode=!1,c.name="hiredis",f.inherits(d,e.EventEmitter),c.Parser=d,d.prototype.reset=function(){this.reader=new g.Reader({return_buffers:this.options.return_buffers||!1})},d.prototype.execute=function(a){var b;for(this.reader.feed(a);;){try{b=this.reader.get()}catch(c){this.emit("error",c);break}if(void 0===b)break;b&&b.constructor===Error?this.emit("reply error",b):this.emit("reply",b)}}},{"../util":227,events:115,hiredis:149}],224:[function(a,b,c){(function(b){function d(a){this.name=c.name,this.options=a||{},this.reset(),f.EventEmitter.call(this)}function e(a,b){var c,d="";for(c=0;b>c;c+=1)d+=String.fromCharCode(a[c]);return d}var f=a("events"),g=a("../util");c.debug_mode=!1,c.name="javascript",g.inherits(d,f.EventEmitter),c.Parser=d,d.prototype.reset=function(){this.return_buffer=new b(16384),this.return_string="",this.tmp_string="",this.multi_bulk_length=0,this.multi_bulk_replies=null,this.multi_bulk_pos=0,this.multi_bulk_nested_length=0,this.multi_bulk_nested_replies=null,this.states={TYPE:1,SINGLE_LINE:2,MULTI_BULK_COUNT:3,INTEGER_LINE:4,BULK_LENGTH:5,ERROR_LINE:6,BULK_DATA:7,UNKNOWN_TYPE:8,FINAL_CR:9,FINAL_LF:10,MULTI_BULK_COUNT_LF:11,BULK_LF:12},this.state=this.states.TYPE},d.prototype.parser_error=function(a){this.emit("error",a),this.reset()},d.prototype.execute=function(a){for(var d,f,g,h=0,i=this.states;h<a.length;)switch(this.state){case 1:switch(this.type=a[h],h+=1,this.type){case 43:this.state=i.SINGLE_LINE,this.return_buffer.end=0,this.return_string="";break;case 42:this.state=i.MULTI_BULK_COUNT,this.tmp_string="";break;case 58:this.state=i.INTEGER_LINE,this.return_buffer.end=0,this.return_string="";break;case 36:this.state=i.BULK_LENGTH,this.tmp_string="";break;case 45:this.state=i.ERROR_LINE,this.return_buffer.end=0,this.return_string="";break;default:this.state=i.UNKNOWN_TYPE}break;case 4:13===a[h]?(this.send_reply(+e(this.return_buffer,this.return_buffer.end)),this.state=i.FINAL_LF):(this.return_buffer[this.return_buffer.end]=a[h],this.return_buffer.end+=1),h+=1;break;case 6:13===a[h]?(this.send_error(this.return_buffer.toString("ascii",0,this.return_buffer.end)),this.state=i.FINAL_LF):(this.return_buffer[this.return_buffer.end]=a[h],this.return_buffer.end+=1),h+=1;break;case 2:13===a[h]?(this.send_reply(this.return_string),this.state=i.FINAL_LF):this.return_string+=String.fromCharCode(a[h]),h+=1;break;case 3:13===a[h]?this.state=i.MULTI_BULK_COUNT_LF:this.tmp_string+=String.fromCharCode(a[h]),h+=1;break;case 11:if(10!==a[h])return void this.parser_error(new Error("didn't see LF after NL reading multi bulk count"));this.multi_bulk_length&&(this.multi_bulk_nested_length=this.multi_bulk_length,this.multi_bulk_nested_replies=this.multi_bulk_replies,this.multi_bulk_nested_pos=this.multi_bulk_pos),this.multi_bulk_length=+this.tmp_string,this.multi_bulk_pos=0,this.state=i.TYPE,this.multi_bulk_length<0?(this.send_reply(null),this.multi_bulk_length=0):0===this.multi_bulk_length?(this.multi_bulk_pos=0,this.multi_bulk_replies=null,this.send_reply([])):this.multi_bulk_replies=new Array(this.multi_bulk_length),h+=1;break;case 5:13===a[h]?this.state=i.BULK_LF:this.tmp_string+=String.fromCharCode(a[h]),h+=1;break;case 12:if(10!==a[h])return void this.parser_error(new Error("didn't see LF after NL while reading bulk length"));this.bulk_length=+this.tmp_string,-1===this.bulk_length?(this.send_reply(null),this.state=i.TYPE):0===this.bulk_length?(this.send_reply(new b("")),this.state=i.FINAL_CR):(this.state=i.BULK_DATA,this.bulk_length>this.return_buffer.length&&(c.debug_mode&&console.log("Growing return_buffer from "+this.return_buffer.length+" to "+this.bulk_length),this.return_buffer=new b(this.bulk_length)),this.return_buffer.end=0),h+=1;break;case 7:if(this.return_buffer[this.return_buffer.end]=a[h],this.return_buffer.end+=1,h+=1,this.return_buffer.end===this.bulk_length){if(d=new b(this.bulk_length),this.bulk_length>10)this.return_buffer.copy(d,0,0,this.bulk_length);else for(f=0,g=this.bulk_length;g>f;f+=1)d[f]=this.return_buffer[f];this.send_reply(d),this.state=i.FINAL_CR}break;case 9:if(13!==a[h])return void this.parser_error(new Error("saw "+a[h]+" when expecting final CR"));this.state=i.FINAL_LF,h+=1;break;case 10:if(10!==a[h])return void this.parser_error(new Error("saw "+a[h]+" when expecting final LF"));this.state=i.TYPE,h+=1;break;default:this.parser_error(new Error("invalid state "+this.state))}},d.prototype.send_error=function(a){this.multi_bulk_length>0||this.multi_bulk_nested_length>0?this.add_multi_bulk_reply(a):this.emit("reply error",a)
},d.prototype.send_reply=function(a){this.multi_bulk_length>0||this.multi_bulk_nested_length>0?this.add_multi_bulk_reply(!this.options.return_buffers&&b.isBuffer(a)?a.toString("utf8"):a):!this.options.return_buffers&&b.isBuffer(a)?this.emit("reply",a.toString("utf8")):this.emit("reply",a)},d.prototype.add_multi_bulk_reply=function(a){if(this.multi_bulk_replies){if(this.multi_bulk_replies[this.multi_bulk_pos]=a,this.multi_bulk_pos+=1,this.multi_bulk_pos<this.multi_bulk_length)return}else this.multi_bulk_replies=a;this.multi_bulk_nested_length>0?(this.multi_bulk_nested_replies[this.multi_bulk_nested_pos]=this.multi_bulk_replies,this.multi_bulk_nested_pos+=1,this.multi_bulk_length=0,this.multi_bulk_replies=null,this.multi_bulk_pos=0,this.multi_bulk_nested_length===this.multi_bulk_nested_pos&&(this.emit("reply",this.multi_bulk_nested_replies),this.multi_bulk_nested_length=0,this.multi_bulk_nested_pos=0,this.multi_bulk_nested_replies=null)):(this.emit("reply",this.multi_bulk_replies),this.multi_bulk_length=0,this.multi_bulk_replies=null,this.multi_bulk_pos=0)}}).call(this,a("buffer").Buffer)},{"../util":227,buffer:4,events:115}],225:[function(a,b){function c(){this.tail=[],this.head=[],this.offset=0}a("./to_array");c.prototype.shift=function(){if(this.offset===this.head.length){var a=this.head;if(a.length=0,this.head=this.tail,this.tail=a,this.offset=0,0===this.head.length)return}return this.head[this.offset++]},c.prototype.push=function(a){return this.tail.push(a)},c.prototype.forEach=function(a,b){var c,d,e=this.head.slice(this.offset);if(e.push.apply(e,this.tail),b)for(c=0,d=e.length;d>c;c+=1)a.call(b,e[c],c,e);else for(c=0,d=e.length;d>c;c+=1)a(e[c],c,e);return e},c.prototype.getLength=function(){return this.head.length-this.offset+this.tail.length},Object.defineProperty(c.prototype,"length",{get:function(){return this.getLength()}}),"undefined"!=typeof b&&b.exports&&(b.exports=c)},{"./to_array":226}],226:[function(a,b){function c(a){var b,c=a.length,d=new Array(c);for(b=0;c>b;b+=1)d[b]=a[b];return d}b.exports=c},{}],227:[function(a,b){var c;try{c=a("util")}catch(d){c=a("sys")}b.exports=c},{sys:146,util:146}],228:[function(a,b){b.exports=a(197)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/socket.io-client/dist/socket.io.js":197}],229:[function(a,b,c){arguments[4][177][0].apply(c,arguments)},{"./lib/logger":230,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-logger/index.js":177}],230:[function(a,b){(function(c){function d(a){for(var b=arguments,d="",e=1;e<b.length;e++)e!==b.length-1?d=d+b[e]+"] [":d+=b[e];"string"==typeof a&&(a=a.replace(c.cwd(),""));var f=u.getLogger(a),g={};for(var h in f)g[h]=f[h];return["log","debug","info","warn","error","trace","fatal"].forEach(function(a){g[a]=function(){var e="";c.env.RAW_MESSAGE||(b.length>1&&(e="["+d+"] "),b.length&&c.env.LOGGER_LINE&&(e=q()+": "+e),e=t(e,A[a])),b.length&&(arguments[0]=e+arguments[0]),f[a].apply(f,arguments)}}),g}function e(a,b){y.timerId&&(clearInterval(y.timerId),delete y.timerId),y.filename=a,y.lastMTime=f(a),y.timerId=setInterval(h,1e3*b)}function f(a){var b;try{b=v.statSync(a).mtime}catch(c){throw new Error("Cannot find file with given path: "+a)}return b}function g(a){return a?JSON.parse(v.readFileSync(a,"utf8")):void 0}function h(){var a=f(y.filename);a&&(y.lastMTime&&a.getTime()>y.lastMTime.getTime()&&i(g(y.filename)),y.lastMTime=a)}function i(a){if(a)try{j(a.levels),a.replaceConsole?u.replaceConsole():u.restoreConsole()}catch(b){throw new Error("Problem reading log4js config "+w.inspect(a)+'. Error was "'+b.message+'" ('+b.stack+")")}}function j(a){if(a)for(var b in a)a.hasOwnProperty(b)&&u.getLogger(b).setLevel(a[b])}function k(a,b){var d=a;a=a||c.env.LOG4JS_CONFIG,b=b||{},"string"==typeof a&&(a=JSON.parse(v.readFileSync(a,"utf8"))),a&&(a=l(a,b)),a&&a.lineDebug&&(c.env.LOGGER_LINE=!0),a&&a.rawMessage&&(c.env.RAW_MESSAGE=!0),d&&a&&a.reloadSecs&&e(d,a.reloadSecs),u.configure(a,b)}function l(a,b){if(a instanceof Array)for(var c=0,d=a.length;d>c;c++)a[c]=l(a[c],b);else if("object"==typeof a){var e;for(var f in a)a.hasOwnProperty(f)&&(e=a[f],"string"==typeof e?a[f]=m(e,b):"object"==typeof e&&(a[f]=l(e,b)))}return a}function m(a,b){if(!a)return a;for(var c,d,e,f,g,h,i,j=/\$\{(.*?)\}/g,k="",l=0;c=j.exec(a);)d=c[1],e=d.split(":"),2===e.length||3===e.length?(f=e[0],g=e[1],3===e.length&&(h=e[2]),i=x[f],i||"function"==typeof i?(k+=a.substring(l,c.index),l=j.lastIndex,k+=i(g,b)||h):k+=d):k+=d;return l<a.length&&(k+=a.substring(l)),k}function n(a){return c.env[a]}function o(a){return c.argv[a]}function p(a,b){return b?b[a]:void 0}function q(){var a=new Error,b=a.stack.split("\n")[3].split(":")[1];return b}function r(a){return a?"["+z[a][0]+"m":""}function s(a){return a?"["+z[a][1]+"m":""}function t(a,b){return r(b)+a+s(b)}var u=a("log4js"),v=a("fs"),w=a("util"),x={env:n,args:o,opts:p},y={},z={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},A={all:"grey",trace:"blue",debug:"cyan",info:"green",warn:"yellow",error:"red",fatal:"magenta",off:"grey"};b.exports={getLogger:d,getDefaultLogger:u.getDefaultLogger,addAppender:u.addAppender,loadAppender:u.loadAppender,clearAppenders:u.clearAppenders,configure:k,replaceConsole:u.replaceConsole,restoreConsole:u.restoreConsole,levels:u.levels,setGlobalLogLevel:u.setGlobalLogLevel,layouts:u.layouts,appenders:u.appenders}}).call(this,a("_process"))},{_process:125,fs:1,log4js:235,util:146}],231:[function(a,b,c){"use strict";function d(a,b){b="object"==typeof b?b||{}:b?{format:b}:{};var c=a,d=g.toLevel(b.level,g.INFO),i=b.format||h,j=b.nolog?f(b.nolog):null;return function(a,f,h){if(a._logging)return h();if(j&&j.test(a.originalUrl))return h();if(c.isLevelEnabled(d)||"auto"===b.level){{var k,l=new Date,m=f.writeHead,n=f.end;a.originalUrl}a._logging=!0,f.writeHead=function(a,c){f.writeHead=m,f.writeHead(a,c),f.__statusCode=k=a,f.__headers=c||{},"auto"===b.level?(d=g.INFO,a>=300&&(d=g.WARN),a>=400&&(d=g.ERROR)):d=g.toLevel(b.level,g.INFO)},f.end=function(b,g){if(f.end=n,f.end(b,g),f.responseTime=new Date-l,c.isLevelEnabled(d))if("function"==typeof i){var h=i(a,f,function(b){return e(b,a,f)});h&&c.log(d,h)}else c.log(d,e(i,a,f))}}h()}}function e(a,b,c){return a.replace(":url",b.originalUrl).replace(":method",b.method).replace(":status",c.__statusCode||c.statusCode).replace(":response-time",c.responseTime).replace(":date",(new Date).toUTCString()).replace(":referrer",b.headers.referer||b.headers.referrer||"").replace(":http-version",b.httpVersionMajor+"."+b.httpVersionMinor).replace(":remote-addr",b.ip||b._remoteAddress||b.socket&&(b.socket.remoteAddress||b.socket.socket&&b.socket.socket.remoteAddress)).replace(":user-agent",b.headers["user-agent"]||"").replace(":content-length",c._headers&&c._headers["content-length"]||c.__headers&&c.__headers["Content-Length"]||"-").replace(/:req\[([^\]]+)\]/g,function(a,c){return b.headers[c.toLowerCase()]}).replace(/:res\[([^\]]+)\]/g,function(a,b){return c._headers?c._headers[b.toLowerCase()]||c.__headers[b]:c.__headers&&c.__headers[b]})}function f(a){var b=null;if(a&&(a instanceof RegExp&&(b=a),"string"==typeof a&&(b=new RegExp(a)),Array.isArray(a))){var c=a.map(function(a){return a.source?a.source:a});b=new RegExp(c.join("|"))}return b}var g=a("./levels"),h=':remote-addr - - ":method :url HTTP/:http-version" :status :content-length ":referrer" ":user-agent"';c.connectLogger=d},{"./levels":234}],232:[function(a,b){b.exports=a(191)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-scheduler/node_modules/log4js/lib/date_format.js":191}],233:[function(a,b){"use strict";function c(a){return a.map(function(a){return a instanceof Error&&a.stack?{inspect:function(){return p.format(a)+"\n"+a.stack}}:a})}function d(a){var b=Array.isArray(a)?a:Array.prototype.slice.call(arguments);return p.format.apply(p,c(b))}function e(a){return a?"["+s[a][0]+"m":""}function f(a){return a?"["+s[a][1]+"m":""}function g(a,b){return e(b)+a+f(b)}function h(a,b){var c=g(d("[%s] [%s] %s - ",m.asString(a.startTime),a.level,a.categoryName),b);return c}function i(a){return h(a)+d(a.data)}function j(a){return h(a,r[a.level.toString()])+d(a.data)}function k(a){return d(a.data)}function l(a,b){function c(a,b){var c=a.categoryName;if(b){var d=parseInt(b,10),e=c.split(".");d<e.length&&(c=e.slice(e.length-d).join("."))}return c}function g(a,b){var c=m.ISO8601_FORMAT;return b&&(c=b,"ISO8601"==c?c=m.ISO8601_FORMAT:"ISO8601_WITH_TZ_OFFSET"==c?c=m.ISO8601_WITH_TZ_OFFSET_FORMAT:"ABSOLUTE"==c?c=m.ABSOLUTETIME_FORMAT:"DATE"==c&&(c=m.DATETIME_FORMAT)),m.asString(c,a.startTime)}function h(){return n.hostname().toString()}function i(a){return d(a.data)}function j(){return o}function k(a){return a.level.toString()}function l(a){return""+a.startTime.toLocaleTimeString()}function p(a){return e(r[a.level.toString()])}function q(a){return f(r[a.level.toString()])}function s(){return"%"}function t(a,c){return"undefined"!=typeof b[c]?"function"==typeof b[c]?b[c](a):b[c]:null}function u(a,b,c){return z[a](b,c)}function v(a,b){var c;return a?(c=parseInt(a.substr(1),10),b.substring(0,c)):b}function w(a,b){var c;if(a)if("-"==a.charAt(0))for(c=parseInt(a.substr(1),10);b.length<c;)b+=" ";else for(c=parseInt(a,10);b.length<c;)b=" "+b;return b}var x="%r %p %c - %m%n",y=/%(-?[0-9]+)?(\.?[0-9]+)?([\[\]cdhmnprx%])(\{([^\}]+)\})?|([^%]+)/;a=a||x;var z={c:c,d:g,h:h,m:i,n:j,p:k,r:l,"[":p,"]":q,"%":s,x:t};return function(b){for(var c,d="",e=a;c=y.exec(e);){var f=c[0],g=c[1],h=c[2],i=c[3],j=c[5],k=c[6];if(k)d+=""+k;else{var l=u(i,b,j)||f;l=v(h,l),l=w(g,l),d+=l}e=e.substr(c.index+c[0].length)}return d}}var m=a("./date_format"),n=a("os"),o=n.EOL||"\n",p=a("util"),q={messagePassThrough:function(){return k},basic:function(){return i},colored:function(){return j},coloured:function(){return j},pattern:function(a){return l(a&&a.pattern,a&&a.tokens)}},r={ALL:"grey",TRACE:"blue",DEBUG:"cyan",INFO:"green",WARN:"yellow",ERROR:"red",FATAL:"magenta",OFF:"grey"},s={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[90,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};b.exports={basicLayout:i,messagePassThroughLayout:k,patternLayout:l,colouredLayout:j,coloredLayout:j,layout:function(a,b){return q[a]&&q[a](b)}}},{"./date_format":232,os:3,util:146}],234:[function(a,b){b.exports=a(182)},{"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-logger/node_modules/log4js/lib/levels.js":182}],235:[function(a,b){(function(c){"use strict";function d(a){return H.hasOwnProperty(a)}function e(a){"string"!=typeof a&&(a=E.DEFAULT_CATEGORY);var b;return d(a)||(H[a]=new E(a),G[a]&&(b=G[a],b.forEach(function(b){H[a].addListener("log",b)})),G[F]&&(b=G[F],b.forEach(function(b){H[a].addListener("log",b)}))),H[a]}function f(){var a=Array.prototype.slice.call(arguments),b=a.shift();(0===a.length||void 0===a[0])&&(a=[F]),Array.isArray(a[0])&&(a=a[0]),a.forEach(function(a){h(b,a),a===F?g(b):d(a)&&H[a].addListener("log",b)})}function g(a){for(var b in H)d(b)&&H[b].addListener("log",a)}function h(a,b){G[b]||(G[b]=[]),G[b].push(a)}function i(){G={};for(var a in H)d(a)&&H[a].removeAllListeners("log")}function j(a,b){i(),a&&a.forEach(function(a){w(a.type);var c;a.makers=I;try{c=I[a.type](a,b),f(c,a.category)}catch(d){throw new Error("log4js configuration problem for "+A.inspect(a),d)}})}function k(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(b===F&&l(a[b]),e(b).setLevel(a[b]))}function l(a){E.prototype.level=C.toLevel(a,C.TRACE)}function m(){return e(E.DEFAULT_CATEGORY)}function n(a){return a?JSON.parse(z.readFileSync(a,"utf8")):void 0}function o(a,b){if(a)try{j(a.appenders,b),k(a.levels),a.replaceConsole?t():u()}catch(c){throw new Error("Problem reading log4js config "+A.inspect(a)+'. Error was "'+c.message+'" ('+c.stack+")")}}function p(){var a=q(L.filename);a&&(L.lastMTime&&a.getTime()>L.lastMTime.getTime()&&o(n(L.filename)),L.lastMTime=a)}function q(a){var b;try{b=z.statSync(L.filename).mtime}catch(c){e("log4js").warn("Failed to load configuration file "+a)}return b}function r(a,b){L.timerId&&(clearInterval(L.timerId),delete L.timerId),L.filename=a,L.lastMTime=q(a),L.timerId=setInterval(p,1e3*b.reloadSecs)}function s(a,b){var d=a;d=d||c.env.LOG4JS_CONFIG,b=b||{},void 0===d||null===d||"string"==typeof d?(b.reloadSecs&&r(d,b),d=n(d)||K):b.reloadSecs&&e("log4js").warn('Ignoring configuration reload parameter for "object" configuration.'),o(d,b)}function t(a){function b(b){return function(){b.apply(a,arguments)}}a=a||e("console"),["log","debug","info","warn","error"].forEach(function(c){console[c]=b("log"===c?a.info:a[c])})}function u(){["log","debug","info","warn","error"].forEach(function(a){console[a]=M[a]})}function v(b){var c;try{c=a("./appenders/"+b)}catch(d){c=a(b)}return c}function w(a,c){if(c=c||v(a),!c)throw new Error("Invalid log4js appender: "+A.inspect(a));b.exports.appenders[a]=c.appender.bind(c),c.shutdown&&(J[a]=c.shutdown.bind(c)),I[a]=c.configure.bind(c)}function x(a){D.disableAllLogWrites();var b=Object.keys(J).reduce(function(a,b){return a.concat(J[b])},[]);y.forEach(b,function(a,b){a(b)},a)}var y=(a("events"),a("async")),z=a("fs"),A=(a("path"),a("util")),B=a("./layouts"),C=a("./levels"),D=a("./logger"),E=(D.LoggingEvent,D.Logger),F="[all]",G={},H={},I={},J={},K={appenders:[{type:"console"}],replaceConsole:!1},L={},M={log:console.log,debug:console.debug,info:console.info,warn:console.warn,error:console.error};b.exports={getLogger:e,getDefaultLogger:m,hasLogger:d,addAppender:f,loadAppender:w,clearAppenders:i,configure:s,shutdown:x,replaceConsole:t,restoreConsole:u,levels:C,setGlobalLogLevel:l,layouts:B,appenders:{},appenderMakers:I,connectLogger:a("./connect-logger").connectLogger},s()}).call(this,a("_process"))},{"./connect-logger":231,"./layouts":233,"./levels":234,"./logger":236,_process:125,async:237,events:115,fs:1,path:124,util:146}],236:[function(a,b){b.exports=a(195)},{"./levels":234,"/Users/jjung/dev/node/pomelo/reckoner/example/pong/node_modules/reckoner/node_modules/pomelo/node_modules/pomelo-admin/node_modules/pomelo-scheduler/node_modules/log4js/lib/logger.js":195,events:115,util:146}],237:[function(a,b){b.exports=a("./lib/async")},{"./lib/async":238}],238:[function(a,b){(function(a){!function(){var c={},d=this,e=d.async;"undefined"!=typeof b&&b.exports?b.exports=c:d.async=c,c.noConflict=function(){return d.async=e,c};var f=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},g=function(a,b){if(a.map)return a.map(b);var c=[];return f(a,function(a,d,e){c.push(b(a,d,e))}),c},h=function(a,b,c){return a.reduce?a.reduce(b,c):(f(a,function(a,d,e){c=b(c,a,d,e)}),c)},i=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};c.nextTick="undefined"!=typeof a&&a.nextTick?a.nextTick:function(a){setTimeout(a,0)},c.forEach=function(a,b,c){if(!a.length)return c();var d=0;f(a,function(e){b(e,function(b){b?(c(b),c=function(){}):(d+=1,d===a.length&&c())})})},c.forEachSeries=function(a,b,c){if(!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d===a.length?c():e())})};e()},c.forEachLimit=function(a,b,c,d){if(!a.length||0>=b)return d();var e=0,f=0,g=0;!function h(){if(e===a.length)return d();for(;b>g&&f<a.length;)c(a[f],function(b){b?(d(b),d=function(){}):(e+=1,g-=1,e===a.length?d():h())}),f+=1,g+=1}()};var j=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[c.forEach].concat(b))}},k=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[c.forEachSeries].concat(b))}},l=function(a,b,c,d){var e=[];b=g(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};c.map=j(l),c.mapSeries=k(l),c.reduce=function(a,b,d,e){c.forEachSeries(a,function(a,c){d(b,a,function(a,d){b=d,c(a)})},function(a){e(a,b)})},c.inject=c.reduce,c.foldl=c.reduce,c.reduceRight=function(a,b,d,e){var f=g(a,function(a){return a}).reverse();c.reduce(f,b,d,e)},c.foldr=c.reduceRight;var m=function(a,b,c,d){var e=[];b=g(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(g(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};c.filter=j(m),c.filterSeries=k(m),c.select=c.filter,c.selectSeries=c.filterSeries;var n=function(a,b,c,d){var e=[];b=g(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(g(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};c.reject=j(n),c.rejectSeries=k(n);var o=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};c.detect=j(o),c.detectSeries=k(o),c.some=function(a,b,d){c.forEach(a,function(a,c){b(a,function(a){a&&(d(!0),d=function(){}),c()})},function(){d(!1)})},c.any=c.some,c.every=function(a,b,d){c.forEach(a,function(a,c){b(a,function(a){a||(d(!1),d=function(){}),c()})},function(){d(!0)})},c.all=c.every,c.sortBy=function(a,b,d){c.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return d(a);var c=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};d(null,g(b.sort(c),function(a){return a.value}))})},c.auto=function(a,b){b=b||function(){};var c=i(a);if(!c.length)return b(null);var d={},e=[],g=function(a){e.unshift(a)},j=function(a){for(var b=0;b<e.length;b+=1)if(e[b]===a)return void e.splice(b,1)},k=function(){f(e,function(a){a()})};g(function(){i(d).length===c.length&&b(null,d)}),f(c,function(c){var e=a[c]instanceof Function?[a[c]]:a[c],f=function(a){if(a)b(a),b=function(){};else{var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[c]=e,k()}},i=e.slice(0,Math.abs(e.length-1))||[],l=function(){return h(i,function(a,b){return a&&d.hasOwnProperty(b)},!0)};if(l())e[e.length-1](f,d);else{var m=function(){l()&&(j(m),e[e.length-1](f,d))};g(m)}})},c.waterfall=function(a,b){if(!a.length)return b();b=b||function(){};var d=function(a){return function(e){if(e)b(e),b=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=a.next();f.push(g?d(g):b),c.nextTick(function(){a.apply(null,f)})}}};d(c.iterator(a))()},c.parallel=function(a,b){if(b=b||function(){},a.constructor===Array)c.map(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var d={};c.forEach(i(a),function(b,c){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[b]=e,c(a)})},function(a){b(a,d)})}},c.series=function(a,b){if(b=b||function(){},a.constructor===Array)c.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var d={};c.forEachSeries(i(a),function(b,c){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[b]=e,c(a)})},function(a){b(a,d)})}},c.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},c.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var p=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};c.concat=j(p),c.concatSeries=k(p),c.whilst=function(a,b,d){a()?b(function(e){return e?d(e):void c.whilst(a,b,d)}):d()},c.until=function(a,b,d){a()?d():b(function(e){return e?d(e):void c.until(a,b,d)})},c.queue=function(a,b){var d=0,e={tasks:[],concurrency:b,saturated:null,empty:null,drain:null,push:function(a,d){e.tasks.push({data:a,callback:d}),e.saturated&&e.tasks.length==b&&e.saturated(),c.nextTick(e.process)},process:function(){if(d<e.concurrency&&e.tasks.length){var b=e.tasks.shift();e.empty&&0==e.tasks.length&&e.empty(),d+=1,a(b.data,function(){d-=1,b.callback&&b.callback.apply(b,arguments),e.drain&&e.tasks.length+d==0&&e.drain(),e.process()})}},length:function(){return e.tasks.length},running:function(){return d}};return e};var q=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&f(c,function(b){console[a](b)}))}]))}};c.log=q("log"),c.dir=q("dir"),c.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.unmemoized=a,e},c.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}}}()}).call(this,a("_process"))},{_process:125}],239:[function(a,b){{var c=a("jclass"),d=a("node-event-emitter");b.exports=c._extend(d.prototype)}},{jclass:155,"node-event-emitter":157}],240:[function(a,b){var c=a("jclass"),d=c._extend({setState:function(){},getState:function(){},getFPS:function(){return 30},getWorld:function(){return this.world},init:function(){},update:function(){},project:function(){}});b.exports=d},{jclass:155}],241:[function(a,b){(function(c){var d=a("hasharray"),e=(a("jclass"),a("./ReckonerBase")),f=30,g=.3,h=30,i=e._extend({init:function j(a){j._super.call(this),this.pomelo=a,this.games=new d("rid"),this.lastTime=void 0,this.elapsed=void 0,this.id="sid:"+Math.round(100*Math.random()).toString(16)+":"+c.pid,this.interval=void 0},getNow:function(){return(new Date).getTime()},addGame:function(a,b){a.messaging=this.messaging,a.clientUpdateTimer=0,a.rid=b,this.games.add(a)},sendState:function(){this.games.all.forEach(function(a){var b=this.pomelo.get("channelService").getChannel(a.rid,!1);b?b.pushMessage("serverState",a.getState()):console.log("WARNING: attempted to push to channel but does not exist",a.rid)})},start:function(){this.interval=setInterval(this.frameHandler.bind(this),1e3/f)},stopAll:function(){clearInterval(this.interval)},resetAll:function(){this.games.all.forEach(function(){game.reset(),game.start()})},frameHandler:function(){return this.lastTime?(this.elapsed=(this.getNow()-this.lastTime)/1e3,this.lastTime=this.getNow(),this.elapsed=this.elapsed>g?g:this.elapsed,this.games.forEach(function(a){a.serverUpdate(this.elapsed)}),this.clientUpdateTimer+=this.elapsed,void(this.clientUpdateTimer>h/1e3&&(this.sendState(),this.clientUpdateTimer=0))):this.lastTime=this.getNow()},session_userInputHandler:function(a,b){var c=this.games.get(a.rid);c?c.addUserInputForSession(b.uid,a):console.log("ERROR: unable to find game for rid: "+a.rid)},session_disconnectedHandler:function(a){console.log("SESSION DISCONNECTED:",a),this.game.world.players.removeByKey(a),this.game.world.getChildren().get(a).destroy(),0==this.game.world.getChildren().getAsArray("player").length&&this.reset()},session_connectedHandler:function(a,b){var c=this.games.get(b);return c?(c.startSession=c.startSession||a,c.addSession(a),void console.log("SESSION CONNECTED:",a.uid," to ",b)):void console.log("Attempted to connect to game that does not exist: "+b)}});b.exports=i}).call(this,a("_process"))},{"./ReckonerBase":240,_process:125,hasharray:153,jclass:155}],242:[function(a,b){var c=a("merge"),d=a("./features/FeatureManager"),e=(a("jclass"),a("hasharray")),f=a("../EventDispatcher"),g=b.exports=f._extend({isServer:function(){return"undefined"==typeof window},stateSetProps:function(){return[]},stateGetProps:function(){return["_id"]},setParent:function(a){this._parent=a},getParent:function(){return this._parent},setChildren:function(a){this._children=a},getChildren:function(){return this._children},setId:function(a){this._id=a},getId:function(){return this._id||(this._id=this.randomId())},setState:function(a){this._state=a},getState:function(a){return this.inited?this.merge.recursive(!0,{id:this.getId(),type:this.type,children:this.getChildren().all.map(function(a){return a.getState()})},a):{}},getChildrenIds:function(){if(!this.inited)return{};var a={};return this.getChildren().all.forEach(function(b){a[b.getId()]=!0}),a},setChildrenState:function(a){var b=this,c=this.getChildrenIds();if(a.forEach(function(a){var d=b.getChildren().get(a.id);if(d){if("[object Array]"===Object.prototype.toString.call(d))return void console.log("Two ids are the same!",d[0].getId());d.setState(a)}else b.getChildren().add(b.newChildFromState(a));delete c[a.id]}),this.destroyUnfoundChildrenOnStateSet)for(var d in c)this.destroyChildById(d)},getChildrenState:function(){return this.inited?this.getChildren().all.map(function(a){return a.getState()}):{}},setDirty:function(a){this._dirty=a,this._dirty&&this.getParent()?this.getParent().setDirty(!0):"",this._dirty?"":this.getChildren().forEach(function(a){a.setDirty(!1)})},getDirty:function(){return this._dirty},emit:function(){this._super.apply(this,arguments);var a=this.getParent();a&&a.emit.apply(a,arguments)},randomId:function(){return Math.round(999999999*Math.random()).toString(16)},init:function(a,b){a||(g.prototype.world=g.prototype.root=this),this.merge=c,this.setId(b),this.type="GameObject",this.buildChildrenObject(),this.setParent(a),this.setDirty(!0),this.destroyed=!1,this.sprite=void 0,this.destroyUnfoundChildrenOnStateSet=!0,this.pre=new d(this),this.post=new d(this),this.inited=!0},update:function(a,b){b&&b.add(this);var c=this;this.pre.update(a),this.getChildren().all.concat().forEach(function(a){a.destroyed&&c.getChildren().remove(a)}),this.getChildren().all.forEach(function(c){c.update(a,b)}),this.post.update(a)},newChildFromState:function(a){var b=new g;return b.init(this,a.id),b.state=a,b},destroyChildById:function(a){var b=this.getChildren().get(a);return b?(b.destroy&&b.destroy(),void this.getChildren().remove(b)):void console.log("Attempting to destroy non-existent child with id",a)},buildChildrenObject:function(){this.setChildren(new e(["_id","type"]))},buildSprite:function(){},updateSprite:function(a){this.sprite&&this.destroyed?this.sprite.destroy(!0):(this.sprite||this.buildSprite(a),this.sprite&&this.sprite.updateWithModel(this))},updatePhaser:function(a){this.getChildren().all.forEach(function(b){b.updatePhaser(a)}),this.updateSprite(a)},destroy:function(){this.destroyed=!0},forEach:function(a,b){var c=b?this.getChildren().getAll(b):this.getChildren().all.concat();c.forEach(function(c){c.forEach(a,b)}),(!b||b.indexOf(this.type))&&a.apply(this)}})},{"../EventDispatcher":239,"./features/FeatureManager":243,hasharray:153,jclass:155,merge:156}],243:[function(a,b){var c=a("hasharray"),d=function(a){this.gameObject=a,this.features=new c(["name"])};d.prototype={cache:{},add:function(a){this.features.add(a)},update:function(a){var b=this;this.cache={},this.features.all.forEach(function(c){c.applyUpdate(b.gameObject,a,b.cache)})}},b.exports=d},{hasharray:153}],244:[function(a,b){var c=a("jclass"),d=c._extend({init:function(a){this.app=a},enter:function(a,b,c){var d=this,e=a.rid,f=a.username+"*"+e,g=this.app.get("sessionService");return g.getByUid(f)?c(null,{code:500,error:!0,errorText:"Username already exists:"+a.username+" for this channel "+e}):(b.bind(f),b.set("rid",e),b.push("rid",function(a){a&&console.error("Set rid for session service failed! error is : %j",a.stack)}),b.on("closed",this.session_closedHandler.bind(this)),void this.app.rpc.skyduel.skyduelRemote.add(b,f,d.app.get("serverId"),e,!0,this.reckonerRemote_addCallback.bind(this,c)))},session_closedHandler:function(a,b){b&&b.uid&&a.rpc.skyduel.skyduelRemote.kick(b,b.uid,a.get("serverId"),b.get("rid"),null)},reckonerRemote_addCallback:function(a,b){a(null,{users:b})}});b.exports=function(a){return new d(a)}},{jclass:155}],245:[function(a,b){function c(a,b){return b[Math.abs(crc.crc32(a))%b.length]}var d=a("jclass"),e=d._extend({init:function(a){this.app=a},requestConnectorForClient:function(a,b,d){var e=a.clientId;if(!e)return void d(null,{code:500,reason:"no clientId provided"});var f=this.app.getServersByType("connector");if(!f||0===f.length)return void d(null,{code:500,reason:"no connectors found"});var g=c(e,f);d(null,{code:200,host:g.host,port:g.clientPort})}});b.exports=function(a){return new e(a)}},{jclass:155}],246:[function(a,b){(function(c,d){var e=a("jclass"),f=a("fs"),g=a("pomelo");d.isClient=!1;var h=e._extend({init:function(a,b,d){d.verbose&&console.log("Creating Pomelo Application"),this.options=d||{},this.name=a,this.options.logLineNumbers&&(c.env.LOGGER_LINE=!0),this.app=g.createApp(this.options),this.gameServerClass=b,this.app.set("name",a),this.configure(),c.on("uncaughtException",this.uncaughtExceptionHandler.bind(this))},start:function(){console.log("Reckoner starting Pomelo app: ",this.name),this.app.start()},configure:function(){this.setupConnector(),this.setupGate(),this.setupReckoner(),this.setupAll()},setupConnector:function(){this.app.configure("production|development|staging","connector",this.setupConnectorHandler.bind(this))},setupConnectorHandler:function(){this.app.set("connectorConfig",this.options.connector||{connector:g.connectors.hybridconnector,heartbeat:3,useDict:!0,useProtobuf:!0})},setupAll:function(){this.app.configure("production|development|staging",this.setupAllHandler.bind(this))},setupAllHandler:function(){this.options.pidFile&&f.appendFileSync(this.options.pidFile,c.pid.toString()+"\n"),this.app.route(this.name,this.routeHandler.bind(this)),this.app.filter(g.timeout())},setupGate:function(){this.app.configure("production|development|staging","gate",this.setupGateHandler.bind(this))},setupGateHandler:function(){this.app.set("connectorConfig",this.options.gate||{connector:g.connectors.hybridconnector,useProtobuf:!0})},setupReckoner:function(){this.app.configure("production|development|staging",this.name,this.setupReckonerHandler.bind(this))},setupReckonerHandler:function(){this.app.set(this.name+"Service",new this.gameServerClass(this.app))},routeHandler:function(a,b,c,d){var e=c.getServersByType(this.name);if(!e||0===e.length)return void d(new Error("Can not find any '"+this.name+"' servers."));var f=connectorFinder.uidToConnector(a.get("rid"),e);d(null,f.id)},uncaughtExceptionHandler:function(a){console.error(this.name+" Caught exception: ",a)}});b.exports=h}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:125,fs:1,jclass:155,pomelo:158}],247:[function(a,b,c){var d=a("jclass"),e=d._extend({init:function(a){this.app=a,this.channelService=a.get("channelService"),this.service=a.get("reckonerService")},add:function(a,b,c,d,e){var f=this.channelService.getChannel(c,d),g=a.split("*")[0],h={route:"onAdd",user:g};f.pushMessage(h),f&&f.add(a,b),e(this.getUserList(c,d))},getUserList:function(a,b){var c=this.channelService.getChannel(a,b),d=c?c.getMembers():[];return d.map(function(a){return a.split("*")[0]})},kick:function(a,b,c,d){var e=a.split("*")[0],f={route:"onLeave",user:e},g=this.channelService.getChannel(c,!1);g&&g.leave(a,b),g.pushMessage(f),this.service.session_disconnectedHandler(a),d()}});c=b.exports=function(a){return new e(a)}},{jclass:155}],248:[function(a,b){var c=a("reckoner"),d=c.Client._extend({init:function e(){e._super.call(this)}});b.exports=d},{reckoner:152}]},{},[248]);